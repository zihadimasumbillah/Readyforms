"use strict";exports.id=145,exports.ids=[145],exports.modules={74253:(e,t,s)=>{s.d(t,{O:()=>w});var r=s(10326),a=s(17577),i=s(74723),l=s(74064),n=s(27256),d=s(41190),o=s(82015),c=s(9280),m=s(91664),u=s(59008),x=s(29280),p=s(40815),f=s(77197),h=s(82616),j=s(76812),g=s(47035);function b({id:e,label:t,enabled:s,question:a,onToggle:i,onQuestionChange:l,onDelete:n,maxFields:o=4,currentFieldCount:u=0}){let{attributes:x,listeners:p,setNodeRef:b,transform:v,transition:N}=(0,f.nB)({id:e}),y={transform:h.ux.Transform.toString(v),transition:N,opacity:s?1:.5};return(0,r.jsxs)("div",{ref:b,style:y,className:"mb-4 border rounded-md p-4 bg-background",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{...x,...p,className:"cursor-grab p-1",children:r.jsx(j.W1P,{className:"h-5 w-5 text-muted-foreground"})}),r.jsx("h4",{className:"font-medium",children:t})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[u&&u>1&&r.jsx(m.z,{variant:"ghost",size:"sm",onClick:n,className:"h-8 w-8 p-0",title:"Remove question",children:r.jsx(g.Z,{className:"h-4 w-4 text-muted-foreground"})}),r.jsx(c.X,{id:`toggle-${e}`,checked:s,onCheckedChange:i})]})]}),r.jsx("div",{className:`transition-all ${s?"opacity-100":"opacity-50"}`,children:r.jsx(d.I,{value:a,onChange:e=>l(e.target.value),placeholder:"Enter question text",disabled:!s,className:"mt-2"})})]})}var v=s(51996),N=s(56627);let y=n.Ry({title:n.Z_().min(3,{message:"Title must be at least 3 characters"}),description:n.Z_(),topicId:n.Z_().min(1,{message:"Please select a topic"}),isPublic:n.O7().default(!0),allowedUsers:n.Z_().optional()});function w({topics:e,initialValues:t={},onSubmit:s,isEditMode:n=!1}){let[h,j]=(0,a.useState)(t),[g,w]=(0,a.useState)(t.questionOrder?JSON.parse(t.questionOrder):[]),[$,C]=(0,a.useState)(!1),k=(0,i.cI)({resolver:(0,l.F)(y),defaultValues:{title:t.title||"",description:t.description||"",topicId:t.topicId||"",isPublic:void 0===t.isPublic||t.isPublic,allowedUsers:t.allowedUsers||""}}),T=(0,p.Dy)((0,p.VT)(p.we),(0,p.VT)(p.Lg,{coordinateGetter:f.is})),I=(e,t)=>{if(!h)return;let s=`${e}State`;j({...h,[s]:t}),t&&!g.includes(e)&&w([...g,e])},S=(e,t)=>{if(!h)return;let s=`${e}Question`;j({...h,[s]:t})},z=e=>{if(h){for(let t=1;t<=4;t++){let s=`custom${e}${t}`,r=`${s}State`;if(!h[r]){I(s,!0);let t=`${s}Question`;j({...h,[r]:!0,[t]:`New ${e} Question`}),g.includes(s)||w([...g,s]);return}}(0,N.Am)({title:"Maximum fields reached",description:`You can have at most 4 ${e.toLowerCase()} questions.`,variant:"default"})}},F=e=>{if(!h)return;let t=`${e}State`;j({...h,[t]:!1}),w(g.filter(t=>t!==e))},Z=e=>{if(!h)return 0;let t=0;for(let s=1;s<=4;s++)h[`custom${e}${s}State`]&&t++;return t},P=async e=>{try{C(!0);let t={...e,version:h.version,questionOrder:JSON.stringify(g)};for(let e=1;e<=4;e++)["String","Text","Int","Checkbox"].forEach(s=>{let r=`custom${s}${e}`,a=`${r}State`,i=`${r}Question`;t[a]=h[a]||!1,t[i]=h[i]||""});await s(t)}catch(e){console.error("Error saving template:",e),(0,N.Am)({title:"Error",description:"Failed to save template. Please try again.",variant:"destructive"})}finally{C(!1)}};return r.jsx("div",{className:"space-y-6",children:r.jsx("div",{className:"space-y-4",children:r.jsx(u.l0,{...k,children:(0,r.jsxs)("form",{onSubmit:k.handleSubmit(P),className:"space-y-6",children:[r.jsx(u.Wi,{control:k.control,name:"title",render:({field:e})=>(0,r.jsxs)(u.xJ,{children:[r.jsx(u.lX,{children:"Template Title"}),r.jsx(u.NI,{children:r.jsx(d.I,{placeholder:"Enter template title",...e})}),r.jsx(u.zG,{})]})}),r.jsx(u.Wi,{control:k.control,name:"description",render:({field:e})=>(0,r.jsxs)(u.xJ,{children:[r.jsx(u.lX,{children:"Description"}),r.jsx(u.NI,{children:r.jsx(o.g,{placeholder:"Enter a description of this template",...e})}),r.jsx(u.zG,{})]})}),r.jsx(u.Wi,{control:k.control,name:"topicId",render:({field:t})=>(0,r.jsxs)(u.xJ,{children:[r.jsx(u.lX,{children:"Topic"}),(0,r.jsxs)(x.Ph,{onValueChange:t.onChange,defaultValue:t.value,children:[r.jsx(u.NI,{children:r.jsx(x.i4,{children:r.jsx(x.ki,{placeholder:"Select a topic"})})}),r.jsx(x.Bw,{children:e.map(e=>r.jsx(x.Ql,{value:e.id,children:e.name},e.id))})]}),r.jsx(u.zG,{})]})}),r.jsx(u.Wi,{control:k.control,name:"isPublic",render:({field:e})=>(0,r.jsxs)(u.xJ,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[r.jsx(u.NI,{children:r.jsx(c.X,{checked:e.value,onCheckedChange:e.onChange})}),(0,r.jsxs)("div",{className:"space-y-1 leading-none",children:[r.jsx(u.lX,{children:"Make this template public"}),r.jsx(u.pf,{children:"Public templates are visible to all users. Private templates are only visible to you."})]})]})}),(0,r.jsxs)("div",{className:"bg-muted/20 border rounded-md p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-medium",children:"Questions"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Add and configure questions for your form"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>z("String"),disabled:Z("String")>=4,className:"gap-1",type:"button",children:[r.jsx(v.Z,{className:"h-3.5 w-3.5"}),"Add Text Field"]}),(0,r.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>z("Text"),disabled:Z("Text")>=4,className:"gap-1",type:"button",children:[r.jsx(v.Z,{className:"h-3.5 w-3.5"}),"Add Text Area"]}),(0,r.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>z("Int"),disabled:Z("Int")>=4,className:"gap-1",type:"button",children:[r.jsx(v.Z,{className:"h-3.5 w-3.5"}),"Add Number"]}),(0,r.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>z("Checkbox"),disabled:Z("Checkbox")>=4,className:"gap-1",type:"button",children:[r.jsx(v.Z,{className:"h-3.5 w-3.5"}),"Add Checkbox"]})]})]}),(0,r.jsxs)("div",{className:"space-y-2 py-2",children:[r.jsx(p.LB,{sensors:T,collisionDetection:p.pE,onDragEnd:e=>{let{active:t,over:s}=e;s&&t.id!==s.id&&w(e=>{let r=e.indexOf(t.id.toString()),a=e.indexOf(s.id.toString());return(0,f.Rp)(e,r,a)})},children:r.jsx(f.Fo,{items:g,strategy:f.qw,children:g.map(e=>{let t;let s=`${e}State`,a=`${e}Question`,i=e.match(/custom([A-Za-z]+)(\d)/);if(!i)return null;let[,l,n]=i;switch(l){case"String":t=`Text Field ${n}`;break;case"Text":t=`Text Area ${n}`;break;case"Int":t=`Number ${n}`;break;case"Checkbox":t=`Checkbox ${n}`;break;default:t=`Question ${n}`}return r.jsx(b,{id:e,label:t,enabled:h[s]||!1,question:h[a]||"",onToggle:t=>I(e,t),onQuestionChange:t=>S(e,t),onDelete:()=>F(e),currentFieldCount:g.filter(e=>e.includes(l)).length,maxFields:4},e)})})}),0===g.length&&(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-lg font-medium text-muted-foreground",children:"No questions yet"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Add questions using the buttons above"})]})]})]}),r.jsx("div",{className:"flex justify-end space-x-2",children:r.jsx(m.z,{type:"submit",disabled:$,children:$?"Saving...":n?"Update Template":"Create Template"})})]})})})})}},9280:(e,t,s)=>{s.d(t,{X:()=>d});var r=s(10326),a=s(17577),i=s(13635),l=s(32933),n=s(51223);let d=a.forwardRef(({className:e,...t},s)=>r.jsx(i.fC,{ref:s,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(i.z$,{className:(0,n.cn)("flex items-center justify-center text-current"),children:r.jsx(l.Z,{className:"h-4 w-4"})})}));d.displayName=i.fC.displayName},59008:(e,t,s)=>{s.d(t,{l0:()=>m,NI:()=>g,pf:()=>b,Wi:()=>x,xJ:()=>h,lX:()=>j,zG:()=>v});var r=s(10326),a=s(17577),i=s(34214),l=s(74723),n=s(51223),d=s(34478);let o=(0,s(79360).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...t},s)=>r.jsx(d.f,{ref:s,className:(0,n.cn)(o(),e),...t}));c.displayName=d.f.displayName;let m=l.RV,u=a.createContext({}),x=({...e})=>r.jsx(u.Provider,{value:{name:e.name},children:r.jsx(l.Qr,{...e})}),p=()=>{let e=a.useContext(u),t=a.useContext(f),{getFieldState:s,formState:r}=(0,l.Gc)(),i=s(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=t;return{id:n,name:e.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...i}},f=a.createContext({}),h=a.forwardRef(({className:e,...t},s)=>{let i=a.useId();return r.jsx(f.Provider,{value:{id:i},children:r.jsx("div",{ref:s,className:(0,n.cn)("space-y-2",e),...t})})});h.displayName="FormItem";let j=a.forwardRef(({className:e,...t},s)=>{let{error:a,formItemId:i}=p();return r.jsx(c,{ref:s,className:(0,n.cn)(a&&"text-destructive",e),htmlFor:i,...t})});j.displayName="FormLabel";let g=a.forwardRef(({...e},t)=>{let{error:s,formItemId:a,formDescriptionId:l,formMessageId:n}=p();return r.jsx(i.g7,{ref:t,id:a,"aria-describedby":s?`${l} ${n}`:`${l}`,"aria-invalid":!!s,...e})});g.displayName="FormControl";let b=a.forwardRef(({className:e,...t},s)=>{let{formDescriptionId:a}=p();return r.jsx("p",{ref:s,id:a,className:(0,n.cn)("text-sm text-muted-foreground",e),...t})});b.displayName="FormDescription";let v=a.forwardRef(({className:e,children:t,...s},a)=>{let{error:i,formMessageId:l}=p(),d=i?String(i?.message):t;return d?r.jsx("p",{ref:a,id:l,className:(0,n.cn)("text-sm font-medium text-destructive",e),...s,children:d}):null});v.displayName="FormMessage"},82015:(e,t,s)=>{s.d(t,{g:()=>l});var r=s(10326),a=s(17577),i=s(51223);let l=a.forwardRef(({className:e,...t},s)=>r.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));l.displayName="Textarea"},48453:(e,t,s)=>{var r=s(71922);class a{async getAllTopics(){return(await r.Z.get("/topics")).data}async getTopicById(e){return(await r.Z.get(`/topics/${e}`)).data}async createTopic(e){return(await r.Z.post("/topics",e)).data}async updateTopic(e,t){return(await r.Z.put(`/topics/${e}`,t)).data}async deleteTopic(e,t){return(await r.Z.delete(`/topics/${e}`,{data:{version:t}})).data}}new a}};