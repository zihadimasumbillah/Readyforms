"use strict";exports.id=548,exports.ids=[548],exports.modules={7188:(e,t,s)=>{s.d(t,{O:()=>k});var r=s(326),a=s(7577),i=s(1664),n=s(1190),o=s(2015),c=s(4794),l=s(3635),d=s(2933),u=s(1223);let m=a.forwardRef(({className:e,...t},s)=>r.jsx(l.fC,{ref:s,className:(0,u.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(l.z$,{className:(0,u.cn)("flex items-center justify-center text-current"),children:r.jsx(d.Z,{className:"h-4 w-4"})})}));m.displayName=l.fC.displayName;var p=s(9752),x=s(1959);let h=a.forwardRef(({className:e,...t},s)=>r.jsx(x.fC,{className:(0,u.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:r.jsx(x.bU,{className:(0,u.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));h.displayName=x.fC.displayName;var g=s(7197),f=s(2616),b=s(5480);function j({id:e,question:t}){let{attributes:s,listeners:a,setNodeRef:i,transform:n,transition:o,isDragging:c}=(0,g.nB)({id:e}),l={transform:f.ux.Transform.toString(n),transition:o,opacity:c?.5:1,zIndex:c?1e3:1};return(0,r.jsxs)("div",{ref:i,style:l,className:`flex items-center p-3 rounded-md border ${c?"border-primary":"border-border"} bg-background`,children:[(0,r.jsxs)("button",{type:"button",className:"cursor-grab active:cursor-grabbing p-1 rounded-sm hover:bg-muted mr-3",...s,...a,children:[r.jsx(b.Z,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"sr-only",children:"Drag to reorder"})]}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("div",{className:"flex-1 text-sm truncate",children:t}),r.jsx("div",{className:"text-xs text-muted-foreground",children:e.startsWith("customString")?"Short Text":e.startsWith("customText")?"Long Text":e.startsWith("customInt")?"Number":e.startsWith("customCheckbox")?"Yes/No":"Question"})]})]})}var y=s(815),v=s(7432),S=s(9447),N=s(4019),w=s(3685);function k({topics:e,initialData:t,handleSave:s,handleCancel:l,isSubmitting:d=!1,onSubmit:u,isEditMode:x=!1,submitButtonLabel:f="Save Template"}){let b=u||s,[k,I]=(0,a.useState)({title:"",description:"",topicId:"",isPublic:!0,isQuiz:!1,showScoreImmediately:!1,customString1State:!1,customString1Question:"",customString2State:!1,customString2Question:"",customString3State:!1,customString3Question:"",customString4State:!1,customString4Question:"",customText1State:!1,customText1Question:"",customText2State:!1,customText2Question:"",customText3State:!1,customText3Question:"",customText4State:!1,customText4Question:"",customInt1State:!1,customInt1Question:"",customInt2State:!1,customInt2Question:"",customInt3State:!1,customInt3Question:"",customInt4State:!1,customInt4Question:"",customCheckbox1State:!1,customCheckbox1Question:"",customCheckbox2State:!1,customCheckbox2Question:"",customCheckbox3State:!1,customCheckbox3Question:"",customCheckbox4State:!1,customCheckbox4Question:"",scoringCriteria:{},imageUrl:""}),[C,T]=(0,a.useState)([]),[Q,Z]=(0,a.useState)(null),z=(0,y.Dy)((0,y.VT)(y.we,{activationConstraint:{distance:8}}),(0,y.VT)(y.Lg,{coordinateGetter:g.is})),q=e=>{let{name:t,value:s}=e.target;I(e=>({...e,[t]:s}))},D=(e,t)=>{I(s=>({...s,[e]:t})),t&&!C.includes(e.replace("State",""))&&T(t=>[...t,e.replace("State","")]),t||T(t=>t.filter(t=>t!==e.replace("State","")))},F=async e=>{e.preventDefault();let t={...k,questionOrder:C};await b(t)},{getRootProps:$,getInputProps:E}=(0,S.uI)({accept:{"image/*":[".jpeg",".jpg",".png",".gif"]},maxFiles:1,onDrop:e=>{if(e.length>0){let t=e[0],s=new FileReader;s.onload=()=>{let e=s.result;Z(e),I(t=>({...t,imageUrl:e}))},s.readAsDataURL(t)}}});return(0,r.jsxs)("form",{onSubmit:F,className:"space-y-8",children:[(0,r.jsxs)(p.Zb,{children:[r.jsx(p.Ol,{children:r.jsx(p.ll,{children:"Basic Information"})}),(0,r.jsxs)(p.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(c._,{htmlFor:"title",children:["Title ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(n.I,{id:"title",name:"title",value:k.title,onChange:q,required:!0,placeholder:"Enter a title for your form"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{htmlFor:"description",children:"Description"}),r.jsx(o.g,{id:"description",name:"description",value:k.description||"",onChange:q,placeholder:"Enter a description for your form",rows:3})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{children:"Template Image (Optional)"}),Q?(0,r.jsxs)("div",{className:"relative overflow-hidden rounded-md border border-border",children:[r.jsx("img",{src:Q,alt:"Template preview",className:"max-h-40 w-full object-cover"}),r.jsx(i.z,{type:"button",size:"icon",variant:"destructive",className:"absolute top-2 right-2",onClick:()=>{Z(null),I(e=>({...e,imageUrl:""}))},children:r.jsx(N.Z,{className:"h-4 w-4"})})]}):(0,r.jsxs)("div",{...$(),className:"border-2 border-dashed border-border rounded-md p-6 hover:bg-accent/50 transition-colors cursor-pointer text-center",children:[r.jsx("input",{...E()}),r.jsx(w.Z,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop an image here, or click to select one"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(c._,{htmlFor:"topicId",children:["Topic ",r.jsx("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{id:"topicId",name:"topicId",value:k.topicId,onChange:q,required:!0,className:"w-full p-2 border rounded-md bg-background",children:[r.jsx("option",{value:"",children:"Select a topic"}),e.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-4 pt-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx(c._,{htmlFor:"isPublic",children:"Make this template public"}),r.jsx(h,{id:"isPublic",checked:k.isPublic,onCheckedChange:e=>D("isPublic",e)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(c._,{htmlFor:"isQuiz",children:["This is a quiz or assessment",r.jsx("span",{className:"block text-xs text-muted-foreground",children:"Enable scoring for responses"})]}),r.jsx(h,{id:"isQuiz",checked:k.isQuiz,onCheckedChange:e=>D("isQuiz",e)})]}),k.isQuiz&&(0,r.jsxs)("div",{className:"flex items-center justify-between pl-6",children:[(0,r.jsxs)(c._,{htmlFor:"showScoreImmediately",children:["Show score immediately",r.jsx("span",{className:"block text-xs text-muted-foreground",children:"Display score to users after submission"})]}),r.jsx(h,{id:"showScoreImmediately",checked:k.showScoreImmediately,onCheckedChange:e=>D("showScoreImmediately",e)})]})]})]})]}),(0,r.jsxs)(p.Zb,{children:[r.jsx(p.Ol,{children:r.jsx(p.ll,{children:"Questions"})}),(0,r.jsxs)(p.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Short Text Questions"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(m,{id:"customString1State",checked:k.customString1State,onCheckedChange:e=>D("customString1State",!0===e)}),r.jsx(c._,{htmlFor:"customString1State",className:"font-normal",children:"Short Text Question 1"})]}),k.customString1State&&(0,r.jsxs)("div",{className:"ml-6",children:[r.jsx(n.I,{name:"customString1Question",value:k.customString1Question,onChange:q,placeholder:"Enter your question"}),k.isQuiz&&(0,r.jsxs)("div",{className:"mt-2",children:[r.jsx(c._,{className:"text-xs",children:"Correct answer (for scoring)"}),r.jsx(n.I,{name:"customString1Answer",value:(e=>{let t=k.scoringCriteria[e];return t&&"boolean"!=typeof t.answer?String(t.answer||""):""})("customString1Answer"),onChange:e=>{I(t=>({...t,scoringCriteria:{...t.scoringCriteria,customString1Answer:{answer:e.target.value,points:5}}}))},placeholder:"Enter correct answer",className:"mt-1"})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Question Order"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop questions to reorder them."}),C.length>0?r.jsx(y.LB,{sensors:z,collisionDetection:y.pE,modifiers:[v.DL,v.F4],onDragEnd:e=>{let{active:t,over:s}=e;s&&t.id!==s.id&&T(e=>{let r=e.indexOf(t.id),a=e.indexOf(s.id);return(0,g.Rp)(e,r,a)})},children:r.jsx(g.Fo,{items:C,strategy:g.qw,children:r.jsx("div",{className:"space-y-2",children:C.map(e=>{let t=k[`${e}Question`]||e;return r.jsx(j,{id:e,question:"string"==typeof t?t:String(e)},e)})})})}):r.jsx("div",{className:"text-center p-4 border border-dashed rounded-md text-muted-foreground",children:"No questions have been enabled. Enable questions above to arrange their order."})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[r.jsx(i.z,{type:"button",variant:"outline",onClick:l,children:"Cancel"}),r.jsx(i.z,{type:"submit",disabled:d,children:d?"Saving...":f})]})]})}},1190:(e,t,s)=>{s.d(t,{I:()=>n});var r=s(326),a=s(7577),i=s(1223);let n=a.forwardRef(({className:e,type:t,...s},a)=>r.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));n.displayName="Input"},4794:(e,t,s)=>{s.d(t,{_:()=>l});var r=s(326),a=s(7577),i=s(4478),n=s(9360),o=s(1223);let c=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=a.forwardRef(({className:e,...t},s)=>r.jsx(i.f,{ref:s,className:(0,o.cn)(c(),e),...t}));l.displayName=i.f.displayName},2015:(e,t,s)=>{s.d(t,{g:()=>n});var r=s(326),a=s(7577),i=s(1223);let n=a.forwardRef(({className:e,...t},s)=>r.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));n.displayName="Textarea"},3042:(e,t,s)=>{s.d(t,{t:()=>a});var r=s(1922);let a={async getAllTemplates(e){try{let t=new URLSearchParams;e?.query&&t.append("query",e.query),e?.tag&&t.append("tag",e.tag),e?.topicId&&t.append("topicId",e.topicId),e?.limit&&t.append("limit",e.limit.toString()),e?.page&&t.append("page",e.page.toString()),e?.sort&&t.append("sort",e.sort);let s=t.toString(),a=s?`/templates/search?${s}`:"/templates";return(await r.Z.get(a)).data}catch(e){return console.error("Error fetching templates:",e),[]}},getTemplateById:async e=>(await r.Z.get(`/templates/${e}`)).data,async getById(e){return this.getTemplateById(e)},createTemplate:async e=>(await r.Z.post("/templates",e)).data,updateTemplate:async(e,t,s)=>(await r.Z.put(`/templates/${e}`,{...t,version:s})).data,async deleteTemplate(e,t){await r.Z.delete(`/templates/${e}`,{data:{version:t}})},async searchTemplates(e,t){try{let s=new URLSearchParams({query:e});return t?.tag&&s.append("tag",t.tag),t?.topicId&&s.append("topicId",t.topicId),t?.limit&&s.append("limit",t.limit.toString()),t?.page&&s.append("page",t.page.toString()),t?.sort&&s.append("sort",t.sort),(await r.Z.get(`/templates/search?${s}`)).data}catch(e){return console.error("Error searching templates:",e),[]}}}},8453:(e,t,s)=>{var r=s(1922);class a{async getAllTopics(){return(await r.Z.get("/topics")).data}async getTopicById(e){return(await r.Z.get(`/topics/${e}`)).data}async createTopic(e){return(await r.Z.post("/topics",e)).data}async updateTopic(e,t){return(await r.Z.put(`/topics/${e}`,t)).data}async deleteTopic(e,t){return(await r.Z.delete(`/topics/${e}`,{data:{version:t}})).data}}new a}};