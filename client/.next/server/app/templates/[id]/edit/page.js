(()=>{var e={};e.id=812,e.ids=[812],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},2170:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>c,pages:()=>p,routeModule:()=>m,tree:()=>d}),s(6052),s(9193),s(5866);var r=s(3191),i=s(8716),a=s(7922),l=s.n(a),n=s(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["templates",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6052)),"/Users/masumbillahzihadi/PROJECTS/itransition/PROJECTS/ReadyForms/ReadyForms/client/src/app/templates/[id]/edit/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9193)),"/Users/masumbillahzihadi/PROJECTS/itransition/PROJECTS/ReadyForms/ReadyForms/client/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],p=["/Users/masumbillahzihadi/PROJECTS/itransition/PROJECTS/ReadyForms/ReadyForms/client/src/app/templates/[id]/edit/page.tsx"],c="/templates/[id]/edit/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/templates/[id]/edit/page",pathname:"/templates/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2540:(e,t,s)=>{Promise.resolve().then(s.bind(s,866))},866:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(326),i=s(7577),a=s(5047),l=s(3053),n=s(3042),o=s(1664),d=s(6627);let p=(0,s(6557).Z)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);function c(){let{id:e}=(0,a.useParams)(),t=(0,a.useRouter)(),{user:s}=(0,l.a)()||{},[c,u]=(0,i.useState)(null),[m,x]=(0,i.useState)(!0),[h,y]=(0,i.useState)(!1),[g,v]=(0,i.useState)(0),[f,b]=(0,i.useState)({title:"",description:"",isPublic:!0,topicId:"",tags:[]}),j=()=>({title:f.title,description:f.description,isPublic:f.isPublic,topicId:f.topicId,tags:f.tags,isQuiz:f.isQuiz,showScoreImmediately:f.showScoreImmediately,scoringCriteria:f.scoringCriteria,questionOrder:f.questionOrder,version:g,...Object.entries(f).filter(([e])=>e.startsWith("custom")&&(e.endsWith("State")||e.endsWith("Question"))).reduce((e,[t,s])=>({...e,[t]:s}),{})}),P=async s=>{if(s.preventDefault(),!f.title||!f.title.trim()){(0,d.Am)({title:"Error",description:"Template title is required",variant:"destructive"});return}if(!f.topicId){(0,d.Am)({title:"Error",description:"Please select a topic",variant:"destructive"});return}try{y(!0);let s=j();await n.t.updateTemplate(e,s),(0,d.Am)({title:"Success",description:"Template updated successfully."}),t.push(`/templates/${e}`)}catch(e){console.error("Failed to update template:",e),e.response&&409===e.response.status?(0,d.Am)({title:"Edit Conflict",description:"Someone else has modified this template. Please refresh and try again.",variant:"destructive"}):(0,d.Am)({title:"Error",description:e.response?.data?.message||"Failed to update template. Please try again.",variant:"destructive"})}finally{y(!1)}},q=(e,t)=>{b(s=>({...s,[e]:t}))};return m?(0,r.jsxs)("div",{className:"flex justify-center items-center h-screen",children:[r.jsx(p,{className:"h-8 w-8 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Loading template..."})]}):c?(0,r.jsxs)("div",{className:"container py-8 max-w-4xl",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Edit Template"}),(0,r.jsxs)("form",{onSubmit:P,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"title",className:"block text-sm font-medium mb-1",children:"Title"}),r.jsx("input",{id:"title",type:"text",value:f.title,onChange:e=>q("title",e.target.value),className:"w-full p-2 border rounded",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium mb-1",children:"Description"}),r.jsx("textarea",{id:"description",value:f.description,onChange:e=>q("description",e.target.value),className:"w-full p-2 border rounded",rows:3})]})]}),(0,r.jsxs)("div",{className:"flex gap-4 justify-end",children:[r.jsx(o.z,{type:"button",variant:"outline",onClick:()=>t.push(`/templates/${e}`),children:"Cancel"}),r.jsx(o.z,{type:"submit",disabled:h,children:h?(0,r.jsxs)(r.Fragment,{children:[r.jsx(p,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Template"})]})]})]}):r.jsx("div",{className:"container py-8 max-w-4xl",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Template Not Found"}),r.jsx("p",{className:"mb-4",children:"The template you're looking for doesn't exist or you don't have permission to edit it."}),r.jsx(o.z,{onClick:()=>t.push("/templates"),children:"Back to Templates"})]})})}},3042:(e,t,s)=>{"use strict";s.d(t,{t:()=>i});var r=s(1922);let i={async getAllTemplates(e){try{let t=new URLSearchParams;e?.query&&t.append("query",e.query),e?.tag&&t.append("tag",e.tag),e?.topicId&&t.append("topicId",e.topicId),e?.limit&&t.append("limit",e.limit.toString()),e?.page&&t.append("page",e.page.toString()),e?.sort&&t.append("sort",e.sort);let s=t.toString(),i=s?`/templates/search?${s}`:"/templates";return(await r.Z.get(i)).data}catch(e){return console.error("Error fetching templates:",e),[]}},getTemplateById:async e=>(await r.Z.get(`/templates/${e}`)).data,async getById(e){return this.getTemplateById(e)},createTemplate:async e=>(await r.Z.post("/templates",e)).data,updateTemplate:async(e,t)=>(await r.Z.put(`/templates/${e}`,t)).data,async deleteTemplate(e,t){await r.Z.delete(`/templates/${e}`,{data:{version:t}})},async searchTemplates(e,t){try{let s=new URLSearchParams({query:e});return t?.tag&&s.append("tag",t.tag),t?.topicId&&s.append("topicId",t.topicId),t?.limit&&s.append("limit",t.limit.toString()),t?.page&&s.append("page",t.page.toString()),t?.sort&&s.append("sort",t.sort),(await r.Z.get(`/templates/search?${s}`)).data}catch(e){return console.error("Error searching templates:",e),[]}}}},6052:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/masumbillahzihadi/PROJECTS/itransition/PROJECTS/ReadyForms/ReadyForms/client/src/app/templates/[id]/edit/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[555,281],()=>s(2170));module.exports=r})();