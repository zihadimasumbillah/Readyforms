(()=>{var e={};e.id=72,e.ids=[72],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},828:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o}),s(3734),s(9193),s(5866);var r=s(3191),a=s(8716),i=s(7922),l=s.n(i),n=s(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let o=["",{children:["templates",{children:["[id]",{children:["responses",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3734)),"/Users/masumbillahzihadi/PROJECTS/itransition/PROJECTS/ReadyForms/ReadyForms/client/src/app/templates/[id]/responses/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9193)),"/Users/masumbillahzihadi/PROJECTS/itransition/PROJECTS/ReadyForms/ReadyForms/client/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/masumbillahzihadi/PROJECTS/itransition/PROJECTS/ReadyForms/ReadyForms/client/src/app/templates/[id]/responses/page.tsx"],m="/templates/[id]/responses/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/templates/[id]/responses/page",pathname:"/templates/[id]/responses",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},5964:(e,t,s)=>{Promise.resolve().then(s.bind(s,6977))},1890:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},1540:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},4061:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},6977:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(326),a=s(7577),i=s(9906),l=s(9752),n=s(1664);s(3042),s(1922);var d=s(8227),o=s(1890);let c=(0,s(6557).Z)("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);var m=s(1540),p=s(4061),u=s(5047),x=s(3053);s(6627);var h=s(3819),g=s(434);function f({params:e}){let[t,s]=(0,a.useState)(!0),[f,j]=(0,a.useState)(null),[y,v]=(0,a.useState)([]),[b,N]=(0,a.useState)(null),R=(0,u.useRouter)(),w=(0,x.a)(),S=w?.user,P=e.id;function A(e){return e?new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}return S?(0,r.jsxs)(i.c,{user:{name:S.name,email:S.email,isAdmin:S.isAdmin},onLogout:()=>{w?.logout(),R.push("/auth/login")},children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)(n.z,{variant:"ghost",size:"sm",onClick:()=>R.push(`/templates/${P}`),children:[r.jsx(o.Z,{className:"mr-2 h-4 w-4"}),"Back to Template"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(n.z,{variant:"outline",size:"sm",onClick:()=>R.push(`/templates/${P}/statistics`),children:[r.jsx(c,{className:"mr-2 h-4 w-4"}),"Statistics"]}),(0,r.jsxs)(n.z,{variant:"outline",size:"sm",onClick:function(){if(!y.length)return;let e=new Set;y.forEach(t=>{Object.keys(t).forEach(t=>{["id","templateId","userId","createdAt","updatedAt","template","user"].includes(t)||e.add(t)})});let t=["ID","Submitted By","Submission Date",...Array.from(e)],s=y.map(t=>{let s=[t.id,t.user?.name||"Anonymous",A(t.createdAt)];return Array.from(e).forEach(e=>{let r=t[e];s.push(void 0!==r?r:"")}),s}),r=new Blob([[t.join(","),...s.map(e=>e.map(e=>`"${e}"`).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(r),i=document.createElement("a");i.setAttribute("href",a),i.setAttribute("download",`${f?.title||"template"}-responses.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)},disabled:!y.length,children:[r.jsx(m.Z,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]})]}),t?r.jsx(d.O,{className:"h-8 w-2/3"}):(0,r.jsxs)("h1",{className:"text-2xl font-bold",children:["Responses: ",f?.title]})]}),(0,r.jsxs)(l.Zb,{className:"mb-6",children:[r.jsx(l.Ol,{children:r.jsx("div",{className:"flex justify-between items-center",children:r.jsx(l.ll,{className:"text-xl",children:"Response Summary"})})}),r.jsx(l.aY,{children:t?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[void 0,void 0,void 0].map((e,t)=>r.jsx(d.O,{className:"h-24 w-full"},t))}):(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"bg-muted/50 p-4 rounded-md",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Responses"}),r.jsx("div",{className:"text-2xl font-bold",children:y.length})]}),f?.isQuiz&&(0,r.jsxs)("div",{className:"bg-muted/50 p-4 rounded-md",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Average Score"}),r.jsx("div",{className:"text-2xl font-bold",children:b?.avg_score?`${Math.round(10*b.avg_score)/10}/${Math.round(b.avg_total_points)}`:"N/A"})]}),(0,r.jsxs)("div",{className:"bg-muted/50 p-4 rounded-md",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Latest Response"}),r.jsx("div",{className:"text-lg font-medium",children:y.length>0?A(y[0].createdAt):"No responses yet"})]})]})})]}),(0,r.jsxs)(l.Zb,{children:[r.jsx(l.Ol,{children:(0,r.jsxs)(l.ll,{className:"flex items-center",children:[r.jsx(p.Z,{className:"h-5 w-5 mr-2"}),"All Responses"]})}),r.jsx(l.aY,{children:t?r.jsx("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>r.jsx(d.O,{className:"h-12 w-full"},t))}):y.length>0?(0,r.jsxs)(h.iA,{children:[r.jsx(h.Rn,{children:"A list of all responses for this template."}),r.jsx(h.xD,{children:(0,r.jsxs)(h.SC,{children:[r.jsx(h.ss,{children:"Respondent"}),r.jsx(h.ss,{children:"Date Submitted"}),f?.isQuiz&&r.jsx(h.ss,{children:"Score"}),r.jsx(h.ss,{className:"text-right",children:"Actions"})]})}),r.jsx(h.RM,{children:y.map(e=>(0,r.jsxs)(h.SC,{children:[r.jsx(h.pj,{className:"font-medium",children:e.user?.name||"Anonymous"}),r.jsx(h.pj,{children:A(e.createdAt)}),f?.isQuiz&&r.jsx(h.pj,{children:void 0!==e.score&&void 0!==e.totalPossiblePoints?(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:"font-medium",children:[e.score,"/",e.totalPossiblePoints]}),(0,r.jsxs)("span",{className:"ml-2 text-sm text-muted-foreground",children:["(",Math.round(e.score/e.totalPossiblePoints*100),"%)"]})]}):"N/A"}),r.jsx(h.pj,{className:"text-right",children:r.jsx(n.z,{asChild:!0,variant:"outline",size:"sm",children:r.jsx(g.default,{href:`/templates/${P}/responses/${e.id}`,children:"View Details"})})})]},e.id))})]}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[r.jsx(p.Z,{className:"h-16 w-16 text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-medium",children:"No responses yet"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"There are no responses to this template yet."})]})})]})]}):r.jsx("div",{children:"Loading..."})}},8227:(e,t,s)=>{"use strict";s.d(t,{O:()=>i});var r=s(326),a=s(1223);function i({className:e,...t}){return r.jsx("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...t})}},3819:(e,t,s)=>{"use strict";s.d(t,{RM:()=>d,Rn:()=>p,SC:()=>o,iA:()=>l,pj:()=>m,ss:()=>c,xD:()=>n});var r=s(326),a=s(7577),i=s(1223);let l=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{className:"w-full overflow-auto",children:r.jsx("table",{ref:s,className:(0,i.cn)("w-full caption-bottom text-sm",e),...t})}));l.displayName="Table";let n=a.forwardRef(({className:e,...t},s)=>r.jsx("thead",{ref:s,className:(0,i.cn)("[&_tr]:border-b",e),...t}));n.displayName="TableHeader";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("tbody",{ref:s,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...t}));d.displayName="TableBody",a.forwardRef(({className:e,...t},s)=>r.jsx("tfoot",{ref:s,className:(0,i.cn)("bg-primary font-medium text-primary-foreground",e),...t})).displayName="TableFooter";let o=a.forwardRef(({className:e,...t},s)=>r.jsx("tr",{ref:s,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));o.displayName="TableRow";let c=a.forwardRef(({className:e,...t},s)=>r.jsx("th",{ref:s,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let m=a.forwardRef(({className:e,...t},s)=>r.jsx("td",{ref:s,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));m.displayName="TableCell";let p=a.forwardRef(({className:e,...t},s)=>r.jsx("caption",{ref:s,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...t}));p.displayName="TableCaption"},3042:(e,t,s)=>{"use strict";s.d(t,{t:()=>a});var r=s(1922);let a={async getAllTemplates(e){try{let t=new URLSearchParams;e?.query&&t.append("query",e.query),e?.tag&&t.append("tag",e.tag),e?.topicId&&t.append("topicId",e.topicId),e?.limit&&t.append("limit",e.limit.toString()),e?.page&&t.append("page",e.page.toString()),e?.sort&&t.append("sort",e.sort);let s=t.toString(),a=s?`/templates/search?${s}`:"/templates";return(await r.Z.get(a)).data}catch(e){return console.error("Error fetching templates:",e),[]}},getTemplateById:async e=>(await r.Z.get(`/templates/${e}`)).data,async getById(e){return this.getTemplateById(e)},createTemplate:async e=>(await r.Z.post("/templates",e)).data,updateTemplate:async(e,t)=>(await r.Z.put(`/templates/${e}`,t)).data,async deleteTemplate(e,t){await r.Z.delete(`/templates/${e}`,{data:{version:t}})},async searchTemplates(e,t){try{let s=new URLSearchParams({query:e});return t?.tag&&s.append("tag",t.tag),t?.topicId&&s.append("topicId",t.topicId),t?.limit&&s.append("limit",t.limit.toString()),t?.page&&s.append("page",t.page.toString()),t?.sort&&s.append("sort",t.sort),(await r.Z.get(`/templates/search?${s}`)).data}catch(e){return console.error("Error searching templates:",e),[]}}}},3734:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/masumbillahzihadi/PROJECTS/itransition/PROJECTS/ReadyForms/ReadyForms/client/src/app/templates/[id]/responses/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[555,236,281,497],()=>s(828));module.exports=r})();