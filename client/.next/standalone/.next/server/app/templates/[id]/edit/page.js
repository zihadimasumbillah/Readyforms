(()=>{var e={};e.id=812,e.ids=[812],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},72545:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>c}),r(76052),r(85375),r(35866);var s=r(23191),a=r(88716),i=r(37922),l=r.n(i),n=r(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let c=["",{children:["templates",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,76052)),"/Users/masumbillahzihadi/PROJECTS/itransition/PROJECTS/ReadyForms/ReadyForms/client/src/app/templates/[id]/edit/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85375)),"/Users/masumbillahzihadi/PROJECTS/itransition/PROJECTS/ReadyForms/ReadyForms/client/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/masumbillahzihadi/PROJECTS/itransition/PROJECTS/ReadyForms/ReadyForms/client/src/app/templates/[id]/edit/page.tsx"],p="/templates/[id]/edit/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/templates/[id]/edit/page",pathname:"/templates/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},62540:(e,t,r)=>{Promise.resolve().then(r.bind(r,10866))},10866:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(10326),a=r(17577),i=r(35047),l=r(3053),n=r(23042),o=r(91664),c=r(56627);let d=(0,r(76557).Z)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);function p(){let e=(0,i.useParams)(),t=e?e.id:"",r=(0,i.useRouter)(),{user:p}=(0,l.a)()||{},[u,m]=(0,a.useState)(null),[x,h]=(0,a.useState)(!0),[y,g]=(0,a.useState)(!1),[f,v]=(0,a.useState)(0),[b,j]=(0,a.useState)({title:"",description:"",isPublic:!0,topicId:"",tags:[]}),P=()=>({title:b.title,description:b.description,isPublic:b.isPublic,topicId:b.topicId,tags:b.tags,isQuiz:b.isQuiz,showScoreImmediately:b.showScoreImmediately,scoringCriteria:b.scoringCriteria,questionOrder:b.questionOrder,version:f,...Object.entries(b).filter(([e])=>e.startsWith("custom")&&(e.endsWith("State")||e.endsWith("Question"))).reduce((e,[t,r])=>({...e,[t]:r}),{})}),T=async e=>{if(e.preventDefault(),!b.title||!b.title.trim()){(0,c.Am)({title:"Error",description:"Template title is required",variant:"destructive"});return}if(!b.topicId){(0,c.Am)({title:"Error",description:"Please select a topic",variant:"destructive"});return}try{g(!0);let e=P();await n.t.updateTemplate(t,e),(0,c.Am)({title:"Success",description:"Template updated successfully."}),r.push(`/templates/${t}`)}catch(e){console.error("Failed to update template:",e),e.response&&409===e.response.status?(0,c.Am)({title:"Edit Conflict",description:"Someone else has modified this template. Please refresh and try again.",variant:"destructive"}):(0,c.Am)({title:"Error",description:e.response?.data?.message||"Failed to update template. Please try again.",variant:"destructive"})}finally{g(!1)}},q=(e,t)=>{j(r=>({...r,[e]:t}))};return x?(0,s.jsxs)("div",{className:"flex justify-center items-center h-screen",children:[s.jsx(d,{className:"h-8 w-8 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading template..."})]}):u?(0,s.jsxs)("div",{className:"container py-8 max-w-4xl",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Edit Template"}),(0,s.jsxs)("form",{onSubmit:T,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"title",className:"block text-sm font-medium mb-1",children:"Title"}),s.jsx("input",{id:"title",type:"text",value:b.title,onChange:e=>q("title",e.target.value),className:"w-full p-2 border rounded",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium mb-1",children:"Description"}),s.jsx("textarea",{id:"description",value:b.description,onChange:e=>q("description",e.target.value),className:"w-full p-2 border rounded",rows:3})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 justify-end",children:[s.jsx(o.z,{type:"button",variant:"outline",onClick:()=>r.push(`/templates/${t}`),children:"Cancel"}),s.jsx(o.z,{type:"submit",disabled:y,children:y?(0,s.jsxs)(s.Fragment,{children:[s.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Template"})]})]})]}):s.jsx("div",{className:"container py-8 max-w-4xl",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Template Not Found"}),s.jsx("p",{className:"mb-4",children:"The template you're looking for doesn't exist or you don't have permission to edit it."}),s.jsx(o.z,{onClick:()=>r.push("/templates"),children:"Back to Templates"})]})})}},23042:(e,t,r)=>{"use strict";r.d(t,{t:()=>a});var s=r(89246);let a={async getTemplates(e){try{return(await s.Z.get("/templates",{params:e})).data}catch(e){return console.error("Error fetching templates:",e),[]}},async getTemplateById(e){try{return(await s.Z.get(`/templates/${e}`)).data}catch(t){return console.error(`Error fetching template ${e}:`,t),null}},async searchTemplates(e,t){try{let r={query:e,limit:t?.limit||10,page:t?.page||1,topicId:t?.topicId,tag:t?.tag,sort:t?.sort||"newest"};return(await s.Z.get("/templates/search",{params:r})).data}catch(e){return console.error("Error searching templates:",e),[]}},async getFeaturedTemplates(e=6){try{return(await s.Z.get("/templates",{params:{limit:e,page:1}})).data}catch(e){return console.error("Error fetching featured templates:",e),[]}},async getTemplatesByTopic(e,t){try{return(await s.Z.get("/templates/search",{params:{topicId:e,limit:t?.limit||10,page:t?.page||1}})).data}catch(t){return console.error(`Error fetching templates for topic ${e}:`,t),[]}},async deleteTemplate(e,t){try{return await s.Z.delete(`/templates/${e}`,{data:{version:t}}),!0}catch(t){throw console.error(`Error deleting template ${e}:`,t),t}},async createTemplate(e){try{return(await s.Z.post("/templates",e)).data}catch(e){throw console.error("Error creating template:",e),e}},async updateTemplate(e,t){try{return(await s.Z.put(`/templates/${e}`,t)).data.template}catch(t){throw console.error(`Error updating template ${e}:`,t),t}}}},76052:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/Users/masumbillahzihadi/PROJECTS/itransition/PROJECTS/ReadyForms/ReadyForms/client/src/app/templates/[id]/edit/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[885,69],()=>r(72545));module.exports=s})();