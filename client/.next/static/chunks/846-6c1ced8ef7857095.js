"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[846],{6858:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},8997:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},3417:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},2287:function(e,t,a){a.d(t,{k:function(){return j}});var r=a(7437),s=a(2265),n=a(9820),l=a(9174),i=a(2381),c=a(8997),o=a(3417),d=a(6858),u=a(7648),m=a(1814),f=a(4467),p=a(4881);function h(e){let{template:t}=e,[a,h]=(0,s.useState)(t.likesCount||0),[x,g]=(0,s.useState)(0),[v,y]=(0,s.useState)(!1),w=(0,p.a)(),j=null==w?void 0:w.user;return(0,s.useEffect)(()=>{(async()=>{try{if(void 0===t.likesCount){let e=await m.h.getLikeCount(t.id);h(e||0)}else h(t.likesCount);if(j){let e=await m.h.checkLike(t.id);y(e)}let e=await f.a.getCommentsByTemplate(t.id);g(e.length)}catch(e){console.error("Error fetching template interactions:",e)}})()},[t.id,t.likesCount,j]),(0,r.jsxs)(n.Zb,{className:"h-full flex flex-col",children:[(0,r.jsx)(n.Ol,{className:"pb-3",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(n.ll,{className:"text-lg hover:text-primary transition-colors",children:(0,r.jsx)(u.default,{href:"/templates/".concat(t.id),className:"hover:underline",children:t.title})}),(0,r.jsx)(n.SZ,{className:"line-clamp-2 mt-1",children:t.description||"No description provided"})]}),t.isQuiz&&(0,r.jsx)(l.C,{children:"Quiz"})]})}),(0,r.jsxs)(n.aY,{className:"flex-grow",children:[t.imageUrl&&(0,r.jsx)("div",{className:"mb-3 rounded-md overflow-hidden",children:(0,r.jsx)("img",{src:t.imageUrl,alt:t.title,className:"w-full h-32 object-cover"})}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 my-2",children:[t.topic&&(0,r.jsx)(l.C,{variant:"outline",className:"bg-muted/50",children:t.topic.name}),t.tags&&t.tags.map(e=>(0,r.jsx)(l.C,{variant:"secondary",className:"bg-primary/10",children:e.name},e.id||e.name))]})]}),(0,r.jsxs)(n.eW,{className:"pt-4 flex items-center justify-between border-t",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-muted-foreground",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(c.Z,{className:"h-4 w-4 mr-1 ".concat(v?"fill-red-500 text-red-500":"")}),a]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4 mr-1"}),x]}),(0,r.jsx)("div",{children:(e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(t)})(t.createdAt)})]}),(0,r.jsx)(i.z,{size:"sm",variant:"ghost",asChild:!0,children:(0,r.jsxs)(u.default,{href:"/templates/".concat(t.id),children:["View ",(0,r.jsx)(d.Z,{className:"ml-1 h-3 w-3"})]})})]})]})}var x=a(279),g=a(9140),v=a(3247),y=a(740),w=a(5291);function j(e){var t;let{templates:a=[],topics:n=[],loading:c=!1,requireAuth:o=!1}=e,[d,u]=(0,s.useState)(""),[m,f]=(0,s.useState)("all"),[p,j]=(0,s.useState)(a);return(0,s.useEffect)(()=>{if(!a||0===a.length){j([]);return}let e=[...a];if(d){let t=d.toLowerCase();e=e.filter(e=>{var a,r;return((null===(a=e.title)||void 0===a?void 0:a.toLowerCase())||"").includes(t)||((null===(r=e.description)||void 0===r?void 0:r.toLowerCase())||"").includes(t)})}m&&"all"!==m&&(e=e.filter(e=>e.topicId===m)),j(e)},[a,d,m]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(v.Z,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(x.I,{type:"search",placeholder:"Search templates...",className:"pl-8",value:d,onChange:e=>{u(e.target.value)}})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(y.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsxs)(w.Ph,{value:m,onValueChange:e=>{f(e)},children:[(0,r.jsx)(w.i4,{className:"w-[180px]",children:(0,r.jsx)(w.ki,{placeholder:"Select topic"})}),(0,r.jsxs)(w.Bw,{children:[(0,r.jsx)(w.Ql,{value:"all",children:"All Topics"}),n&&n.map(e=>(0,r.jsx)(w.Ql,{value:e.id,children:e.name},e.id))]})]})]})]}),(d||"all"!==m)&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[d&&(0,r.jsxs)(l.C,{variant:"secondary",className:"flex items-center gap-1",children:["Search: ",d,(0,r.jsxs)("button",{className:"ml-1 rounded-full hover:bg-muted-foreground/20",onClick:()=>u(""),children:[(0,r.jsx)("span",{className:"sr-only",children:"Remove"}),(0,r.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",children:(0,r.jsx)("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor"})})]})]}),"all"!==m&&(0,r.jsxs)(l.C,{variant:"secondary",className:"flex items-center gap-1",children:["Topic: ",(null==n?void 0:null===(t=n.find(e=>e.id===m))||void 0===t?void 0:t.name)||"Unknown",(0,r.jsxs)("button",{className:"ml-1 rounded-full hover:bg-muted-foreground/20",onClick:()=>f("all"),children:[(0,r.jsx)("span",{className:"sr-only",children:"Remove"}),(0,r.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",children:(0,r.jsx)("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor"})})]})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c?Array.from({length:6}).map((e,t)=>(0,r.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,r.jsx)(g.O,{className:"h-[200px] w-full rounded-lg"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(g.O,{className:"h-4 w-[250px]"}),(0,r.jsx)(g.O,{className:"h-4 w-[200px]"})]}),(0,r.jsxs)("div",{className:"flex justify-between pt-2",children:[(0,r.jsx)(g.O,{className:"h-8 w-20"}),(0,r.jsx)(g.O,{className:"h-8 w-20"})]})]},"skeleton-".concat(t))):p&&p.length>0?p.map(e=>(0,r.jsx)(h,{template:e},e.id)):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,r.jsx)("div",{className:"rounded-full bg-muted p-3 mb-4",children:(0,r.jsx)(v.Z,{className:"h-6 w-6 text-muted-foreground"})}),(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"No templates found"}),(0,r.jsx)("p",{className:"text-muted-foreground max-w-sm mb-4",children:d||"all"!==m?"No templates match your current filters. Try adjusting your search.":"There are no templates available right now. Check back later."}),(d||"all"!==m)&&(0,r.jsx)(i.z,{onClick:()=>{u(""),f("all")},variant:"outline",children:"Clear filters"})]})})]})}},9174:function(e,t,a){a.d(t,{C:function(){return i}});var r=a(7437);a(2265);var s=a(535),n=a(3448);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:a}),t),...s})}},9820:function(e,t,a){a.d(t,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return l},aY:function(){return d},eW:function(){return u},ll:function(){return c}});var r=a(7437),s=a(2265),n=a(3448);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});c.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});o.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},279:function(e,t,a){a.d(t,{I:function(){return l}});var r=a(7437),s=a(2265),n=a(3448);let l=s.forwardRef((e,t)=>{let{className:a,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});l.displayName="Input"},5291:function(e,t,a){a.d(t,{Bw:function(){return h},Ph:function(){return d},Ql:function(){return x},i4:function(){return m},ki:function(){return u}});var r=a(7437),s=a(2265),n=a(3402),l=a(875),i=a(2135),c=a(401),o=a(3448);let d=n.fC;n.ZA;let u=n.B4,m=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(n.xz,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[s,(0,r.jsx)(n.JO,{asChild:!0,children:(0,r.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.u_,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})});f.displayName=n.u_.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.$G,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});p.displayName=n.$G.displayName;let h=s.forwardRef((e,t)=>{let{className:a,children:s,position:l="popper",...i}=e;return(0,r.jsx)(n.h_,{children:(0,r.jsxs)(n.VY,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...i,children:[(0,r.jsx)(f,{}),(0,r.jsx)(n.l_,{className:(0,o.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(p,{})]})})});h.displayName=n.VY.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.__,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=n.__.displayName;let x=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(n.ck,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(n.eT,{children:s})]})});x.displayName=n.ck.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.Z0,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=n.Z0.displayName},9140:function(e,t,a){a.d(t,{O:function(){return n}});var r=a(7437),s=a(3448);function n(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",t),...a})}},4467:function(e,t,a){a.d(t,{a:function(){return s}});var r=a(5493);let s={async getCommentsByTemplate(e){try{return(await r.Z.get("/comments/template/".concat(e))).data}catch(e){return console.error("Error fetching comments:",e),[]}},async createComment(e){try{return(await r.Z.post("/comments",e)).data}catch(e){var t;throw console.error("Error creating comment:",e),(null===(t=e.response)||void 0===t?void 0:t.data)||{message:"Failed to create comment"}}},async deleteComment(e,t){try{await r.Z.delete("/comments/".concat(e),{data:{version:t}})}catch(e){var a;throw console.error("Error deleting comment:",e),(null===(a=e.response)||void 0===a?void 0:a.data)||{message:"Failed to delete comment"}}}}},1814:function(e,t,a){a.d(t,{h:function(){return s}});var r=a(5493);let s={async checkLike(e){try{return(await r.Z.get("/likes/check/".concat(e))).data.liked}catch(e){return console.error("Error checking like status:",e),!1}},async getLikeCount(e){try{return(await r.Z.get("/likes/count/".concat(e))).data.count}catch(e){return console.error("Error getting like count:",e),0}},async toggleLike(e){try{if(await this.checkLike(e))return(await r.Z.delete("/likes/template/".concat(e))).data;return(await r.Z.post("/likes/template/".concat(e))).data}catch(e){var t;throw console.error("Error toggling like:",e),(null===(t=e.response)||void 0===t?void 0:t.data)||{message:"Failed to update like status"}}},async getLikesByTemplate(e){try{return(await r.Z.get("/likes/template/".concat(e))).data}catch(e){throw console.error("Error getting likes by template:",e),e}}}},6861:function(e,t,a){a.d(t,{t:function(){return s}});var r=a(5493);let s={async getAllTemplates(e){try{let t=new URLSearchParams;(null==e?void 0:e.query)&&t.append("query",e.query),(null==e?void 0:e.tag)&&t.append("tag",e.tag),(null==e?void 0:e.topicId)&&t.append("topicId",e.topicId),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.sort)&&t.append("sort",e.sort);let a=t.toString();return(await r.Z.get(a?"/templates/search?".concat(a):"/templates")).data}catch(e){return console.error("Error fetching templates:",e),[]}},getTemplateById:async e=>(await r.Z.get("/templates/".concat(e))).data,async getById(e){return this.getTemplateById(e)},createTemplate:async e=>(await r.Z.post("/templates",e)).data,updateTemplate:async(e,t,a)=>(await r.Z.put("/templates/".concat(e),{...t,version:a})).data,async deleteTemplate(e,t){await r.Z.delete("/templates/".concat(e),{data:{version:t}})},async searchTemplates(e,t){try{let a=new URLSearchParams({query:e});return(null==t?void 0:t.tag)&&a.append("tag",t.tag),(null==t?void 0:t.topicId)&&a.append("topicId",t.topicId),(null==t?void 0:t.limit)&&a.append("limit",t.limit.toString()),(null==t?void 0:t.page)&&a.append("page",t.page.toString()),(null==t?void 0:t.sort)&&a.append("sort",t.sort),(await r.Z.get("/templates/search?".concat(a))).data}catch(e){return console.error("Error searching templates:",e),[]}}}},154:function(e,t,a){a.d(t,{wE:function(){return n}});var r=a(5493);class s{async getAllTopics(){return(await r.Z.get("/topics")).data}async getTopicById(e){return(await r.Z.get("/topics/".concat(e))).data}async createTopic(e){return(await r.Z.post("/topics",e)).data}async updateTopic(e,t){return(await r.Z.put("/topics/".concat(e),t)).data}async deleteTopic(e,t){return(await r.Z.delete("/topics/".concat(e),{data:{version:t}})).data}}let n=new s}}]);