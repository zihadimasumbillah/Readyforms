"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[961],{1945:function(e,s,a){a.d(s,{c:function(){return L}});var t=a(7437),n=a(2265),r=a(7648),l=a(9376),i=a(5466),o=a(1715),d=a(8736),c=a(3578),f=a(8293),m=a(2369),u=a(8728),h=a(7692),x=a(2489),g=a(3448),p=a(2381),v=a(6246),j=a(2060),N=a(9547),b=a(9174),w=a(5493);let y={async testConnection(){try{let e=w.Z.defaults.baseURL||"No base URL configured";console.log("Testing connection to API server:",e);let s=Date.now();await w.Z.get("/health/ping");let a=Date.now();return{success:!0,message:"Connection successful (".concat(a-s,"ms)"),baseUrl:e,timestamp:new Date,cors:{status:"ok"}}}catch(t){var e,s;let a=!t.response&&"Network Error"===t.message;return{success:!1,message:t.message||"Connection failed",error:{status:null===(e=t.response)||void 0===e?void 0:e.status,data:null===(s=t.response)||void 0===s?void 0:s.data,message:t.message},baseUrl:w.Z.defaults.baseURL||"No base URL configured",timestamp:new Date,cors:a?{status:"error",message:"This appears to be a CORS error. The server may not be properly configured to allow cross-origin requests."}:void 0}}},async testCorsConfig(){try{let e=await w.Z.get("/health/cors");return{success:!0,message:"CORS configuration is working correctly",data:e.data,timestamp:new Date}}catch(a){var e,s;return{success:!1,message:"CORS configuration test failed",error:{status:null===(e=a.response)||void 0===e?void 0:e.status,data:null===(s=a.response)||void 0===s?void 0:s.data,message:a.message},timestamp:new Date}}},getClientInfo:()=>({apiUrl:w.Z.defaults.baseURL,environment:"production",appName:"ReadyForms",clientHost:window.location.host,cors:{credentials:w.Z.defaults.withCredentials}})};var C=a(2471),k=a(1312);let R=k.zt,Z=k.fC,A=k.xz,z=n.forwardRef((e,s)=>{let{className:a,sideOffset:n=4,...r}=e;return(0,t.jsx)(k.VY,{ref:s,sideOffset:n,className:(0,g.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})});function I(){let[e,s]=(0,n.useState)("loading"),[a,r]=(0,n.useState)("loading");(0,n.useEffect)(()=>{let e=async()=>{try{let e=await y.testConnection();if(s(e.success?"online":"offline"),C.O.isLoggedIn())try{let e=await y.testAuth();r(e.authenticated?"valid":"invalid")}catch(e){r("invalid")}else r("none")}catch(e){s("offline"),r("none")}};e();let a=setInterval(e,6e4);return()=>clearInterval(a)},[]);let l="loading"===e||"loading"===a?{label:"Checking API...",variant:"outline"}:"offline"===e?{label:"API Offline",variant:"destructive"}:"invalid"===a?{label:"Auth Invalid",variant:"secondary"}:{label:"API Online",variant:"default"};return(0,t.jsx)(R,{children:(0,t.jsxs)(Z,{children:[(0,t.jsx)(A,{asChild:!0,children:(0,t.jsx)(b.C,{variant:l.variant,className:"cursor-help mr-2",children:l.label})}),(0,t.jsx)(z,{children:(0,t.jsxs)("p",{children:["API: ","loading"===e?"Checking...":"online"===e?"Connected":"Disconnected",(0,t.jsx)("br",{}),"Auth: ","loading"===a?"Checking...":"valid"===a?"Valid":"invalid"===a?"Invalid":"Not Logged In"]})})]})})}z.displayName=k.VY.displayName;let D=e=>{let{href:s,icon:a,label:n,isActive:l,onClick:i}=e;return(0,t.jsx)(r.default,{href:s,onClick:i,children:(0,t.jsxs)("div",{className:(0,g.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm transition-all",l?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[a,n]})})};function L(e){let{children:s,user:a,onLogout:g}=e,[b,w]=(0,n.useState)(!1),y=(0,l.usePathname)(),C=[{href:"/dashboard",icon:(0,t.jsx)(i.Z,{className:"h-4 w-4"}),label:"Dashboard"},{href:"/dashboard/templates",icon:(0,t.jsx)(o.Z,{className:"h-4 w-4"}),label:"My Templates"},{href:"/dashboard/responses",icon:(0,t.jsx)(d.Z,{className:"h-4 w-4"}),label:"Responses"},...(null==a?void 0:a.isAdmin)?[{href:"/admin",icon:(0,t.jsx)(c.Z,{className:"h-4 w-4"}),label:"Admin"}]:[]],k=()=>w(!1);return(0,t.jsxs)("div",{className:"h-full min-h-screen flex flex-col",children:[(0,t.jsxs)("header",{className:"sticky top-0 z-30 h-16 border-b bg-background flex items-center px-4 md:px-6",children:[(0,t.jsxs)(p.z,{variant:"ghost",size:"icon",className:"mr-2 md:hidden",onClick:()=>w(!b),children:[(0,t.jsx)(f.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Toggle menu"})]}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)(r.default,{href:"/",className:"flex items-center gap-2",children:[(0,t.jsx)(o.Z,{className:"h-6 w-6"}),(0,t.jsx)("span",{className:"text-lg font-semibold",children:"ReadyForms"})]})}),(0,t.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[a.isAdmin&&(0,t.jsx)(I,{}),(0,t.jsx)(N.T,{}),(0,t.jsxs)(j.h_,{children:[(0,t.jsx)(j.$F,{asChild:!0,children:(0,t.jsx)(p.z,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:(0,t.jsxs)(v.qE,{className:"h-8 w-8",children:[(0,t.jsx)(v.F$,{src:"",alt:a.name}),(0,t.jsx)(v.Q5,{children:a.name.split(" ").map(e=>e[0]).join("").toUpperCase()})]})})}),(0,t.jsxs)(j.AW,{className:"w-56",align:"end",forceMount:!0,children:[(0,t.jsx)(j.Ju,{className:"font-normal",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium leading-none",children:a.name}),(0,t.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:a.email})]})}),(0,t.jsx)(j.VD,{}),(0,t.jsx)(j.Xi,{asChild:!0,children:(0,t.jsxs)(r.default,{href:"/profile",children:[(0,t.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Profile"})]})}),(0,t.jsx)(j.Xi,{asChild:!0,children:(0,t.jsxs)(r.default,{href:"/settings",children:[(0,t.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Settings"})]})}),(0,t.jsx)(j.VD,{}),(0,t.jsxs)(j.Xi,{onClick:g,children:[(0,t.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Log out"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex",children:[b&&(0,t.jsxs)("div",{className:"fixed inset-0 z-40 lg:hidden",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50",onClick:k}),(0,t.jsxs)("div",{className:"fixed inset-y-0 left-0 w-64 bg-background p-4 shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Navigation"}),(0,t.jsxs)(p.z,{variant:"ghost",size:"icon",onClick:k,className:"lg:hidden",children:[(0,t.jsx)(x.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Close menu"})]})]}),(0,t.jsx)("nav",{className:"grid gap-1",children:C.map(e=>(0,t.jsx)(D,{href:e.href,icon:e.icon,label:e.label,isActive:y===e.href,onClick:k},e.href))})]})]}),(0,t.jsx)("div",{className:"hidden md:flex md:w-64 md:flex-col md:inset-y-0 border-r",children:(0,t.jsx)("div",{className:"flex-1 flex flex-col min-h-0 pt-6 px-4",children:(0,t.jsx)("nav",{className:"flex-1 space-y-1",children:C.map(e=>(0,t.jsx)(D,{href:e.href,icon:e.icon,label:e.label,isActive:y===e.href},e.href))})})}),(0,t.jsx)("main",{className:"flex-1 overflow-auto p-4 md:p-6 bg-muted/20",children:s})]})]})}},9174:function(e,s,a){a.d(s,{C:function(){return i}});var t=a(7437);a(2265);var n=a(535),r=a(3448);let l=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:a,...n}=e;return(0,t.jsx)("div",{className:(0,r.cn)(l({variant:a}),s),...n})}},9820:function(e,s,a){a.d(s,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},eW:function(){return f},ll:function(){return o}});var t=a(7437),n=a(2265),r=a(3448);let l=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});l.displayName="Card";let i=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...n})});i.displayName="CardHeader";let o=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});o.displayName="CardTitle";let d=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",a),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",a),...n})});c.displayName="CardContent";let f=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",a),...n})});f.displayName="CardFooter"}}]);