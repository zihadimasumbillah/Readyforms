"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[275],{8246:function(e,t,s){s.d(t,{O:function(){return k}});var r=s(7437),a=s(2265),i=s(2381),n=s(279),o=s(3675),c=s(5060),l=s(9270),d=s(401),u=s(3448);let m=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.fC,{ref:t,className:(0,u.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...a,children:(0,r.jsx)(l.z$,{className:(0,u.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(d.Z,{className:"h-4 w-4"})})})});m.displayName=l.fC.displayName;var p=s(9820),g=s(721);let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(g.fC,{className:(0,u.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...a,ref:t,children:(0,r.jsx)(g.bU,{className:(0,u.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});h.displayName=g.fC.displayName;var x=s(3662),f=s(9892),b=s(1905);function j(e){let{id:t,question:s}=e,{attributes:a,listeners:i,setNodeRef:n,transform:o,transition:c,isDragging:l}=(0,x.nB)({id:t}),d={transform:f.ux.Transform.toString(o),transition:c,opacity:l?.5:1,zIndex:l?1e3:1};return(0,r.jsxs)("div",{ref:n,style:d,className:"flex items-center p-3 rounded-md border ".concat(l?"border-primary":"border-border"," bg-background"),children:[(0,r.jsxs)("button",{type:"button",className:"cursor-grab active:cursor-grabbing p-1 rounded-sm hover:bg-muted mr-3",...a,...i,children:[(0,r.jsx)(b.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsx)("span",{className:"sr-only",children:"Drag to reorder"})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"flex-1 text-sm truncate",children:s}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:t.startsWith("customString")?"Short Text":t.startsWith("customText")?"Long Text":t.startsWith("customInt")?"Number":t.startsWith("customCheckbox")?"Yes/No":"Question"})]})]})}var y=s(795),v=s(4314),S=s(5598),N=s(2489),w=s(7689);function k(e){let{topics:t,initialData:s,handleSave:l,handleCancel:d,isSubmitting:u=!1,onSubmit:g,isEditMode:f=!1,submitButtonLabel:b="Save Template"}=e,k=g||l,[C,I]=(0,a.useState)({title:"",description:"",topicId:"",isPublic:!0,isQuiz:!1,showScoreImmediately:!1,customString1State:!1,customString1Question:"",customString2State:!1,customString2Question:"",customString3State:!1,customString3Question:"",customString4State:!1,customString4Question:"",customText1State:!1,customText1Question:"",customText2State:!1,customText2Question:"",customText3State:!1,customText3Question:"",customText4State:!1,customText4Question:"",customInt1State:!1,customInt1Question:"",customInt2State:!1,customInt2Question:"",customInt3State:!1,customInt3Question:"",customInt4State:!1,customInt4Question:"",customCheckbox1State:!1,customCheckbox1Question:"",customCheckbox2State:!1,customCheckbox2Question:"",customCheckbox3State:!1,customCheckbox3Question:"",customCheckbox4State:!1,customCheckbox4Question:"",scoringCriteria:{},imageUrl:""}),[T,Q]=(0,a.useState)([]),[q,Z]=(0,a.useState)(null),E=(0,y.Dy)((0,y.VT)(y.we,{activationConstraint:{distance:8}}),(0,y.VT)(y.Lg,{coordinateGetter:x.is})),O=e=>{let{name:t,value:s}=e.target;I(e=>({...e,[t]:s}))},z=(e,t)=>{I(s=>({...s,[e]:t})),t&&!T.includes(e.replace("State",""))&&Q(t=>[...t,e.replace("State","")]),t||Q(t=>t.filter(t=>t!==e.replace("State","")))},_=async e=>{e.preventDefault();let t={...C,questionOrder:T};await k(t)},{getRootProps:D,getInputProps:F}=(0,S.uI)({accept:{"image/*":[".jpeg",".jpg",".png",".gif"]},maxFiles:1,onDrop:e=>{if(e.length>0){let t=e[0],s=new FileReader;s.onload=()=>{let e=s.result;Z(e),I(t=>({...t,imageUrl:e}))},s.readAsDataURL(t)}}});return(0,a.useEffect)(()=>{if(s){let e={...s};if("string"==typeof s.scoringCriteria)try{e.scoringCriteria=JSON.parse(s.scoringCriteria)}catch(t){console.error("Error parsing scoring criteria:",t),e.scoringCriteria={}}I(e),s.imageUrl&&Z(s.imageUrl);let t=[];try{s.questionOrder&&("string"==typeof s.questionOrder?t=JSON.parse(s.questionOrder):Array.isArray(s.questionOrder)&&(t=s.questionOrder))}catch(e){console.error("Error parsing question order:",e)}t&&Array.isArray(t)&&0!==t.length||(t=Object.keys(s).filter(e=>e.endsWith("State")&&!0===s[e]).map(e=>e.replace("State",""))),Q(t)}},[s]),(0,r.jsxs)("form",{onSubmit:_,className:"space-y-8",children:[(0,r.jsxs)(p.Zb,{children:[(0,r.jsx)(p.Ol,{children:(0,r.jsx)(p.ll,{children:"Basic Information"})}),(0,r.jsxs)(p.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(c._,{htmlFor:"title",children:["Title ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(n.I,{id:"title",name:"title",value:C.title,onChange:O,required:!0,placeholder:"Enter a title for your form"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"description",children:"Description"}),(0,r.jsx)(o.g,{id:"description",name:"description",value:C.description||"",onChange:O,placeholder:"Enter a description for your form",rows:3})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{children:"Template Image (Optional)"}),q?(0,r.jsxs)("div",{className:"relative overflow-hidden rounded-md border border-border",children:[(0,r.jsx)("img",{src:q,alt:"Template preview",className:"max-h-40 w-full object-cover"}),(0,r.jsx)(i.z,{type:"button",size:"icon",variant:"destructive",className:"absolute top-2 right-2",onClick:()=>{Z(null),I(e=>({...e,imageUrl:""}))},children:(0,r.jsx)(N.Z,{className:"h-4 w-4"})})]}):(0,r.jsxs)("div",{...D(),className:"border-2 border-dashed border-border rounded-md p-6 hover:bg-accent/50 transition-colors cursor-pointer text-center",children:[(0,r.jsx)("input",{...F()}),(0,r.jsx)(w.Z,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Drag & drop an image here, or click to select one"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(c._,{htmlFor:"topicId",children:["Topic ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{id:"topicId",name:"topicId",value:C.topicId,onChange:O,required:!0,className:"w-full p-2 border rounded-md bg-background",children:[(0,r.jsx)("option",{value:"",children:"Select a topic"}),t.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-4 pt-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(c._,{htmlFor:"isPublic",children:"Make this template public"}),(0,r.jsx)(h,{id:"isPublic",checked:C.isPublic,onCheckedChange:e=>z("isPublic",e)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(c._,{htmlFor:"isQuiz",children:["This is a quiz or assessment",(0,r.jsx)("span",{className:"block text-xs text-muted-foreground",children:"Enable scoring for responses"})]}),(0,r.jsx)(h,{id:"isQuiz",checked:C.isQuiz,onCheckedChange:e=>z("isQuiz",e)})]}),C.isQuiz&&(0,r.jsxs)("div",{className:"flex items-center justify-between pl-6",children:[(0,r.jsxs)(c._,{htmlFor:"showScoreImmediately",children:["Show score immediately",(0,r.jsx)("span",{className:"block text-xs text-muted-foreground",children:"Display score to users after submission"})]}),(0,r.jsx)(h,{id:"showScoreImmediately",checked:C.showScoreImmediately,onCheckedChange:e=>z("showScoreImmediately",e)})]})]})]})]}),(0,r.jsxs)(p.Zb,{children:[(0,r.jsx)(p.Ol,{children:(0,r.jsx)(p.ll,{children:"Questions"})}),(0,r.jsxs)(p.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Short Text Questions"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(m,{id:"customString1State",checked:C.customString1State,onCheckedChange:e=>z("customString1State",!0===e)}),(0,r.jsx)(c._,{htmlFor:"customString1State",className:"font-normal",children:"Short Text Question 1"})]}),C.customString1State&&(0,r.jsxs)("div",{className:"ml-6",children:[(0,r.jsx)(n.I,{name:"customString1Question",value:C.customString1Question,onChange:O,placeholder:"Enter your question"}),C.isQuiz&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)(c._,{className:"text-xs",children:"Correct answer (for scoring)"}),(0,r.jsx)(n.I,{name:"customString1Answer",value:(e=>{let t=C.scoringCriteria[e];return t&&"boolean"!=typeof t.answer?String(t.answer||""):""})("customString1Answer"),onChange:e=>{I(t=>({...t,scoringCriteria:{...t.scoringCriteria,customString1Answer:{answer:e.target.value,points:5}}}))},placeholder:"Enter correct answer",className:"mt-1"})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Question Order"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Drag and drop questions to reorder them."}),T.length>0?(0,r.jsx)(y.LB,{sensors:E,collisionDetection:y.pE,modifiers:[v.DL,v.F4],onDragEnd:e=>{let{active:t,over:s}=e;s&&t.id!==s.id&&Q(e=>{let r=e.indexOf(t.id),a=e.indexOf(s.id);return(0,x.Rp)(e,r,a)})},children:(0,r.jsx)(x.Fo,{items:T,strategy:x.qw,children:(0,r.jsx)("div",{className:"space-y-2",children:T.map(e=>{let t=C["".concat(e,"Question")]||e;return(0,r.jsx)(j,{id:e,question:"string"==typeof t?t:String(e)},e)})})})}):(0,r.jsx)("div",{className:"text-center p-4 border border-dashed rounded-md text-muted-foreground",children:"No questions have been enabled. Enable questions above to arrange their order."})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(i.z,{type:"button",variant:"outline",onClick:d,children:"Cancel"}),(0,r.jsx)(i.z,{type:"submit",disabled:u,children:u?"Saving...":b})]})]})}},279:function(e,t,s){s.d(t,{I:function(){return n}});var r=s(7437),a=s(2265),i=s(3448);let n=a.forwardRef((e,t)=>{let{className:s,type:a,...n}=e;return(0,r.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n})});n.displayName="Input"},5060:function(e,t,s){s.d(t,{_:function(){return l}});var r=s(7437),a=s(2265),i=s(6394),n=s(535),o=s(3448);let c=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.f,{ref:t,className:(0,o.cn)(c(),s),...a})});l.displayName=i.f.displayName},3675:function(e,t,s){s.d(t,{g:function(){return n}});var r=s(7437),a=s(2265),i=s(3448);let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...a})});n.displayName="Textarea"},6861:function(e,t,s){s.d(t,{t:function(){return a}});var r=s(5493);let a={async getAllTemplates(e){try{let t=new URLSearchParams;(null==e?void 0:e.query)&&t.append("query",e.query),(null==e?void 0:e.tag)&&t.append("tag",e.tag),(null==e?void 0:e.topicId)&&t.append("topicId",e.topicId),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.sort)&&t.append("sort",e.sort);let s=t.toString();return(await r.Z.get(s?"/templates/search?".concat(s):"/templates")).data}catch(e){return console.error("Error fetching templates:",e),[]}},getTemplateById:async e=>(await r.Z.get("/templates/".concat(e))).data,async getById(e){return this.getTemplateById(e)},createTemplate:async e=>(await r.Z.post("/templates",e)).data,updateTemplate:async(e,t,s)=>(await r.Z.put("/templates/".concat(e),{...t,version:s})).data,async deleteTemplate(e,t){await r.Z.delete("/templates/".concat(e),{data:{version:t}})},async searchTemplates(e,t){try{let s=new URLSearchParams({query:e});return(null==t?void 0:t.tag)&&s.append("tag",t.tag),(null==t?void 0:t.topicId)&&s.append("topicId",t.topicId),(null==t?void 0:t.limit)&&s.append("limit",t.limit.toString()),(null==t?void 0:t.page)&&s.append("page",t.page.toString()),(null==t?void 0:t.sort)&&s.append("sort",t.sort),(await r.Z.get("/templates/search?".concat(s))).data}catch(e){return console.error("Error searching templates:",e),[]}}}},154:function(e,t,s){s.d(t,{wE:function(){return i}});var r=s(5493);class a{async getAllTopics(){return(await r.Z.get("/topics")).data}async getTopicById(e){return(await r.Z.get("/topics/".concat(e))).data}async createTopic(e){return(await r.Z.post("/topics",e)).data}async updateTopic(e,t){return(await r.Z.put("/topics/".concat(e),t)).data}async deleteTopic(e,t){return(await r.Z.delete("/topics/".concat(e),{data:{version:t}})).data}}let i=new a}}]);