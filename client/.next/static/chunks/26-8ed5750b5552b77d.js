"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{6858:function(e,t,a){a.d(t,{Z:function(){return l}});let l=(0,a(9763).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},740:function(e,t,a){a.d(t,{Z:function(){return l}});let l=(0,a(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},8997:function(e,t,a){a.d(t,{Z:function(){return l}});let l=(0,a(9763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},3417:function(e,t,a){a.d(t,{Z:function(){return l}});let l=(0,a(9763).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},3247:function(e,t,a){a.d(t,{Z:function(){return l}});let l=(0,a(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},7648:function(e,t,a){a.d(t,{default:function(){return s.a}});var l=a(2972),s=a.n(l)},2287:function(e,t,a){a.d(t,{k:function(){return y}});var l=a(7437),s=a(2265),r=a(9820),n=a(9174),c=a(2381),i=a(8997),o=a(3417),d=a(6858),m=a(7648),u=a(1814),h=a(4467),x=a(4881);function f(e){let{template:t}=e,[a,f]=(0,s.useState)(t.likesCount||0),[p,g]=(0,s.useState)(0),[v,j]=(0,s.useState)(!1),w=(0,x.a)(),y=null==w?void 0:w.user;return(0,s.useEffect)(()=>{(async()=>{try{if(void 0===t.likesCount){let e=await u.h.getLikeCount(t.id);f(e||0)}else f(t.likesCount);if(y){let e=await u.h.checkLike(t.id);j(e)}let e=await h.a.getCommentsByTemplate(t.id);g(e.length)}catch(e){console.error("Error fetching template interactions:",e)}})()},[t.id,t.likesCount,y]),(0,l.jsxs)(r.Zb,{className:"h-full flex flex-col",children:[(0,l.jsx)(r.Ol,{className:"pb-3",children:(0,l.jsxs)("div",{className:"flex justify-between items-start",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(r.ll,{className:"text-lg hover:text-primary transition-colors",children:(0,l.jsx)(m.default,{href:"/templates/".concat(t.id),className:"hover:underline",children:t.title})}),(0,l.jsx)(r.SZ,{className:"line-clamp-2 mt-1",children:t.description||"No description provided"})]}),t.isQuiz&&(0,l.jsx)(n.C,{children:"Quiz"})]})}),(0,l.jsxs)(r.aY,{className:"flex-grow",children:[t.imageUrl&&(0,l.jsx)("div",{className:"mb-3 rounded-md overflow-hidden",children:(0,l.jsx)("img",{src:t.imageUrl,alt:t.title,className:"w-full h-32 object-cover"})}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 my-2",children:[t.topic&&(0,l.jsx)(n.C,{variant:"outline",className:"bg-muted/50",children:t.topic.name}),t.tags&&t.tags.map(e=>(0,l.jsx)(n.C,{variant:"secondary",className:"bg-primary/10",children:e.name},e.id||e.name))]})]}),(0,l.jsxs)(r.eW,{className:"pt-4 flex items-center justify-between border-t",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-muted-foreground",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(i.Z,{className:"h-4 w-4 mr-1 ".concat(v?"fill-red-500 text-red-500":"")}),a]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(o.Z,{className:"h-4 w-4 mr-1"}),p]}),(0,l.jsx)("div",{children:(e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(t)})(t.createdAt)})]}),(0,l.jsx)(c.z,{size:"sm",variant:"ghost",asChild:!0,children:(0,l.jsxs)(m.default,{href:"/templates/".concat(t.id),children:["View ",(0,l.jsx)(d.Z,{className:"ml-1 h-3 w-3"})]})})]})]})}var p=a(279),g=a(9140),v=a(3247),j=a(740),w=a(5291);function y(e){var t;let{templates:a=[],topics:r=[],loading:i=!1,requireAuth:o=!1}=e,[d,m]=(0,s.useState)(""),[u,h]=(0,s.useState)("all"),[x,y]=(0,s.useState)(a);return(0,s.useEffect)(()=>{if(!a||0===a.length){y([]);return}let e=[...a];if(d){let t=d.toLowerCase();e=e.filter(e=>{var a,l;return((null===(a=e.title)||void 0===a?void 0:a.toLowerCase())||"").includes(t)||((null===(l=e.description)||void 0===l?void 0:l.toLowerCase())||"").includes(t)})}u&&"all"!==u&&(e=e.filter(e=>e.topicId===u)),y(e)},[a,d,u]),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsx)(v.Z,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,l.jsx)(p.I,{type:"search",placeholder:"Search templates...",className:"pl-8",value:d,onChange:e=>{m(e.target.value)}})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(j.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,l.jsxs)(w.Ph,{value:u,onValueChange:e=>{h(e)},children:[(0,l.jsx)(w.i4,{className:"w-[180px]",children:(0,l.jsx)(w.ki,{placeholder:"Select topic"})}),(0,l.jsxs)(w.Bw,{children:[(0,l.jsx)(w.Ql,{value:"all",children:"All Topics"}),r&&r.map(e=>(0,l.jsx)(w.Ql,{value:e.id,children:e.name},e.id))]})]})]})]}),(d||"all"!==u)&&(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[d&&(0,l.jsxs)(n.C,{variant:"secondary",className:"flex items-center gap-1",children:["Search: ",d,(0,l.jsxs)("button",{className:"ml-1 rounded-full hover:bg-muted-foreground/20",onClick:()=>m(""),children:[(0,l.jsx)("span",{className:"sr-only",children:"Remove"}),(0,l.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",children:(0,l.jsx)("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor"})})]})]}),"all"!==u&&(0,l.jsxs)(n.C,{variant:"secondary",className:"flex items-center gap-1",children:["Topic: ",(null==r?void 0:null===(t=r.find(e=>e.id===u))||void 0===t?void 0:t.name)||"Unknown",(0,l.jsxs)("button",{className:"ml-1 rounded-full hover:bg-muted-foreground/20",onClick:()=>h("all"),children:[(0,l.jsx)("span",{className:"sr-only",children:"Remove"}),(0,l.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",children:(0,l.jsx)("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor"})})]})]})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i?Array.from({length:6}).map((e,t)=>(0,l.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,l.jsx)(g.O,{className:"h-[200px] w-full rounded-lg"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(g.O,{className:"h-4 w-[250px]"}),(0,l.jsx)(g.O,{className:"h-4 w-[200px]"})]}),(0,l.jsxs)("div",{className:"flex justify-between pt-2",children:[(0,l.jsx)(g.O,{className:"h-8 w-20"}),(0,l.jsx)(g.O,{className:"h-8 w-20"})]})]},"skeleton-".concat(t))):x&&x.length>0?x.map(e=>(0,l.jsx)(f,{template:e},e.id)):(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,l.jsx)("div",{className:"rounded-full bg-muted p-3 mb-4",children:(0,l.jsx)(v.Z,{className:"h-6 w-6 text-muted-foreground"})}),(0,l.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"No templates found"}),(0,l.jsx)("p",{className:"text-muted-foreground max-w-sm mb-4",children:d||"all"!==u?"No templates match your current filters. Try adjusting your search.":"There are no templates available right now. Check back later."}),(d||"all"!==u)&&(0,l.jsx)(c.z,{onClick:()=>{m(""),h("all")},variant:"outline",children:"Clear filters"})]})})]})}},9140:function(e,t,a){a.d(t,{O:function(){return r}});var l=a(7437),s=a(3448);function r(e){let{className:t,...a}=e;return(0,l.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",t),...a})}},4467:function(e,t,a){a.d(t,{a:function(){return s}});var l=a(5493);let s={async getCommentsByTemplate(e){try{return(await l.Z.get("/comments/template/".concat(e))).data}catch(e){return console.error("Error fetching comments:",e),[]}},async createComment(e){try{return(await l.Z.post("/comments",e)).data}catch(e){var t;throw console.error("Error creating comment:",e),(null===(t=e.response)||void 0===t?void 0:t.data)||{message:"Failed to create comment"}}},async deleteComment(e,t){try{await l.Z.delete("/comments/".concat(e),{data:{version:t}})}catch(e){var a;throw console.error("Error deleting comment:",e),(null===(a=e.response)||void 0===a?void 0:a.data)||{message:"Failed to delete comment"}}}}},1814:function(e,t,a){a.d(t,{h:function(){return s}});var l=a(5493);let s={async checkLike(e){try{return(await l.Z.get("/likes/check/".concat(e))).data.liked}catch(e){return console.error("Error checking like status:",e),!1}},async getLikeCount(e){try{return(await l.Z.get("/likes/count/".concat(e))).data.count}catch(e){return console.error("Error getting like count:",e),0}},async toggleLike(e){try{if(await this.checkLike(e))return(await l.Z.delete("/likes/template/".concat(e))).data;return(await l.Z.post("/likes/template/".concat(e))).data}catch(e){var t;throw console.error("Error toggling like:",e),(null===(t=e.response)||void 0===t?void 0:t.data)||{message:"Failed to update like status"}}},async getLikesByTemplate(e){try{return(await l.Z.get("/likes/template/".concat(e))).data}catch(e){throw console.error("Error getting likes by template:",e),e}}}}}]);