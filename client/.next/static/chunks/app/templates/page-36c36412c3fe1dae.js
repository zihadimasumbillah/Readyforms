(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[0],{8780:function(e,t,s){Promise.resolve().then(s.bind(s,6600))},6858:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},6600:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var a=s(7437),l=s(2265),i=s(6861),r=s(154),c=s(9820),n=s(279),d=s(2381),o=s(3247);let m=(0,s(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var u=s(7648),h=s(9376),x=s(9174),f=s(8997),p=s(3417),j=s(6858),g=s(1814),N=s(4467),v=s(4881);function y(e){let{template:t}=e,[s,i]=(0,l.useState)(t.likesCount||0),[r,n]=(0,l.useState)(0),[o,m]=(0,l.useState)(!1),h=(0,v.a)(),y=null==h?void 0:h.user;return(0,l.useEffect)(()=>{(async()=>{try{if(void 0===t.likesCount){let e=await g.h.getLikesCount(t.id);i(e.count||0)}else i(t.likesCount);if(y){let e=await g.h.checkLikeStatus(t.id);m(e.liked)}let e=await N.a.getCommentsByTemplate(t.id);n(e.length)}catch(e){console.error("Error fetching template interactions:",e)}})()},[t.id,t.likesCount,y]),(0,a.jsxs)(c.Zb,{className:"h-full flex flex-col",children:[(0,a.jsx)(c.Ol,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.ll,{className:"text-lg hover:text-primary transition-colors",children:(0,a.jsx)(u.default,{href:"/templates/".concat(t.id),className:"hover:underline",children:t.title})}),(0,a.jsx)(c.SZ,{className:"line-clamp-2 mt-1",children:t.description||"No description provided"})]}),t.isQuiz&&(0,a.jsx)(x.C,{children:"Quiz"})]})}),(0,a.jsxs)(c.aY,{className:"flex-grow",children:[t.imageUrl&&(0,a.jsx)("div",{className:"mb-3 rounded-md overflow-hidden",children:(0,a.jsx)("img",{src:t.imageUrl,alt:t.title,className:"w-full h-32 object-cover"})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 my-2",children:[t.topic&&(0,a.jsx)(x.C,{variant:"outline",className:"bg-muted/50",children:t.topic.name}),t.tags&&t.tags.map(e=>(0,a.jsx)(x.C,{variant:"secondary",className:"bg-primary/10",children:e.name},e.id||e.name))]})]}),(0,a.jsxs)(c.eW,{className:"pt-4 flex items-center justify-between border-t",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-1 ".concat(o?"fill-red-500 text-red-500":"")}),s]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-1"}),r]}),(0,a.jsx)("div",{children:(e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(t)})(t.createdAt)})]}),(0,a.jsx)(d.z,{size:"sm",variant:"ghost",asChild:!0,children:(0,a.jsxs)(u.default,{href:"/templates/".concat(t.id),children:["View ",(0,a.jsx)(j.Z,{className:"ml-1 h-3 w-3"})]})})]})]})}var w=s(8752);function b(){let[e,t]=(0,l.useState)([]),[s,x]=(0,l.useState)([]),[f,p]=(0,l.useState)([]),[j,g]=(0,l.useState)(!0),[N,v]=(0,l.useState)("");(0,h.useRouter)();let{toast:b}=(0,w.pm)();return(0,l.useEffect)(()=>{(async()=>{try{let e=await r.wE.getAllTopics();p(e);let s=await i.t.getTemplates();console.log("Templates data type:",typeof s),console.log("Templates is array:",Array.isArray(s)),console.log("Number of templates:",s.length),t(s),x(s)}catch(e){console.error("Error fetching data:",e),b({title:"Error",description:"Failed to fetch templates. Please try again later.",variant:"destructive"})}finally{g(!1)}})()},[b]),(0,l.useEffect)(()=>{""===N.trim()?x(e):x(e.filter(e=>{var t,s;let a=(null===(t=e.title)||void 0===t?void 0:t.toLowerCase())||"",l=(null===(s=e.description)||void 0===s?void 0:s.toLowerCase())||"",i=N.toLowerCase();return a.includes(i)||l.includes(i)}))},[N,e]),(0,a.jsxs)("div",{className:"container mx-auto py-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Templates"}),(0,a.jsxs)("div",{className:"flex w-full sm:w-auto gap-2",children:[(0,a.jsxs)("div",{className:"relative w-full sm:w-64",children:[(0,a.jsx)(o.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)(n.I,{placeholder:"Search templates...",className:"pl-9",value:N,onChange:e=>{v(e.target.value)}})]}),(0,a.jsxs)(d.z,{variant:"outline",size:"icon",children:[(0,a.jsx)(m,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Filter"})]})]})]}),j?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>(0,a.jsxs)(c.Zb,{className:"h-64 animate-pulse",children:[(0,a.jsx)(c.Ol,{className:"bg-muted/40"}),(0,a.jsxs)(c.aY,{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-4 w-2/3 bg-muted rounded"}),(0,a.jsx)("div",{className:"h-4 w-full bg-muted rounded"}),(0,a.jsx)("div",{className:"h-4 w-1/2 bg-muted rounded"})]})]},t))}):s.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>(0,a.jsx)(y,{template:e},e.id))}):(0,a.jsx)(c.Zb,{className:"w-full py-12",children:(0,a.jsxs)(c.aY,{className:"flex flex-col items-center justify-center text-center",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDD0D"}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"No templates found"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-6",children:N?"No templates match your search criteria.":"There are no templates available at the moment."}),(0,a.jsx)(d.z,{asChild:!0,children:(0,a.jsx)(u.default,{href:"/templates/create",children:"Create Template"})})]})})]})}},154:function(e,t,s){"use strict";s.d(t,{wE:function(){return i}});var a=s(9642);class l{async getAllTopics(){return(await a.Z.get("/topics")).data}async getTopicById(e){return(await a.Z.get("/topics/".concat(e))).data}async createTopic(e){return(await a.Z.post("/topics",e)).data}async updateTopic(e,t){return(await a.Z.put("/topics/".concat(e),t)).data}async deleteTopic(e,t){return(await a.Z.delete("/topics/".concat(e),{data:{version:t}})).data}}let i=new l}},function(e){e.O(0,[284,464,972,714,971,117,744],function(){return e(e.s=8780)}),_N_E=e.O()}]);