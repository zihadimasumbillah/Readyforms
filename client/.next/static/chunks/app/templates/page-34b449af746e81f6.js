(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[0],{8780:function(e,t,s){Promise.resolve().then(s.bind(s,9927))},2208:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},740:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},8997:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},3417:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},4630:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9927:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var r=s(7437),a=s(2265),l=s(7648),n=s(9820),c=s(2381),i=s(9174),o=s(3448),d=s(8997),u=s(3417),m=s(2208),h=s(4630),x=s(4881),f=s(1814),p=s(5493),g={getCommentsByTemplate:async e=>{try{return(await p.Z.get("/comments/template/".concat(e))).data}catch(t){throw console.error("Get comments error for template ".concat(e,":"),t),t}}};function v(e){var t,s,p;let{template:v,onClick:j,className:y,showStats:w=!0}=e,N=(0,x.a)(),k=null==N?void 0:N.user,C=k&&v.userId===k.id,b=null==k?void 0:k.isAdmin,[Z,L]=(0,a.useState)(v.likesCount||0),[A,E]=(0,a.useState)(v.commentsCount||0);(0,a.useEffect)(()=>{(async()=>{if(w)try{if(void 0===v.likesCount){let e=await f.ZP.getLikeCount(v.id);L(e)}else L(v.likesCount);if(void 0===v.commentsCount){let e=await g.getCommentsByTemplate(v.id);E(e.length)}else E(v.commentsCount)}catch(e){console.error("Error fetching template stats:",e)}})()},[v.id,v.likesCount,v.commentsCount,w]),((null===(t=v.title)||void 0===t?void 0:t.toLowerCase())||"").includes("test")||((null===(s=v.description)||void 0===s?void 0:s.toLowerCase())||"").includes("test"),v.createdAt&&new Date(v.createdAt).toLocaleDateString();let S=v.createdAt?new Date(v.createdAt).toLocaleDateString():"Unknown date";return(0,r.jsxs)(n.Zb,{className:(0,o.cn)("overflow-hidden transition-all hover:shadow-md",y),children:[(0,r.jsx)(n.Ol,{className:"p-4 pb-2",children:(0,r.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,r.jsx)(n.ll,{className:"text-lg line-clamp-1",children:v.title}),v.topic&&(0,r.jsx)(i.C,{variant:"outline",className:"shrink-0",children:v.topic.name})]})}),(0,r.jsxs)(n.aY,{className:"p-4 pt-2",children:[(0,r.jsx)("div",{className:"h-20",children:v.description&&(0,r.jsx)("p",{className:"text-muted-foreground text-sm line-clamp-3 mb-2",children:v.description})}),(0,r.jsx)("div",{className:"flex items-center mt-2 text-xs text-muted-foreground",children:(0,r.jsxs)("span",{children:["Created ",S," ",(null===(p=v.user)||void 0===p?void 0:p.name)&&"by ".concat(v.user.name)]})}),w&&(0,r.jsx)("div",{className:"flex items-center justify-between mt-3 text-sm",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,r.jsx)(d.Z,{className:"h-3.5 w-3.5 mr-1"}),(0,r.jsx)("span",{children:Z})]}),(0,r.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,r.jsx)(u.Z,{className:"h-3.5 w-3.5 mr-1"}),(0,r.jsx)("span",{children:A})]})]})})]}),(0,r.jsxs)(n.eW,{className:"p-4 pt-0 gap-2",children:[(0,r.jsx)(c.z,{variant:"secondary",className:"w-full",size:"sm",onClick:j,asChild:!j,children:j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"h-3.5 w-3.5 mr-1"}),"View"]}):(0,r.jsxs)(l.default,{href:"/templates/".concat(v.id),children:[(0,r.jsx)(m.Z,{className:"h-3.5 w-3.5 mr-1"}),"View"]})}),(C||b)&&(0,r.jsx)(c.z,{variant:"outline",size:"sm",asChild:!0,children:(0,r.jsxs)(l.default,{href:"/templates/".concat(v.id,"/edit"),children:[(0,r.jsx)(h.Z,{className:"h-3.5 w-3.5 mr-1"}),"Edit"]})})]})]})}var j=s(279),y=s(9140),w=s(3247),N=s(740),k=s(5291);function C(e){var t;let{templates:s=[],topics:l=[],loading:n=!1,requireAuth:o=!1}=e,[d,u]=(0,a.useState)(""),[m,h]=(0,a.useState)("all"),[x,f]=(0,a.useState)(s);return(0,a.useEffect)(()=>{if(!s||0===s.length){f([]);return}let e=[...s];if(d){let t=d.toLowerCase();e=e.filter(e=>{var s,r;return((null===(s=e.title)||void 0===s?void 0:s.toLowerCase())||"").includes(t)||((null===(r=e.description)||void 0===r?void 0:r.toLowerCase())||"").includes(t)})}m&&"all"!==m&&(e=e.filter(e=>e.topicId===m)),f(e)},[s,d,m]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(w.Z,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(j.I,{type:"search",placeholder:"Search templates...",className:"pl-8",value:d,onChange:e=>{u(e.target.value)}})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(N.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsxs)(k.Ph,{value:m,onValueChange:e=>{h(e)},children:[(0,r.jsx)(k.i4,{className:"w-[180px]",children:(0,r.jsx)(k.ki,{placeholder:"Select topic"})}),(0,r.jsxs)(k.Bw,{children:[(0,r.jsx)(k.Ql,{value:"all",children:"All Topics"}),l&&l.map(e=>(0,r.jsx)(k.Ql,{value:e.id,children:e.name},e.id))]})]})]})]}),(d||"all"!==m)&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[d&&(0,r.jsxs)(i.C,{variant:"secondary",className:"flex items-center gap-1",children:["Search: ",d,(0,r.jsxs)("button",{className:"ml-1 rounded-full hover:bg-muted-foreground/20",onClick:()=>u(""),children:[(0,r.jsx)("span",{className:"sr-only",children:"Remove"}),(0,r.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",children:(0,r.jsx)("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor"})})]})]}),"all"!==m&&(0,r.jsxs)(i.C,{variant:"secondary",className:"flex items-center gap-1",children:["Topic: ",(null==l?void 0:null===(t=l.find(e=>e.id===m))||void 0===t?void 0:t.name)||"Unknown",(0,r.jsxs)("button",{className:"ml-1 rounded-full hover:bg-muted-foreground/20",onClick:()=>h("all"),children:[(0,r.jsx)("span",{className:"sr-only",children:"Remove"}),(0,r.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",children:(0,r.jsx)("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor"})})]})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n?Array.from({length:6}).map((e,t)=>(0,r.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,r.jsx)(y.O,{className:"h-[200px] w-full rounded-lg"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(y.O,{className:"h-4 w-[250px]"}),(0,r.jsx)(y.O,{className:"h-4 w-[200px]"})]}),(0,r.jsxs)("div",{className:"flex justify-between pt-2",children:[(0,r.jsx)(y.O,{className:"h-8 w-20"}),(0,r.jsx)(y.O,{className:"h-8 w-20"})]})]},"skeleton-".concat(t))):x&&x.length>0?x.map(e=>(0,r.jsx)(v,{template:e},e.id)):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,r.jsx)("div",{className:"rounded-full bg-muted p-3 mb-4",children:(0,r.jsx)(w.Z,{className:"h-6 w-6 text-muted-foreground"})}),(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"No templates found"}),(0,r.jsx)("p",{className:"text-muted-foreground max-w-sm mb-4",children:d||"all"!==m?"No templates match your current filters. Try adjusting your search.":"There are no templates available right now. Check back later."}),(d||"all"!==m)&&(0,r.jsx)(c.z,{onClick:()=>{u(""),h("all")},variant:"outline",children:"Clear filters"})]})})]})}var b=s(6861),Z=s(154),L=s(9376),A=s(8752),E=s(2506);function S(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)([]),[n,i]=(0,a.useState)(!0),o=(0,L.useRouter)(),{user:d}=(0,x.a)()||{};return(0,a.useEffect)(()=>{(async()=>{i(!0);try{let e=await Z.wE.getAllTopics();console.log("Topics data type:",typeof e),console.log("Topics is array:",Array.isArray(e));let s=Array.isArray(e)?e:[];l(s);let r=await b.tE.getAllTemplates();console.log("Templates data type:",typeof r),console.log("Templates is array:",Array.isArray(r));let a=Array.isArray(r)?r:[];t(a)}catch(e){console.error("Error fetching data:",e),(0,A.Am)({title:"Error",description:"Failed to load templates. Please try again.",variant:"destructive"})}finally{i(!1)}})()},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E.w,{}),(0,r.jsxs)("div",{className:"container mx-auto py-10",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Form Templates"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-1",children:"Browse ready-made templates or create your own"})]}),(0,r.jsx)(c.z,{onClick:()=>{d?o.push("/templates/create"):((0,A.Am)({title:"Authentication Required",description:"Please log in to create a template",variant:"default"}),o.push("/auth/login?redirect=/templates/create"))},children:"Create Template"})]}),(0,r.jsx)(C,{templates:e,topics:s,loading:n})]})]})}},9174:function(e,t,s){"use strict";s.d(t,{C:function(){return c}});var r=s(7437);s(2265);var a=s(535),l=s(3448);let n=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)(n({variant:s}),t),...a})}},9140:function(e,t,s){"use strict";s.d(t,{O:function(){return l}});var r=s(7437),a=s(3448);function l(e){let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",t),...s})}},1814:function(e,t,s){"use strict";s.d(t,{hX:function(){return l}});var r=s(5493);class a{async toggleLike(e){try{return(await r.Z.post("/likes/template/".concat(e))).data}catch(e){throw console.error("Error toggling like:",e),e}}async checkLike(e){try{return(await r.Z.get("/likes/check/".concat(e))).data}catch(e){throw console.error("Error checking like:",e),e}}async countLikes(e){try{return(await r.Z.get("/likes/count/".concat(e))).data}catch(e){throw console.error("Error counting likes:",e),e}}async getLikesByTemplate(e){try{return(await r.Z.get("/likes/template/".concat(e))).data}catch(e){throw console.error("Error getting likes by template:",e),e}}async getLikeCount(e){try{return(await r.Z.get("/likes/count/".concat(e))).data.count}catch(e){return console.error("Error getting like count:",e),0}}async checkLikeStatus(e){try{return(await r.Z.get("/likes/check/".concat(e))).data.liked}catch(e){return console.error("Error checking like status:",e),!1}}}let l=new a;t.ZP=l}},function(e){e.O(0,[521,448,617,564,478,348,598,412,971,117,744],function(){return e(e.s=8780)}),_N_E=e.O()}]);