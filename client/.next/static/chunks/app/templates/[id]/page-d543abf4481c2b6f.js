(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[503],{1392:function(e,t,a){Promise.resolve().then(a.bind(a,2984))},2660:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},4630:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(9763).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},4369:function(e,t,a){"use strict";var n=a(2265),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=n.useState,i=n.useEffect,l=n.useLayoutEffect,o=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!s(e,a)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),n=r({inst:{value:a,getSnapshot:t}}),s=n[0].inst,d=n[1];return l(function(){s.value=a,s.getSnapshot=t,c(s)&&d({inst:s})},[e,a,t]),i(function(){return c(s)&&d({inst:s}),e(function(){c(s)&&d({inst:s})})},[e]),o(a),a};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:d},2558:function(e,t,a){"use strict";e.exports=a(4369)},2984:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return C}});var n=a(7437),s=a(2265),r=a(9376),i=a(2381),l=a(9820),o=a(9174),c=a(2660),d=a(9763);let u=(0,d.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var m=a(8997);let f=(0,d.Z)("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);var h=a(3417),p=a(4630),x=a(6861),v=a(1814),g=a(4467),j=a(4881),b=a(8752),N=a(7168),y=a(279),w=a(3675),k=a(6246),S=a(7648);function C(e){let{params:t}=e,{id:a}=t,[d,C]=(0,s.useState)(null),[E,A]=(0,s.useState)(!0),[T,z]=(0,s.useState)(null),[V,R]=(0,s.useState)(!1),[P,L]=(0,s.useState)(0),[Z,I]=(0,s.useState)([]),[q,M]=(0,s.useState)(""),[F,O]=(0,s.useState)(!1),W=(0,r.useRouter)(),D=(0,j.a)(),Q=null==D?void 0:D.user;(0,s.useEffect)(()=>{let e=async()=>{try{A(!0);let e=await x.t.getTemplateById(a);C(e);let t=await v.h.getLikesCount(a);if(L(t.count||0),Q){let e=await v.h.checkLikeStatus(a);R(e.liked)}let n=await g.a.getCommentsByTemplate(a);I(n)}catch(e){console.error("Error fetching template:",e),z("Failed to load template. It may have been deleted or you don't have permission to view it.")}finally{A(!1)}};a&&e()},[a,Q]);let U=async()=>{if(!Q){(0,b.Am)({title:"Authentication required",description:"Please log in to like this template",variant:"destructive"}),W.push("/auth/login");return}try{let e=V?await v.h.unlikeTemplate(a):await v.h.likeTemplate(a);R(e.liked),L(t=>e.liked?t+1:t-1),(0,b.Am)({title:e.liked?"Template liked":"Template unliked",description:e.liked?"This template has been added to your likes":"This template has been removed from your likes"})}catch(e){console.error("Error toggling like:",e),(0,b.Am)({title:"Error",description:"Something went wrong. Please try again.",variant:"destructive"})}},Y=async e=>{if(e.preventDefault(),!Q){(0,b.Am)({title:"Authentication required",description:"Please log in to comment on templates",variant:"destructive"}),W.push("/auth/login");return}if(q.trim()){O(!0);try{let e=await g.a.createComment(q,a);I([...Z,e]),M(""),(0,b.Am)({title:"Comment added",description:"Your comment has been added successfully"})}catch(e){console.error("Error submitting comment:",e),(0,b.Am)({title:"Error",description:"Failed to add comment. Please try again.",variant:"destructive"})}finally{O(!1)}}},B=()=>{if(!Q){(0,b.Am)({title:"Authentication required",description:"Please log in to view responses"}),W.push("/auth/login");return}W.push("/templates/".concat(a,"/responses"))};if(E)return(0,n.jsxs)("div",{className:"container mx-auto p-6 max-w-4xl",children:[(0,n.jsxs)("div",{className:"flex items-center mb-6",children:[(0,n.jsxs)(i.z,{variant:"ghost",onClick:()=>W.back(),className:"mr-2",children:[(0,n.jsx)(c.Z,{className:"h-4 w-4 mr-1"}),"Back"]}),(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Loading template..."})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"h-8 w-1/3 bg-muted animate-pulse rounded-md"}),(0,n.jsx)("div",{className:"h-4 w-1/2 bg-muted animate-pulse rounded-md"}),(0,n.jsx)("div",{className:"h-64 bg-muted animate-pulse rounded-md"})]})]});if(T)return(0,n.jsxs)("div",{className:"container mx-auto p-6 max-w-4xl",children:[(0,n.jsx)("div",{className:"flex items-center mb-6",children:(0,n.jsxs)(i.z,{variant:"ghost",onClick:()=>W.back(),className:"mr-2",children:[(0,n.jsx)(c.Z,{className:"h-4 w-4 mr-1"}),"Back"]})}),(0,n.jsxs)(l.Zb,{className:"border-red-200 bg-red-50 dark:bg-red-900/10",children:[(0,n.jsxs)(l.Ol,{children:[(0,n.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,n.jsx)(u,{className:"h-5 w-5 text-red-500"}),"Error Loading Template"]}),(0,n.jsx)(l.SZ,{children:T})]}),(0,n.jsx)(l.eW,{children:(0,n.jsx)(i.z,{variant:"outline",onClick:()=>W.push("/templates"),children:"Browse Templates"})})]})]});if(!d)return null;let _=Q&&d.userId===Q.id,K=d.questionOrder&&"string"==typeof d.questionOrder?JSON.parse(d.questionOrder):[],H=(e,t)=>d["".concat(e).concat(t,"Question")]||"".concat(e," Question ").concat(t),J=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return(0,n.jsxs)("div",{className:"container mx-auto p-6 max-w-4xl",children:[(0,n.jsx)("div",{className:"flex items-center mb-6",children:(0,n.jsxs)(i.z,{variant:"ghost",onClick:()=>W.back(),className:"mr-2",children:[(0,n.jsx)(c.Z,{className:"h-4 w-4 mr-1"}),"Back"]})}),(0,n.jsxs)(l.Zb,{className:"border-t-4 border-t-primary",children:[(0,n.jsxs)(l.Ol,{children:[(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(l.ll,{className:"text-2xl",children:d.title}),(0,n.jsx)(l.SZ,{className:"mt-1",children:d.description||"No description provided"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)(i.z,{variant:V?"default":"outline",size:"sm",onClick:U,className:"flex items-center gap-1",children:[(0,n.jsx)(m.Z,{className:"h-4 w-4 ".concat(V?"fill-white":"")}),(0,n.jsx)("span",{children:P})]}),(0,n.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(window.location.href),(0,b.Am)({title:"Link copied",description:"Template link copied to clipboard"})},className:"flex items-center gap-1",children:[(0,n.jsx)(f,{className:"h-4 w-4"}),"Share"]})]})]}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[d.topic&&(0,n.jsx)(o.C,{variant:"outline",className:"bg-muted/50",children:d.topic.name}),d.tags&&d.tags.map(e=>(0,n.jsx)(o.C,{variant:"secondary",className:"bg-primary/10",children:e.name},e.id)),d.isQuiz&&(0,n.jsx)(o.C,{children:"Quiz"})]})]}),d.imageUrl&&(0,n.jsx)("div",{className:"px-6",children:(0,n.jsx)("img",{src:d.imageUrl,alt:d.title,className:"w-full rounded-md object-cover max-h-64"})}),(0,n.jsxs)(N.mQ,{defaultValue:"preview",className:"px-6 py-4",children:[(0,n.jsxs)(N.dr,{children:[(0,n.jsx)(N.SP,{value:"preview",children:"Preview"}),(0,n.jsxs)(N.SP,{value:"comments",children:["Comments (",Z.length,")"]}),_&&(0,n.jsx)(N.SP,{value:"responses",children:"Responses"})]}),(0,n.jsx)(N.nU,{value:"preview",className:"mt-4",children:(0,n.jsx)("div",{className:"space-y-6",children:K.length>0?K.map((e,t)=>{let a=e.replace(/[0-9]/g,""),s=e.replace(/[^0-9]/g,"");return(0,n.jsxs)("div",{className:"p-5 bg-card border rounded-md",children:[(0,n.jsxs)("p",{className:"font-medium",children:[t+1,". ",H(a,parseInt(s,10))]}),(0,n.jsxs)("div",{className:"mt-3",children:["customString"===a&&(0,n.jsx)(y.I,{disabled:!0,placeholder:"Short text answer"}),"customText"===a&&(0,n.jsx)(w.g,{disabled:!0,placeholder:"Long text answer"}),"customInt"===a&&(0,n.jsx)(y.I,{type:"number",disabled:!0,placeholder:"Number answer"}),"customCheckbox"===a&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",disabled:!0,className:"h-4 w-4 rounded border-gray-300 cursor-not-allowed"}),(0,n.jsx)("span",{className:"ml-2 text-sm text-muted-foreground",children:"Yes/No"})]})]})]},t)}):(0,n.jsx)("p",{className:"text-muted-foreground text-center py-6",children:"No questions defined for this template."})})}),(0,n.jsx)(N.nU,{value:"comments",className:"mt-4",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("form",{onSubmit:Y,className:"space-y-3",children:[(0,n.jsx)(w.g,{placeholder:"Add your comment...",value:q,onChange:e=>M(e.target.value),disabled:F}),(0,n.jsx)(i.z,{type:"submit",disabled:!q.trim()||F,children:F?"Posting...":"Post Comment"})]}),(0,n.jsx)("div",{className:"mt-6 space-y-4",children:Z.length>0?Z.map(e=>{var t,a,s;return(0,n.jsxs)("div",{className:"border p-4 rounded-md",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,n.jsx)(k.qE,{className:"h-8 w-8",children:(0,n.jsx)(k.Q5,{children:(null===(a=e.user)||void 0===a?void 0:null===(t=a.name)||void 0===t?void 0:t[0])||"U"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:(null===(s=e.user)||void 0===s?void 0:s.name)||"Anonymous"}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:J(e.createdAt)})]})]}),(0,n.jsx)("p",{className:"text-sm",children:e.content})]},e.id)}):(0,n.jsx)("p",{className:"text-center text-muted-foreground py-4",children:"No comments yet. Be the first to comment!"})})]})}),_&&(0,n.jsx)(N.nU,{value:"responses",className:"mt-4",children:(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("h3",{className:"text-lg font-medium mb-2",children:"View Form Responses"}),(0,n.jsx)("p",{className:"text-muted-foreground mb-4",children:"Access all responses submitted to this form"}),(0,n.jsx)(i.z,{onClick:B,children:"View Responses"})]})})]}),(0,n.jsxs)(l.eW,{className:"flex flex-wrap gap-2 justify-between",children:[(0,n.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,n.jsx)(i.z,{onClick:()=>{if(!Q){(0,b.Am)({title:"Authentication required",description:"Please log in to fill out this form"}),W.push("/auth/login?redirect=/templates/".concat(a,"/fill"));return}W.push("/templates/".concat(a,"/fill"))},children:"Fill in Form"}),(0,n.jsxs)(i.z,{variant:"outline",onClick:B,className:"flex items-center gap-2",children:[(0,n.jsx)(h.Z,{className:"h-4 w-4"}),"View Responses"]})]}),_&&(0,n.jsx)("div",{children:(0,n.jsx)(i.z,{variant:"outline",asChild:!0,children:(0,n.jsxs)(S.default,{href:"/templates/".concat(d.id,"/edit"),children:[(0,n.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Edit Template"]})})})]})]})]})}},6246:function(e,t,a){"use strict";a.d(t,{F$:function(){return o},Q5:function(){return c},qE:function(){return l}});var n=a(7437),s=a(2265),r=a(1146),i=a(3448);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.fC,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...s})});l.displayName=r.fC.displayName;let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.Ee,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",a),...s})});o.displayName=r.Ee.displayName;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.NY,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...s})});c.displayName=r.NY.displayName},7168:function(e,t,a){"use strict";a.d(t,{SP:function(){return c},dr:function(){return o},mQ:function(){return l},nU:function(){return d}});var n=a(7437),s=a(2265),r=a(271),i=a(3448);let l=r.fC,o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...s})});o.displayName=r.aV.displayName;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...s})});c.displayName=r.xz.displayName;let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.VY,{ref:t,className:(0,i.cn)("ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});d.displayName=r.VY.displayName},3675:function(e,t,a){"use strict";a.d(t,{g:function(){return i}});var n=a(7437),s=a(2265),r=a(3448);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...s})});i.displayName="Textarea"},1146:function(e,t,a){"use strict";a.d(t,{NY:function(){return k},Ee:function(){return w},fC:function(){return y}});var n=a(2265),s=a(3966),r=a(6606),i=a(1188),l=a(6840),o=a(2558);function c(){return()=>{}}var d=a(7437),u="Avatar",[m,f]=(0,s.b)(u),[h,p]=m(u),x=n.forwardRef((e,t)=>{let{__scopeAvatar:a,...s}=e,[r,i]=n.useState("idle");return(0,d.jsx)(h,{scope:a,imageLoadingStatus:r,onImageLoadingStatusChange:i,children:(0,d.jsx)(l.WV.span,{...s,ref:t})})});x.displayName=u;var v="AvatarImage",g=n.forwardRef((e,t)=>{let{__scopeAvatar:a,src:s,onLoadingStatusChange:u=()=>{},...m}=e,f=p(v,a),h=function(e,t){let{referrerPolicy:a,crossOrigin:s}=t,r=(0,o.useSyncExternalStore)(c,()=>!0,()=>!1),l=n.useRef(null),d=r?(l.current||(l.current=new window.Image),l.current):null,[u,m]=n.useState(()=>N(d,e));return(0,i.b)(()=>{m(N(d,e))},[d,e]),(0,i.b)(()=>{let e=e=>()=>{m(e)};if(!d)return;let t=e("loaded"),n=e("error");return d.addEventListener("load",t),d.addEventListener("error",n),a&&(d.referrerPolicy=a),"string"==typeof s&&(d.crossOrigin=s),()=>{d.removeEventListener("load",t),d.removeEventListener("error",n)}},[d,s,a]),u}(s,m),x=(0,r.W)(e=>{u(e),f.onImageLoadingStatusChange(e)});return(0,i.b)(()=>{"idle"!==h&&x(h)},[h,x]),"loaded"===h?(0,d.jsx)(l.WV.img,{...m,ref:t,src:s}):null});g.displayName=v;var j="AvatarFallback",b=n.forwardRef((e,t)=>{let{__scopeAvatar:a,delayMs:s,...r}=e,i=p(j,a),[o,c]=n.useState(void 0===s);return n.useEffect(()=>{if(void 0!==s){let e=window.setTimeout(()=>c(!0),s);return()=>window.clearTimeout(e)}},[s]),o&&"loaded"!==i.imageLoadingStatus?(0,d.jsx)(l.WV.span,{...r,ref:t}):null});function N(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}b.displayName=j;var y=x,w=g,k=b},271:function(e,t,a){"use strict";a.d(t,{VY:function(){return V},aV:function(){return T},fC:function(){return A},xz:function(){return z}});var n=a(2265),s=a(6741),r=a(3966),i=a(1353),l=a(1599),o=a(6840),c=a(9114),d=a(886),u=a(9255),m=a(7437),f="Tabs",[h,p]=(0,r.b)(f,[i.Pc]),x=(0,i.Pc)(),[v,g]=h(f),j=n.forwardRef((e,t)=>{let{__scopeTabs:a,value:n,onValueChange:s,defaultValue:r,orientation:i="horizontal",dir:l,activationMode:h="automatic",...p}=e,x=(0,c.gm)(l),[g,j]=(0,d.T)({prop:n,onChange:s,defaultProp:null!=r?r:"",caller:f});return(0,m.jsx)(v,{scope:a,baseId:(0,u.M)(),value:g,onValueChange:j,orientation:i,dir:x,activationMode:h,children:(0,m.jsx)(o.WV.div,{dir:x,"data-orientation":i,...p,ref:t})})});j.displayName=f;var b="TabsList",N=n.forwardRef((e,t)=>{let{__scopeTabs:a,loop:n=!0,...s}=e,r=g(b,a),l=x(a);return(0,m.jsx)(i.fC,{asChild:!0,...l,orientation:r.orientation,dir:r.dir,loop:n,children:(0,m.jsx)(o.WV.div,{role:"tablist","aria-orientation":r.orientation,...s,ref:t})})});N.displayName=b;var y="TabsTrigger",w=n.forwardRef((e,t)=>{let{__scopeTabs:a,value:n,disabled:r=!1,...l}=e,c=g(y,a),d=x(a),u=C(c.baseId,n),f=E(c.baseId,n),h=n===c.value;return(0,m.jsx)(i.ck,{asChild:!0,...d,focusable:!r,active:h,children:(0,m.jsx)(o.WV.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":f,"data-state":h?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:u,...l,ref:t,onMouseDown:(0,s.M)(e.onMouseDown,e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(n)}),onKeyDown:(0,s.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(n)}),onFocus:(0,s.M)(e.onFocus,()=>{let e="manual"!==c.activationMode;h||r||!e||c.onValueChange(n)})})})});w.displayName=y;var k="TabsContent",S=n.forwardRef((e,t)=>{let{__scopeTabs:a,value:s,forceMount:r,children:i,...c}=e,d=g(k,a),u=C(d.baseId,s),f=E(d.baseId,s),h=s===d.value,p=n.useRef(h);return n.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,m.jsx)(l.z,{present:r||h,children:a=>{let{present:n}=a;return(0,m.jsx)(o.WV.div,{"data-state":h?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!n,id:f,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:n&&i})}})});function C(e,t){return"".concat(e,"-trigger-").concat(t)}function E(e,t){return"".concat(e,"-content-").concat(t)}S.displayName=k;var A=j,T=N,z=w,V=S}},function(e){e.O(0,[284,464,972,513,714,971,117,744],function(){return e(e.s=1392)}),_N_E=e.O()}]);