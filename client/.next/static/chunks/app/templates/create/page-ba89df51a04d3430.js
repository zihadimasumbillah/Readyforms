(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{9032:function(e,t,s){Promise.resolve().then(s.bind(s,241))},5863:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},241:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(7437),i=s(2265),l=s(9376),n=s(6861),r=s(154),c=s(4881),o=s(8752),d=s(1945),u=s(8246),m=s(5863);function p(){let[e,t]=(0,i.useState)([]),[s,p]=(0,i.useState)(!0),[h,f]=(0,i.useState)(!1),x=(0,l.useRouter)(),v=(0,c.a)(),y=null==v?void 0:v.user;(0,i.useEffect)(()=>{let e=async()=>{try{p(!0);let e=await r.wE.getAllTopics();t(e)}catch(e){console.error("Error fetching topics:",e),(0,o.Am)({title:"Error",description:"Failed to load topics. Please try again.",variant:"destructive"})}finally{p(!1)}};y?e():x.push("/auth/login")},[y,x]);let g=async e=>{try{f(!0);let t=await n.t.createTemplate(e);(0,o.Am)({title:"Success",description:"Template created successfully."}),x.push("/templates/".concat(t.id))}catch(e){var t,s;console.error("Error creating template:",e),(0,o.Am)({title:"Error",description:(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to create template. Please try again.",variant:"destructive"})}finally{f(!1)}};return y?(0,a.jsxs)(d.c,{user:{name:y.name||"",email:y.email||"",isAdmin:y.isAdmin||!1},onLogout:()=>{(null==v?void 0:v.logout)&&(v.logout(),x.push("/auth/login"))},children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Create Template"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Design your form template"})]}),(0,a.jsx)("div",{className:"space-y-8",children:s?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsx)(m.Z,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("p",{children:"Loading topics..."})]})}):(0,a.jsx)(u.O,{topics:e,handleSave:g,handleCancel:()=>{x.push("/dashboard/templates")},isSubmitting:h})})]}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsx)(m.Z,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("p",{children:"Loading..."})]})})}}},function(e){e.O(0,[834,360,541,64,221,439,936,32,961,275,971,117,744],function(){return e(e.s=9032)}),_N_E=e.O()}]);