(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{9032:function(e,t,r){Promise.resolve().then(r.bind(r,241))},241:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y},dynamic:function(){return j},dynamicParams:function(){return b}});var s=r(7437),a=r(2265),i=r(9820),n=r(2381),l=r(5462),c=r(2506),o=r(6861),d=r(154),u=r(9376),m=r(8752),h=r(4881),p=r(2451),f=r(7648),x=r(4539);let j="force-dynamic",b=!0;function y(){let[e,t]=(0,a.useState)([]),[r,j]=(0,a.useState)(!0),b=(0,u.useRouter)(),y=(0,h.a)(),v=null==y?void 0:y.user,N=(0,x.s)();(0,a.useEffect)(()=>{let e=async()=>{try{j(!0);let e=await d.wE.getAllTopics();t(e)}catch(e){console.error("Error fetching topics:",e),(0,m.Am)({title:"Error",description:"Failed to load topics. Please try again.",variant:"destructive"})}finally{j(!1)}};N&&e()},[N]);let w=async e=>{try{if(!v){(0,m.Am)({title:"Authentication required",description:"Please log in to create a template",variant:"destructive"}),b.push("/auth/login");return}if(!Object.keys(e).some(t=>t.endsWith("State")&&!0===e[t])){(0,m.Am)({title:"Validation Error",description:"Please add at least one question to your template",variant:"destructive"});return}let t=await o.ZP.createTemplate(e);(0,m.Am)({title:"Success",description:"Template created successfully"}),b.push("/templates/".concat(t.id))}catch(e){console.error("Error creating template:",e),(0,m.Am)({title:"Error",description:"Failed to create template. Please try again.",variant:"destructive"})}};return((0,a.useEffect)(()=>{N&&!v&&b.push("/auth/login")},[N,v,b]),N)?v?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.w,{}),(0,s.jsxs)("main",{className:"container py-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)(n.z,{variant:"outline",size:"icon",className:"mr-4",asChild:!0,children:(0,s.jsx)(f.default,{href:"/dashboard/templates",children:(0,s.jsx)(p.Z,{className:"h-4 w-4"})})}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Create Template"})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{children:[(0,s.jsx)(i.ll,{children:"New Template"}),(0,s.jsx)(i.SZ,{children:"Create a new form template with custom questions"})]}),(0,s.jsx)(i.aY,{children:r?(0,s.jsx)("div",{className:"flex justify-center p-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):(0,s.jsx)(l.O,{topics:e,onSubmit:w,isEditMode:!1,submitButtonLabel:"Create Template"})})]})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.w,{}),(0,s.jsx)("main",{className:"container py-6",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-[60vh]",children:[(0,s.jsx)("p",{className:"text-center mb-4",children:"Authentication required. Redirecting to login page..."}),(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})]})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.w,{}),(0,s.jsx)("main",{className:"container py-6",children:(0,s.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})})]})}}},function(e){e.O(0,[310,521,448,617,564,80,478,663,348,328,598,412,462,971,117,744],function(){return e(e.s=9032)}),_N_E=e.O()}]);