(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{9426:function(e,t,s){Promise.resolve().then(s.bind(s,7955))},6858:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},8736:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},8997:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},5466:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},7692:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3417:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},285:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},8728:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3578:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]])},2369:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4369:function(e,t,s){"use strict";var a=s(2265),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=a.useState,l=a.useEffect,i=a.useLayoutEffect,c=a.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!r(e,s)}catch(e){return!0}}var o="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),a=n({inst:{value:s,getSnapshot:t}}),r=a[0].inst,o=a[1];return i(function(){r.value=s,r.getSnapshot=t,d(r)&&o({inst:r})},[e,s,t]),l(function(){return d(r)&&o({inst:r}),e(function(){d(r)&&o({inst:r})})},[e]),c(s),s};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:o},2558:function(e,t,s){"use strict";e.exports=s(4369)},7955:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var a=s(7437),r=s(2265),n=s(2573),l=s(9136),i=s(9820),c=s(2381),d=s(7802),o=s(9140),u=s(7648),m=s(4881),h=s(285),x=s(8736),f=s(3417),y=s(8997),j=s(6858);let p=(0,s(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);var v=s(1723),g=s(3578),w=s(9376),N=s(8752);function b(){let[e,t]=(0,r.useState)(!0),[s,b]=(0,r.useState)({templates:0,responses:0,likes:0,comments:0}),[k,Z]=(0,r.useState)([]),S=(0,m.a)(),C=null==S?void 0:S.user,z=null==S?void 0:S.logout,A=(0,w.useRouter)();if((0,r.useEffect)(()=>{let e=async()=>{try{t(!0);let e=await d.P.getUserStats();b(e);let s=(await d.P.getUserTemplates()).filter(e=>{var t,s;let a=(null==e?void 0:null===(t=e.title)||void 0===t?void 0:t.toLowerCase())||"",r=(null==e?void 0:null===(s=e.description)||void 0===s?void 0:s.toLowerCase())||"";return!(a.includes("test template")||a.includes("updated template")||r.includes("created by api")||r.includes("admin-template-test"))});Z(s.slice(0,5))}catch(e){console.error("Error fetching dashboard data:",e),(0,N.Am)({title:"Error loading dashboard",description:"Failed to load your dashboard data. Please try again.",variant:"destructive"})}finally{t(!1)}};C?e():A.push("/auth/login")},[C,A]),!C)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Loading your dashboard"}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})]})});let E=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(t)};return(0,a.jsxs)(n.c,{user:{name:C.name||"User",email:C.email||"user@example.com",isAdmin:C.isAdmin||!1},onLogout:()=>{z&&(z(),A.push("/auth/login"))},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold",children:["Welcome, ",C.name,"!"]}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage your forms and view responses all in one place."})]}),(0,a.jsxs)(c.z,{onClick:()=>A.push("/templates/create"),children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Create Template"]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8",children:[(0,a.jsx)(l.R,{title:"Total Templates",value:s.templates,icon:(0,a.jsx)(x.Z,{className:"h-4 w-4"}),loading:e}),(0,a.jsx)(l.R,{title:"Form Responses",value:s.responses,icon:(0,a.jsx)(f.Z,{className:"h-4 w-4"}),loading:e}),(0,a.jsx)(l.R,{title:"Likes Received",value:s.likes,icon:(0,a.jsx)(y.Z,{className:"h-4 w-4"}),loading:e}),(0,a.jsx)(l.R,{title:"Comments",value:s.comments,icon:(0,a.jsx)(f.Z,{className:"h-4 w-4"}),loading:e})]}),(0,a.jsxs)(i.Zb,{className:"mb-8",children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.ll,{className:"text-xl",children:"Recent Templates"}),(0,a.jsx)(i.SZ,{children:"Your recently created form templates"})]}),k.length>0&&(0,a.jsx)(c.z,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsxs)(u.default,{href:"/dashboard/templates",children:["View All ",(0,a.jsx)(j.Z,{className:"ml-1 h-4 w-4"})]})})]}),(0,a.jsx)(i.aY,{children:e?(0,a.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(o.O,{className:"h-14 w-full"},t))}):k.length>0?(0,a.jsx)("div",{className:"divide-y",children:k.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-4 first:pt-0 last:pb-0",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"font-medium hover:text-primary",children:(0,a.jsx)(u.default,{href:"/templates/".concat(e.id),className:"hover:underline",children:e.title})}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p,{className:"h-3.5 w-3.5 mr-1"}),E(e.createdAt)]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f.Z,{className:"h-3.5 w-3.5 mr-1"}),e.responsesCount||0," responses"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.z,{size:"sm",variant:"secondary",asChild:!0,children:(0,a.jsx)(u.default,{href:"/templates/".concat(e.id),children:"View"})}),(0,a.jsx)(c.z,{size:"sm",variant:"outline",asChild:!0,children:(0,a.jsx)(u.default,{href:"/templates/".concat(e.id,"/edit"),children:"Edit"})})]})]},e.id))}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,a.jsx)(x.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"No templates yet"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Create your first form template to get started"}),(0,a.jsx)(c.z,{asChild:!0,children:(0,a.jsxs)(u.default,{href:"/templates/create",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Create Template"]})})]})})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{className:"text-xl",children:"Recent Activity"}),(0,a.jsx)(i.SZ,{children:"Latest responses and interactions"})]}),(0,a.jsx)(i.aY,{children:e?(0,a.jsx)("div",{className:"space-y-3",children:[,,,].fill(0).map((e,t)=>(0,a.jsx)(o.O,{className:"h-14 w-full"},t))}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 p-3 rounded-md border",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,a.jsx)(v.Z,{className:"h-5 w-5 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Activity feed coming soon"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"We're working on showing your recent activity here"})]})]}),(0,a.jsx)(c.z,{variant:"outline",className:"w-full",asChild:!0,children:(0,a.jsx)(u.default,{href:"/dashboard/activity",children:"View All Activity"})})]})})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{className:"text-xl",children:"Quick Actions"}),(0,a.jsx)(i.SZ,{children:"Common tasks and actions"})]}),(0,a.jsxs)(i.aY,{className:"grid gap-4",children:[(0,a.jsx)(c.z,{className:"justify-start",variant:"outline",asChild:!0,children:(0,a.jsxs)(u.default,{href:"/templates/create",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),(0,a.jsx)("span",{children:"Create New Template"})]})}),(0,a.jsx)(c.z,{className:"justify-start",variant:"outline",asChild:!0,children:(0,a.jsxs)(u.default,{href:"/dashboard/responses",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),(0,a.jsx)("span",{children:"View Form Responses"})]})}),(0,a.jsx)(c.z,{className:"justify-start",variant:"outline",asChild:!0,children:(0,a.jsxs)(u.default,{href:"/templates",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),(0,a.jsx)("span",{children:"Browse Template Library"})]})}),C.isAdmin&&(0,a.jsx)(c.z,{className:"justify-start",variant:"outline",asChild:!0,children:(0,a.jsxs)(u.default,{href:"/admin",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),(0,a.jsx)("span",{children:"Admin Dashboard"})]})})]})]})]})]})}},9136:function(e,t,s){"use strict";s.d(t,{R:function(){return i}});var a=s(7437),r=s(9820),n=s(3448),l=s(9140);function i(e){let{title:t,value:s,icon:i,description:c,loading:d=!1,trend:o,className:u}=e;return(0,a.jsxs)(r.Zb,{className:(0,n.cn)("overflow-hidden",u),children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:d?(0,a.jsx)(l.O,{className:"h-4 w-24"}):t}),d?(0,a.jsx)(l.O,{className:"h-8 w-8 rounded-full"}):(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center",children:i})]}),(0,a.jsx)(r.aY,{children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.O,{className:"h-7 w-20 mb-1"}),c&&(0,a.jsx)(l.O,{className:"h-4 w-32"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s}),(c||o)&&(0,a.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[o&&(0,a.jsxs)("span",{className:(0,n.cn)("mr-1 font-medium",o.isPositive?"text-green-600":"text-red-600"),children:[o.isPositive?"+":"",o.value,"%"]}),c&&(0,a.jsx)("span",{children:c})]})]})})]})}},9140:function(e,t,s){"use strict";s.d(t,{O:function(){return n}});var a=s(7437),r=s(3448);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",t),...s})}},7802:function(e,t,s){"use strict";s.d(t,{P:function(){return r}});var a=s(9642);let r={async getUserStats(){try{return(await a.Z.get("/dashboard/stats")).data}catch(e){throw console.error("Failed to fetch user stats:",e),e}},async getRecentActivity(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;try{return(await a.Z.get("/dashboard/recent?limit=".concat(e))).data}catch(e){throw console.error("Failed to fetch recent activity:",e),e}},async getUserTemplates(){try{return(await a.Z.get("/dashboard/templates")).data}catch(e){throw console.error("Failed to fetch user templates:",e),e}},async getUserResponses(){try{return(await a.Z.get("/dashboard/responses")).data}catch(e){throw console.error("Failed to fetch user responses:",e),e}},async deleteTemplate(e,t){try{await a.Z.delete("/templates/".concat(e),{data:{version:t}})}catch(t){throw console.error("Failed to delete template ".concat(e,":"),t),t}}}},1146:function(e,t,s){"use strict";s.d(t,{NY:function(){return k},Ee:function(){return b},fC:function(){return N}});var a=s(2265),r=s(3966),n=s(6606),l=s(1188),i=s(6840),c=s(2558);function d(){return()=>{}}var o=s(7437),u="Avatar",[m,h]=(0,r.b)(u),[x,f]=m(u),y=a.forwardRef((e,t)=>{let{__scopeAvatar:s,...r}=e,[n,l]=a.useState("idle");return(0,o.jsx)(x,{scope:s,imageLoadingStatus:n,onImageLoadingStatusChange:l,children:(0,o.jsx)(i.WV.span,{...r,ref:t})})});y.displayName=u;var j="AvatarImage",p=a.forwardRef((e,t)=>{let{__scopeAvatar:s,src:r,onLoadingStatusChange:u=()=>{},...m}=e,h=f(j,s),x=function(e,t){let{referrerPolicy:s,crossOrigin:r}=t,n=(0,c.useSyncExternalStore)(d,()=>!0,()=>!1),i=a.useRef(null),o=n?(i.current||(i.current=new window.Image),i.current):null,[u,m]=a.useState(()=>w(o,e));return(0,l.b)(()=>{m(w(o,e))},[o,e]),(0,l.b)(()=>{let e=e=>()=>{m(e)};if(!o)return;let t=e("loaded"),a=e("error");return o.addEventListener("load",t),o.addEventListener("error",a),s&&(o.referrerPolicy=s),"string"==typeof r&&(o.crossOrigin=r),()=>{o.removeEventListener("load",t),o.removeEventListener("error",a)}},[o,r,s]),u}(r,m),y=(0,n.W)(e=>{u(e),h.onImageLoadingStatusChange(e)});return(0,l.b)(()=>{"idle"!==x&&y(x)},[x,y]),"loaded"===x?(0,o.jsx)(i.WV.img,{...m,ref:t,src:r}):null});p.displayName=j;var v="AvatarFallback",g=a.forwardRef((e,t)=>{let{__scopeAvatar:s,delayMs:r,...n}=e,l=f(v,s),[c,d]=a.useState(void 0===r);return a.useEffect(()=>{if(void 0!==r){let e=window.setTimeout(()=>d(!0),r);return()=>window.clearTimeout(e)}},[r]),c&&"loaded"!==l.imageLoadingStatus?(0,o.jsx)(i.WV.span,{...n,ref:t}):null});function w(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}g.displayName=v;var N=y,b=p,k=g}},function(e){e.O(0,[284,464,972,513,832,331,128,713,582,971,117,744],function(){return e(e.s=9426)}),_N_E=e.O()}]);