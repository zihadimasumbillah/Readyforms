(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7873],{4296:function(e,t,s){Promise.resolve().then(s.bind(s,7016))},2252:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5302:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6744:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},7016:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(7437),r=s(2265),n=s(1945),c=s(9820),i=s(2381),l=s(9174),o=s(8752),u=s(9140),d=s(6744),m=s(5302),h=s(2252),p=s(4881),f=s(9376),x=s(5493);let y={async getStatus(){try{let e=await x.Z.get("/health/status");return{success:!0,status:e.data.status||"up",message:e.data.message,timestamp:new Date}}catch(e){return console.error("Failed to fetch health status:",e),{success:!1,status:"down",error:e.message,timestamp:new Date}}},async checkCors(){try{let e=await x.Z.get("/health/cors");return{success:!0,corsStatus:e.data.corsStatus,status:"up",timestamp:new Date}}catch(e){return console.error("CORS check failed:",e),{success:!1,status:"down",error:e.message,timestamp:new Date}}},async ping(){try{let e=await x.Z.get("/ping");return{success:!0,status:"up",message:e.data.message,timestamp:e.data.timestamp}}catch(e){return console.error("API ping failed:",e),{success:!1,status:"down",error:e.message,timestamp:new Date}}},async checkHealth(){try{let e=performance.now(),t=await this.getStatus().catch(e=>({success:!1,status:"down",error:e.message,timestamp:new Date})),s=performance.now(),a=Math.round(s-e),r=await this.checkCors().catch(e=>({success:!1,status:"down",error:e.message,timestamp:new Date}));return{status:t.success&&r.success?"ok":"error",services:{api:{status:a<5e3?"ok":"error",ping:a},database:{status:t.success&&("up"===t.status||"healthy"===t.status)?"ok":"error",error:t.error},cors:{status:r.success?"ok":"error",error:r.error}},timestamp:new Date}}catch(e){return console.error("Health check failed:",e),{status:"error",services:{api:{status:"error",error:e.message},database:{status:"error"},cors:{status:"error"}},timestamp:new Date}}},async checkEndpoints(){try{let e=await x.Z.get("/health/endpoints");return{success:!0,status:e.data.status||"healthy",endpoints:e.data.endpoints||{},timestamp:new Date,message:e.data.message||"API endpoints check completed"}}catch(e){return console.error("Endpoints check failed:",e),{success:!1,status:"unhealthy",endpoints:{api:{status:"down",error:e.message}},timestamp:new Date,message:"Failed to check API endpoints"}}}};function g(){let[e,t]=(0,r.useState)(!0),[s,x]=(0,r.useState)(!1),[g,k]=(0,r.useState)(null),w=(0,p.a)(),v=(0,f.useRouter)(),j=null==w?void 0:w.user,b=null==w?void 0:w.logout,N=async()=>{try{x(!0);let e=await y.checkEndpoints();k(e),"healthy"===e.status?(0,o.Am)({title:"Health Check Successful",description:"All systems are operational"}):(0,o.Am)({title:"Health Check Warning",description:"Some systems may not be functioning properly",variant:"destructive"})}catch(e){console.error("Error checking API health:",e),(0,o.Am)({title:"Health Check Failed",description:"Unable to complete the health check",variant:"destructive"})}finally{x(!1),t(!1)}};return((0,r.useEffect)(()=>{N()},[]),(0,r.useEffect)(()=>{j&&!j.isAdmin&&((0,o.Am)({title:"Access Denied",description:"You must be an administrator to view this page",variant:"destructive"}),v.push("/dashboard"))},[j,v]),j)?(0,a.jsxs)(n.c,{user:{name:j.name||"Admin",email:j.email||"admin@example.com",isAdmin:j.isAdmin||!1},onLogout:()=>{b&&(b(),v.push("/auth/login"))},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"API System Status"}),(0,a.jsxs)(i.z,{onClick:N,disabled:s,children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2 ".concat(s?"animate-spin":"")}),"Refresh"]})]}),(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsx)(c.ll,{children:"API Endpoints"}),(0,a.jsx)(c.SZ,{children:"Health status of essential API endpoints"})]}),(0,a.jsx)(c.aY,{children:e?(0,a.jsx)("div",{className:"space-y-3",children:[,,,].fill(0).map((e,t)=>(0,a.jsx)(u.O,{className:"h-12 w-full"},t))}):(null==g?void 0:g.endpoints)&&Object.keys(g.endpoints).length>0?(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(g.endpoints).map((e,t)=>{let[s,r]=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 border rounded-md",children:[(0,a.jsxs)("div",{className:"flex items-center",children:["up"===r.status?(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2 text-green-600"}):(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2 text-red-600"}),(0,a.jsx)("span",{className:"font-medium",children:s})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l.C,{variant:"up"===r.status?"outline":"destructive",children:"up"===r.status?"Healthy":"Unhealthy"}),r.responseTime&&(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[r.responseTime,"ms"]})]})]},t)})}):(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"No endpoint data available"})})})]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Loading"}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})]})})}y.checkHealth},9140:function(e,t,s){"use strict";s.d(t,{O:function(){return n}});var a=s(7437),r=s(3448);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",t),...s})}}},function(e){e.O(0,[6284,3464,2972,6052,3534,9128,1713,8439,8032,7961,2971,2117,1744],function(){return e(e.s=4296)}),_N_E=e.O()}]);