(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[489],{85802:function(e,t,a){Promise.resolve().then(a.bind(a,67851))},60285:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(39763).Z)("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},67851:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var n=a(57437),r=a(2265),i=a(99376),s=a(53667),l=a(12381),o=a(79820),c=a(17168),d=a(50935),u=a(29501),m=a(60285),f=a(5894),p=a(59435),g=a(18752);function x(e){let{params:t}=e,a=(0,f.a)(),x=null==a?void 0:a.user,v=null==a?void 0:a.logout,h=(0,i.useRouter)(),[y,b]=(0,r.useState)("general"),[w,j]=(0,r.useState)(!0),[N,T]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=async()=>{try{j(!0);let e=await p.d.getTemplateById(t.id);T(e)}catch(e){console.error("Error fetching template:",e),(0,g.Am)({title:"Error",description:"Failed to load template data.",variant:"destructive"})}finally{j(!1)}};x?e():h.push("/auth/login")},[t.id,x,h]);let S=e=>{console.log("Adding new question of type: ".concat(e))},Z=e=>{if(!N)return 0;let t=0;return"String"===e?(N.customString1State&&t++,N.customString2State&&t++,N.customString3State&&t++,N.customString4State&&t++):"Text"===e&&(N.customText1State&&t++,N.customText2State&&t++,N.customText3State&&t++,N.customText4State&&t++),t};return!x||w?(0,n.jsx)("div",{children:"Loading..."}):(0,n.jsxs)(s.c,{user:{name:(null==x?void 0:x.name)||"Admin User",email:(null==x?void 0:x.email)||"admin@example.com",isAdmin:!0},onLogout:()=>{v&&(v(),h.push("/auth/login"))},children:[(0,n.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,n.jsx)("h1",{className:"text-2xl font-bold",children:w?"Loading...":"Edit Template: ".concat(null==N?void 0:N.title)})}),(0,n.jsxs)(c.mQ,{defaultValue:"general",value:y,onValueChange:b,children:[(0,n.jsxs)(c.dr,{className:"mb-4",children:[(0,n.jsx)(c.SP,{value:"general",children:"General"}),(0,n.jsx)(c.SP,{value:"questions",children:"Questions"})]}),(0,n.jsx)(c.nU,{value:"general",children:(0,n.jsx)(o.Zb,{children:(0,n.jsx)(o.aY,{children:(0,n.jsx)(d.l0,{...(0,u.cI)(),children:(0,n.jsx)("div",{className:"space-y-4"})})})})}),(0,n.jsx)(c.nU,{value:"questions",children:(0,n.jsx)(o.Zb,{children:(0,n.jsx)(o.Ol,{children:(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(o.ll,{children:"Questions"}),(0,n.jsx)(o.SZ,{children:"Configure and reorder the questions in this template"})]}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,n.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>S("String"),disabled:Z("String")>=4,className:"gap-1",children:[(0,n.jsx)(m.Z,{className:"h-3.5 w-3.5"}),"Add Text Field"]}),(0,n.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>S("Text"),disabled:Z("Text")>=4,className:"gap-1",children:[(0,n.jsx)(m.Z,{className:"h-3.5 w-3.5"}),"Add Text Area"]})]})]})})})})]})]})}},50935:function(e,t,a){"use strict";a.d(t,{l0:function(){return u},NI:function(){return h},pf:function(){return y},Wi:function(){return f},xJ:function(){return x},lX:function(){return v},zG:function(){return b}});var n=a(57437),r=a(2265),i=a(37053),s=a(29501),l=a(93448),o=a(6394);let c=(0,a(90535).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(o.f,{ref:t,className:(0,l.cn)(c(),a),...r})});d.displayName=o.f.displayName;let u=s.RV,m=r.createContext({}),f=e=>{let{...t}=e;return(0,n.jsx)(m.Provider,{value:{name:t.name},children:(0,n.jsx)(s.Qr,{...t})})},p=()=>{let e=r.useContext(m),t=r.useContext(g),{getFieldState:a,formState:n}=(0,s.Gc)(),i=a(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...i}},g=r.createContext({}),x=r.forwardRef((e,t)=>{let{className:a,...i}=e,s=r.useId();return(0,n.jsx)(g.Provider,{value:{id:s},children:(0,n.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",a),...i})})});x.displayName="FormItem";let v=r.forwardRef((e,t)=>{let{className:a,...r}=e,{error:i,formItemId:s}=p();return(0,n.jsx)(d,{ref:t,className:(0,l.cn)(i&&"text-destructive",a),htmlFor:s,...r})});v.displayName="FormLabel";let h=r.forwardRef((e,t)=>{let{...a}=e,{error:r,formItemId:s,formDescriptionId:l,formMessageId:o}=p();return(0,n.jsx)(i.g7,{ref:t,id:s,"aria-describedby":r?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!r,...a})});h.displayName="FormControl";let y=r.forwardRef((e,t)=>{let{className:a,...r}=e,{formDescriptionId:i}=p();return(0,n.jsx)("p",{ref:t,id:i,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});y.displayName="FormDescription";let b=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e,{error:s,formMessageId:o}=p(),c=s?String(null==s?void 0:s.message):r;return c?(0,n.jsx)("p",{ref:t,id:o,className:(0,l.cn)("text-sm font-medium text-destructive",a),...i,children:c}):null});b.displayName="FormMessage"},17168:function(e,t,a){"use strict";a.d(t,{SP:function(){return c},dr:function(){return o},mQ:function(){return l},nU:function(){return d}});var n=a(57437),r=a(2265),i=a(20271),s=a(93448);let l=i.fC,o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(i.aV,{ref:t,className:(0,s.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});o.displayName=i.aV.displayName;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(i.xz,{ref:t,className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});c.displayName=i.xz.displayName;let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(i.VY,{ref:t,className:(0,s.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});d.displayName=i.VY.displayName},59435:function(e,t,a){"use strict";a.d(t,{d:function(){return r}});var n=a(95493);let r={getAllUsers:async()=>(await n.Z.get("/admin/users")).data,toggleUserBlock:async e=>(await n.Z.put("/admin/users/".concat(e,"/block"))).data.user,toggleUserAdmin:async e=>(await n.Z.put("/admin/users/".concat(e,"/admin"))).data.user,getAllTemplates:async()=>(await n.Z.get("/admin/templates")).data,async getTopTemplates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return(await n.Z.get("/admin/templates/top?limit=".concat(e))).data},getTemplateById:async e=>(await n.Z.get("/admin/templates/".concat(e))).data,updateTemplate:async(e,t)=>(await n.Z.put("/admin/templates/".concat(e),t)).data,deleteTemplate:async e=>(await n.Z.delete("/admin/templates/".concat(e))).data,getDashboardStats:async()=>(await n.Z.get("/admin/stats")).data,getAllFormResponses:async()=>(await n.Z.get("/admin/responses")).data,getAllAdminUsers:async()=>(await n.Z.get("/admin/users")).data,getAllTopics:async()=>(await n.Z.get("/admin/topics")).data,createTopic:async(e,t)=>(await n.Z.post("/admin/topics",{name:e,description:t})).data,updateTopic:async(e,t)=>(await n.Z.put("/admin/topics/".concat(e),t)).data,async getSystemActivity(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return(await n.Z.get("/admin/activity?limit=".concat(e))).data},getRecentTemplates:async()=>(await n.Z.get("/admin/templates/recent")).data,getRecentResponses:async()=>(await n.Z.get("/admin/responses/recent")).data}},6394:function(e,t,a){"use strict";a.d(t,{f:function(){return l}});var n=a(2265),r=a(66840),i=a(57437),s=n.forwardRef((e,t)=>(0,i.jsx)(r.WV.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var l=s},20271:function(e,t,a){"use strict";a.d(t,{VY:function(){return A},aV:function(){return V},fC:function(){return R},xz:function(){return k}});var n=a(2265),r=a(6741),i=a(73966),s=a(1353),l=a(71599),o=a(66840),c=a(29114),d=a(80886),u=a(99255),m=a(57437),f="Tabs",[p,g]=(0,i.b)(f,[s.Pc]),x=(0,s.Pc)(),[v,h]=p(f),y=n.forwardRef((e,t)=>{let{__scopeTabs:a,value:n,onValueChange:r,defaultValue:i,orientation:s="horizontal",dir:l,activationMode:p="automatic",...g}=e,x=(0,c.gm)(l),[h,y]=(0,d.T)({prop:n,onChange:r,defaultProp:null!=i?i:"",caller:f});return(0,m.jsx)(v,{scope:a,baseId:(0,u.M)(),value:h,onValueChange:y,orientation:s,dir:x,activationMode:p,children:(0,m.jsx)(o.WV.div,{dir:x,"data-orientation":s,...g,ref:t})})});y.displayName=f;var b="TabsList",w=n.forwardRef((e,t)=>{let{__scopeTabs:a,loop:n=!0,...r}=e,i=h(b,a),l=x(a);return(0,m.jsx)(s.fC,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:n,children:(0,m.jsx)(o.WV.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:t})})});w.displayName=b;var j="TabsTrigger",N=n.forwardRef((e,t)=>{let{__scopeTabs:a,value:n,disabled:i=!1,...l}=e,c=h(j,a),d=x(a),u=Z(c.baseId,n),f=C(c.baseId,n),p=n===c.value;return(0,m.jsx)(s.ck,{asChild:!0,...d,focusable:!i,active:p,children:(0,m.jsx)(o.WV.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":f,"data-state":p?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...l,ref:t,onMouseDown:(0,r.M)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(n)}),onKeyDown:(0,r.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(n)}),onFocus:(0,r.M)(e.onFocus,()=>{let e="manual"!==c.activationMode;p||i||!e||c.onValueChange(n)})})})});N.displayName=j;var T="TabsContent",S=n.forwardRef((e,t)=>{let{__scopeTabs:a,value:r,forceMount:i,children:s,...c}=e,d=h(T,a),u=Z(d.baseId,r),f=C(d.baseId,r),p=r===d.value,g=n.useRef(p);return n.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,m.jsx)(l.z,{present:i||p,children:a=>{let{present:n}=a;return(0,m.jsx)(o.WV.div,{"data-state":p?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!n,id:f,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:g.current?"0s":void 0},children:n&&s})}})});function Z(e,t){return"".concat(e,"-trigger-").concat(t)}function C(e,t){return"".concat(e,"-content-").concat(t)}S.displayName=T;var R=y,V=w,k=N,A=S}},function(e){e.O(0,[597,448,617,564,45,501,727,633,971,117,744],function(){return e(e.s=85802)}),_N_E=e.O()}]);