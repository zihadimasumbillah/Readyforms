(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[489],{5802:function(e,t,r){Promise.resolve().then(r.bind(r,2870))},2870:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var a=r(7437),s=r(2265),n=r(9376),o=r(1945),i=r(2381),l=r(9820),c=r(7168),d=r(7053),u=r(9501),m=r(3448),f=r(5060);let g=u.RV,p=s.createContext({}),h=()=>{let e=s.useContext(p),t=s.useContext(x),{getFieldState:r,formState:a}=(0,u.Gc)(),n=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...n}},x=s.createContext({});s.forwardRef((e,t)=>{let{className:r,...n}=e,o=s.useId();return(0,a.jsx)(x.Provider,{value:{id:o},children:(0,a.jsx)("div",{ref:t,className:(0,m.cn)("space-y-2",r),...n})})}).displayName="FormItem",s.forwardRef((e,t)=>{let{className:r,...s}=e,{error:n,formItemId:o}=h();return(0,a.jsx)(f._,{ref:t,className:(0,m.cn)(n&&"text-destructive",r),htmlFor:o,...s})}).displayName="FormLabel",s.forwardRef((e,t)=>{let{...r}=e,{error:s,formItemId:n,formDescriptionId:o,formMessageId:i}=h();return(0,a.jsx)(d.Slot,{ref:t,id:n,"aria-describedby":s?"".concat(o," ").concat(i):"".concat(o),"aria-invalid":!!s,...r})}).displayName="FormControl",s.forwardRef((e,t)=>{let{className:r,...s}=e,{formDescriptionId:n}=h();return(0,a.jsx)("p",{ref:t,id:n,className:(0,m.cn)("text-sm text-muted-foreground",r),...s})}).displayName="FormDescription",s.forwardRef((e,t)=>{let{className:r,children:s,...n}=e,{error:o,formMessageId:i}=h(),l=o?String(null==o?void 0:o.message):s;return l?(0,a.jsx)("p",{ref:t,id:i,className:(0,m.cn)("text-sm font-medium text-destructive",r),...n,children:l}):null}).displayName="FormMessage";var y=r(285),w=r(4881),v=r(9435),b=r(8752);function j(e){let{params:t}=e,r=(0,w.a)(),d=null==r?void 0:r.user,m=null==r?void 0:r.logout,f=(0,n.useRouter)(),[p,h]=(0,s.useState)("general"),[x,j]=(0,s.useState)(!0),[N,S]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=async()=>{try{j(!0);let e=await v.d.getTemplateById(t.id);S(e)}catch(e){console.error("Error fetching template:",e),(0,b.Am)({title:"Error",description:"Failed to load template data.",variant:"destructive"})}finally{j(!1)}};d?e():f.push("/auth/login")},[t.id,d,f]);let E=e=>{console.log("Adding new question of type: ".concat(e))},C=e=>{if(!N)return 0;let t=0;return"String"===e?(N.customString1State&&t++,N.customString2State&&t++,N.customString3State&&t++,N.customString4State&&t++):"Text"===e&&(N.customText1State&&t++,N.customText2State&&t++,N.customText3State&&t++,N.customText4State&&t++),t};return!d||x?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)(o.c,{user:{name:(null==d?void 0:d.name)||"Admin User",email:(null==d?void 0:d.email)||"admin@example.com",isAdmin:!0},onLogout:()=>{m&&(m(),f.push("/auth/login"))},children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,a.jsx)("h1",{className:"text-2xl font-bold",children:x?"Loading...":"Edit Template: ".concat(null==N?void 0:N.title)})}),(0,a.jsxs)(c.mQ,{defaultValue:"general",value:p,onValueChange:h,children:[(0,a.jsxs)(c.dr,{className:"mb-4",children:[(0,a.jsx)(c.SP,{value:"general",children:"General"}),(0,a.jsx)(c.SP,{value:"questions",children:"Questions"})]}),(0,a.jsx)(c.nU,{value:"general",children:(0,a.jsx)(l.Zb,{children:(0,a.jsx)(l.aY,{children:(0,a.jsx)(g,{...(0,u.cI)(),children:(0,a.jsx)("div",{className:"space-y-4"})})})})}),(0,a.jsx)(c.nU,{value:"questions",children:(0,a.jsx)(l.Zb,{children:(0,a.jsx)(l.Ol,{children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l.ll,{children:"Questions"}),(0,a.jsx)(l.SZ,{children:"Configure and reorder the questions in this template"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>E("String"),disabled:C("String")>=4,className:"gap-1",children:[(0,a.jsx)(y.Z,{className:"h-3.5 w-3.5"}),"Add Text Field"]}),(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>E("Text"),disabled:C("Text")>=4,className:"gap-1",children:[(0,a.jsx)(y.Z,{className:"h-3.5 w-3.5"}),"Add Text Area"]})]})]})})})})]})]})}},5060:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var a=r(7437),s=r(2265),n=r(6394),o=r(535),i=r(3448);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.f,{ref:t,className:(0,i.cn)(l(),r),...s})});c.displayName=n.f.displayName},7168:function(e,t,r){"use strict";r.d(t,{SP:function(){return c},dr:function(){return l},mQ:function(){return i},nU:function(){return d}});var a=r(7437),s=r(2265),n=r(271),o=r(3448);let i=n.fC,l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.aV,{ref:t,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...s})});l.displayName=n.aV.displayName;let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.xz,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...s})});c.displayName=n.xz.displayName;let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,o.cn)("ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...s})});d.displayName=n.VY.displayName},9435:function(e,t,r){"use strict";r.d(t,{d:function(){return s}});var a=r(5493);let s={async getDashboardStats(){try{let e=await a.Z.get("/admin/dashboard");return{users:e.data.userCount||0,templates:e.data.templateCount||0,responses:e.data.responseCount||0,likes:0,comments:0,activeUsers:e.data.activeUsers||0,topicsCount:4,adminCount:1}}catch(e){throw console.error("Error fetching admin dashboard stats:",e),e}},async getSystemActivity(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{return[{id:"1",type:"user",user:"John Doe",action:"registered",timestamp:new Date().toISOString()},{id:"2",type:"template",user:"Jane Smith",action:"created",title:"Customer Feedback Form",timestamp:new Date(Date.now()-36e5).toISOString()},{id:"3",type:"response",user:"Mike Johnson",action:"submitted",title:"Product Survey",timestamp:new Date(Date.now()-108e5).toISOString()}]}catch(e){return console.error("Error fetching system activity:",e),[]}},async getAllUsers(){try{return(await a.Z.get("/admin/users")).data}catch(e){throw console.error("Error fetching all users:",e),e}},async toggleUserBlock(e){try{return(await a.Z.put("/admin/users/".concat(e,"/block"))).data}catch(e){throw console.error("Error toggling user block status:",e),e}},async toggleUserAdmin(e){try{return(await a.Z.put("/admin/users/".concat(e,"/admin"))).data}catch(e){throw console.error("Error toggling user admin status:",e),e}},async getAllTemplates(){try{return(await a.Z.get("/admin/templates")).data}catch(e){throw console.error("Error fetching all templates:",e),e}},async getAllTopics(){try{return(await a.Z.get("/topics")).data}catch(e){throw console.error("Error fetching all topics:",e),e}},async getTemplateById(e){try{return(await a.Z.get("/admin/templates/".concat(e))).data}catch(e){throw console.error("Error fetching template:",e),e}},async getFormResponsesByTemplate(e){try{return(await a.Z.get("/admin/form-responses/template/".concat(e))).data}catch(e){throw console.error("Error fetching form responses by template:",e),e}},async getFormResponseById(e){try{return(await a.Z.get("/admin/form-responses/".concat(e))).data}catch(e){throw console.error("Error fetching form response:",e),e}},async deleteFormResponse(e){try{return(await a.Z.delete("/admin/form-responses/".concat(e))).data}catch(e){throw console.error("Error deleting form response:",e),e}},async getAllFormResponses(){try{return(await a.Z.get("/admin/form-responses")).data}catch(e){throw console.error("Error fetching all form responses:",e),e}}}}},function(e){e.O(0,[284,73,972,52,534,236,713,439,152,32,961,971,117,744],function(){return e(e.s=5802)}),_N_E=e.O()}]);