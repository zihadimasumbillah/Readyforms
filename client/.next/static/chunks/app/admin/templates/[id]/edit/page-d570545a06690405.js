(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[489],{5802:function(e,t,a){Promise.resolve().then(a.bind(a,2870))},2870:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var r=a(7437),s=a(2265),n=a(9376),o=a(1945),i=a(2381),c=a(9820),l=a(7168),d=a(7053),u=a(9501),m=a(3448),f=a(5060);let h=u.RV,g=s.createContext({}),p=()=>{let e=s.useContext(g),t=s.useContext(x),{getFieldState:a,formState:r}=(0,u.Gc)(),n=a(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...n}},x=s.createContext({});s.forwardRef((e,t)=>{let{className:a,...n}=e,o=s.useId();return(0,r.jsx)(x.Provider,{value:{id:o},children:(0,r.jsx)("div",{ref:t,className:(0,m.cn)("space-y-2",a),...n})})}).displayName="FormItem",s.forwardRef((e,t)=>{let{className:a,...s}=e,{error:n,formItemId:o}=p();return(0,r.jsx)(f._,{ref:t,className:(0,m.cn)(n&&"text-destructive",a),htmlFor:o,...s})}).displayName="FormLabel",s.forwardRef((e,t)=>{let{...a}=e,{error:s,formItemId:n,formDescriptionId:o,formMessageId:i}=p();return(0,r.jsx)(d.Slot,{ref:t,id:n,"aria-describedby":s?"".concat(o," ").concat(i):"".concat(o),"aria-invalid":!!s,...a})}).displayName="FormControl",s.forwardRef((e,t)=>{let{className:a,...s}=e,{formDescriptionId:n}=p();return(0,r.jsx)("p",{ref:t,id:n,className:(0,m.cn)("text-sm text-muted-foreground",a),...s})}).displayName="FormDescription",s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e,{error:o,formMessageId:i}=p(),c=o?String(null==o?void 0:o.message):s;return c?(0,r.jsx)("p",{ref:t,id:i,className:(0,m.cn)("text-sm font-medium text-destructive",a),...n,children:c}):null}).displayName="FormMessage";var y=a(285),v=a(4881),w=a(9435),j=a(8752);function b(e){let{params:t}=e,a=(0,v.a)(),d=null==a?void 0:a.user,m=null==a?void 0:a.logout,f=(0,n.useRouter)(),[g,p]=(0,s.useState)("general"),[x,b]=(0,s.useState)(!0),[N,F]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=async()=>{try{b(!0);let e=await w.d.getTemplateById(t.id);F(e)}catch(e){console.error("Error fetching template:",e),(0,j.Am)({title:"Error",description:"Failed to load template data.",variant:"destructive"})}finally{b(!1)}};d?e():f.push("/auth/login")},[t.id,d,f]);let S=e=>{console.log("Adding new question of type: ".concat(e))},Z=e=>{if(!N)return 0;let t=0;return"String"===e?(N.customString1State&&t++,N.customString2State&&t++,N.customString3State&&t++,N.customString4State&&t++):"Text"===e&&(N.customText1State&&t++,N.customText2State&&t++,N.customText3State&&t++,N.customText4State&&t++),t};return!d||x?(0,r.jsx)("div",{children:"Loading..."}):(0,r.jsxs)(o.c,{user:{name:(null==d?void 0:d.name)||"Admin User",email:(null==d?void 0:d.email)||"admin@example.com",isAdmin:!0},onLogout:()=>{m&&(m(),f.push("/auth/login"))},children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,r.jsx)("h1",{className:"text-2xl font-bold",children:x?"Loading...":"Edit Template: ".concat(null==N?void 0:N.title)})}),(0,r.jsxs)(l.mQ,{defaultValue:"general",value:g,onValueChange:p,children:[(0,r.jsxs)(l.dr,{className:"mb-4",children:[(0,r.jsx)(l.SP,{value:"general",children:"General"}),(0,r.jsx)(l.SP,{value:"questions",children:"Questions"})]}),(0,r.jsx)(l.nU,{value:"general",children:(0,r.jsx)(c.Zb,{children:(0,r.jsx)(c.aY,{children:(0,r.jsx)(h,{...(0,u.cI)(),children:(0,r.jsx)("div",{className:"space-y-4"})})})})}),(0,r.jsx)(l.nU,{value:"questions",children:(0,r.jsx)(c.Zb,{children:(0,r.jsx)(c.Ol,{children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c.ll,{children:"Questions"}),(0,r.jsx)(c.SZ,{children:"Configure and reorder the questions in this template"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>S("String"),disabled:Z("String")>=4,className:"gap-1",children:[(0,r.jsx)(y.Z,{className:"h-3.5 w-3.5"}),"Add Text Field"]}),(0,r.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>S("Text"),disabled:Z("Text")>=4,className:"gap-1",children:[(0,r.jsx)(y.Z,{className:"h-3.5 w-3.5"}),"Add Text Area"]})]})]})})})})]})]})}},5060:function(e,t,a){"use strict";a.d(t,{_:function(){return l}});var r=a(7437),s=a(2265),n=a(6394),o=a(535),i=a(3448);let c=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.f,{ref:t,className:(0,i.cn)(c(),a),...s})});l.displayName=n.f.displayName},7168:function(e,t,a){"use strict";a.d(t,{SP:function(){return l},dr:function(){return c},mQ:function(){return i},nU:function(){return d}});var r=a(7437),s=a(2265),n=a(271),o=a(3448);let i=n.fC,c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.aV,{ref:t,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...s})});c.displayName=n.aV.displayName;let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.xz,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...s})});l.displayName=n.xz.displayName;let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,o.cn)("ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});d.displayName=n.VY.displayName},9435:function(e,t,a){"use strict";a.d(t,{d:function(){return s}});var r=a(5493);let s={async getUsers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{return(await r.Z.get("/admin/users?page=".concat(e,"&limit=").concat(t))).data}catch(e){throw console.error("Failed to fetch users:",e),e}},async getAllUsers(){try{return(await r.Z.get("/admin/users?limit=1000")).data.users}catch(e){throw console.error("Failed to fetch all users:",e),e}},async getUserById(e){try{return(await r.Z.get("/admin/users/".concat(e))).data}catch(t){throw console.error("Failed to fetch user ".concat(e,":"),t),t}},async toggleUserBlock(e){try{return(await r.Z.put("/admin/users/".concat(e,"/block"))).data}catch(t){throw console.error("Failed to toggle block for user ".concat(e,":"),t),t}},async toggleUserAdmin(e){try{return(await r.Z.put("/admin/users/".concat(e,"/admin"))).data}catch(t){throw console.error("Failed to toggle admin for user ".concat(e,":"),t),t}},async getDashboardStats(){try{return(await r.Z.get("/admin/dashboard-stats")).data}catch(e){throw console.error("Failed to fetch dashboard stats:",e),e}},async getSystemActivity(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{return(await r.Z.get("/admin/system-activity/".concat(e))).data}catch(e){throw console.error("Failed to fetch system activity:",e),e}},async getAllTemplates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{return(await r.Z.get("/admin/templates?page=".concat(e,"&limit=").concat(t))).data.templates}catch(e){throw console.error("Failed to fetch templates:",e),e}},async getAllTopics(){try{return(await r.Z.get("/admin/topics")).data}catch(e){throw console.error("Failed to fetch topics:",e),e}},async getTemplateById(e){try{return(await r.Z.get("/admin/templates/".concat(e))).data}catch(t){throw console.error("Failed to fetch template ".concat(e,":"),t),t}},async getAllResponses(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{return(await r.Z.get("/admin/responses?page=".concat(e,"&limit=").concat(t))).data.responses}catch(e){throw console.error("Failed to fetch responses:",e),e}},async getFormResponseById(e){try{return(await r.Z.get("/admin/responses/".concat(e))).data}catch(t){throw console.error("Failed to fetch form response ".concat(e,":"),t),t}},async deleteFormResponse(e){try{await r.Z.delete("/admin/responses/".concat(e))}catch(t){throw console.error("Failed to delete form response ".concat(e,":"),t),t}},async getFormResponsesByTemplate(e){try{return(await r.Z.get("/admin/templates/".concat(e,"/responses"))).data}catch(t){throw console.error("Failed to fetch responses for template ".concat(e,":"),t),t}},async getUsersCount(){try{return(await r.Z.get("/admin/users-count")).data.count}catch(e){throw console.error("Failed to fetch users count:",e),e}}}}},function(e){e.O(0,[284,464,972,52,534,128,713,439,152,32,961,971,117,744],function(){return e(e.s=5802)}),_N_E=e.O()}]);