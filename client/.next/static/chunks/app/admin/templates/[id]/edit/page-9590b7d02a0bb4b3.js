(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[489],{5802:function(e,t,a){Promise.resolve().then(a.bind(a,2581))},285:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(9763).Z)("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},2581:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return U}});var n=a(7437),i=a(2265),s=a(9376),r=a(3667),l=a(2381),o=a(9820),c=a(6741),d=a(3966),u=a(1353),m=a(1599),f=a(6840),p=a(9114),g=a(886),x=a(9255),v="Tabs",[h,y]=(0,d.b)(v,[u.Pc]),b=(0,u.Pc)(),[w,j]=h(v),N=i.forwardRef((e,t)=>{let{__scopeTabs:a,value:i,onValueChange:s,defaultValue:r,orientation:l="horizontal",dir:o,activationMode:c="automatic",...d}=e,u=(0,p.gm)(o),[m,h]=(0,g.T)({prop:i,onChange:s,defaultProp:null!=r?r:"",caller:v});return(0,n.jsx)(w,{scope:a,baseId:(0,x.M)(),value:m,onValueChange:h,orientation:l,dir:u,activationMode:c,children:(0,n.jsx)(f.WV.div,{dir:u,"data-orientation":l,...d,ref:t})})});N.displayName=v;var T="TabsList",Z=i.forwardRef((e,t)=>{let{__scopeTabs:a,loop:i=!0,...s}=e,r=j(T,a),l=b(a);return(0,n.jsx)(u.fC,{asChild:!0,...l,orientation:r.orientation,dir:r.dir,loop:i,children:(0,n.jsx)(f.WV.div,{role:"tablist","aria-orientation":r.orientation,...s,ref:t})})});Z.displayName=T;var S="TabsTrigger",C=i.forwardRef((e,t)=>{let{__scopeTabs:a,value:i,disabled:s=!1,...r}=e,l=j(S,a),o=b(a),d=A(l.baseId,i),m=F(l.baseId,i),p=i===l.value;return(0,n.jsx)(u.ck,{asChild:!0,...o,focusable:!s,active:p,children:(0,n.jsx)(f.WV.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":m,"data-state":p?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:d,...r,ref:t,onMouseDown:(0,c.M)(e.onMouseDown,e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(i)}),onKeyDown:(0,c.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(i)}),onFocus:(0,c.M)(e.onFocus,()=>{let e="manual"!==l.activationMode;p||s||!e||l.onValueChange(i)})})})});C.displayName=S;var R="TabsContent",k=i.forwardRef((e,t)=>{let{__scopeTabs:a,value:s,forceMount:r,children:l,...o}=e,c=j(R,a),d=A(c.baseId,s),u=F(c.baseId,s),p=s===c.value,g=i.useRef(p);return i.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,n.jsx)(m.z,{present:r||p,children:a=>{let{present:i}=a;return(0,n.jsx)(f.WV.div,{"data-state":p?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!i,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:g.current?"0s":void 0},children:i&&l})}})});function A(e,t){return"".concat(e,"-trigger-").concat(t)}function F(e,t){return"".concat(e,"-content-").concat(t)}k.displayName=R;var I=a(3448);let M=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,n.jsx)(Z,{ref:t,className:(0,I.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...i})});M.displayName=Z.displayName;let V=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,n.jsx)(C,{ref:t,className:(0,I.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...i})});V.displayName=C.displayName;let E=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,n.jsx)(k,{ref:t,className:(0,I.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...i})});E.displayName=k.displayName;var D=a(935),z=a(9501),P=a(285),_=a(4881),q=a(9435),L=a(8752);function U(e){let{params:t}=e,a=(0,_.a)(),c=null==a?void 0:a.user,d=null==a?void 0:a.logout,u=(0,s.useRouter)(),[m,f]=(0,i.useState)("general"),[p,g]=(0,i.useState)(!0),[x,v]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=async()=>{try{g(!0);let e=await q.d.getTemplateById(t.id);v(e)}catch(e){console.error("Error fetching template:",e),(0,L.Am)({title:"Error",description:"Failed to load template data.",variant:"destructive"})}finally{g(!1)}};c?e():u.push("/auth/login")},[t.id,c,u]);let h=e=>{console.log("Adding new question of type: ".concat(e))},y=e=>{if(!x)return 0;let t=0;return"String"===e?(x.customString1State&&t++,x.customString2State&&t++,x.customString3State&&t++,x.customString4State&&t++):"Text"===e&&(x.customText1State&&t++,x.customText2State&&t++,x.customText3State&&t++,x.customText4State&&t++),t};return!c||p?(0,n.jsx)("div",{children:"Loading..."}):(0,n.jsxs)(r.c,{user:{name:(null==c?void 0:c.name)||"Admin User",email:(null==c?void 0:c.email)||"admin@example.com",isAdmin:!0},onLogout:()=>{d&&(d(),u.push("/auth/login"))},children:[(0,n.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,n.jsx)("h1",{className:"text-2xl font-bold",children:p?"Loading...":"Edit Template: ".concat(null==x?void 0:x.title)})}),(0,n.jsxs)(N,{defaultValue:"general",value:m,onValueChange:f,children:[(0,n.jsxs)(M,{className:"mb-4",children:[(0,n.jsx)(V,{value:"general",children:"General"}),(0,n.jsx)(V,{value:"questions",children:"Questions"})]}),(0,n.jsx)(E,{value:"general",children:(0,n.jsx)(o.Zb,{children:(0,n.jsx)(o.aY,{children:(0,n.jsx)(D.l0,{...(0,z.cI)(),children:(0,n.jsx)("div",{className:"space-y-4"})})})})}),(0,n.jsx)(E,{value:"questions",children:(0,n.jsx)(o.Zb,{children:(0,n.jsx)(o.Ol,{children:(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(o.ll,{children:"Questions"}),(0,n.jsx)(o.SZ,{children:"Configure and reorder the questions in this template"})]}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,n.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>h("String"),disabled:y("String")>=4,className:"gap-1",children:[(0,n.jsx)(P.Z,{className:"h-3.5 w-3.5"}),"Add Text Field"]}),(0,n.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>h("Text"),disabled:y("Text")>=4,className:"gap-1",children:[(0,n.jsx)(P.Z,{className:"h-3.5 w-3.5"}),"Add Text Area"]})]})]})})})})]})]})}},935:function(e,t,a){"use strict";a.d(t,{l0:function(){return u},NI:function(){return h},pf:function(){return y},Wi:function(){return f},xJ:function(){return x},lX:function(){return v},zG:function(){return b}});var n=a(7437),i=a(2265),s=a(7053),r=a(9501),l=a(3448),o=a(6394);let c=(0,a(535).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,n.jsx)(o.f,{ref:t,className:(0,l.cn)(c(),a),...i})});d.displayName=o.f.displayName;let u=r.RV,m=i.createContext({}),f=e=>{let{...t}=e;return(0,n.jsx)(m.Provider,{value:{name:t.name},children:(0,n.jsx)(r.Qr,{...t})})},p=()=>{let e=i.useContext(m),t=i.useContext(g),{getFieldState:a,formState:n}=(0,r.Gc)(),s=a(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...s}},g=i.createContext({}),x=i.forwardRef((e,t)=>{let{className:a,...s}=e,r=i.useId();return(0,n.jsx)(g.Provider,{value:{id:r},children:(0,n.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",a),...s})})});x.displayName="FormItem";let v=i.forwardRef((e,t)=>{let{className:a,...i}=e,{error:s,formItemId:r}=p();return(0,n.jsx)(d,{ref:t,className:(0,l.cn)(s&&"text-destructive",a),htmlFor:r,...i})});v.displayName="FormLabel";let h=i.forwardRef((e,t)=>{let{...a}=e,{error:i,formItemId:r,formDescriptionId:l,formMessageId:o}=p();return(0,n.jsx)(s.g7,{ref:t,id:r,"aria-describedby":i?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!i,...a})});h.displayName="FormControl";let y=i.forwardRef((e,t)=>{let{className:a,...i}=e,{formDescriptionId:s}=p();return(0,n.jsx)("p",{ref:t,id:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...i})});y.displayName="FormDescription";let b=i.forwardRef((e,t)=>{let{className:a,children:i,...s}=e,{error:r,formMessageId:o}=p(),c=r?String(null==r?void 0:r.message):i;return c?(0,n.jsx)("p",{ref:t,id:o,className:(0,l.cn)("text-sm font-medium text-destructive",a),...s,children:c}):null});b.displayName="FormMessage"},9435:function(e,t,a){"use strict";a.d(t,{d:function(){return i}});var n=a(5493);let i={getAllUsers:async()=>(await n.Z.get("/admin/users")).data,toggleUserBlock:async e=>(await n.Z.put("/admin/users/".concat(e,"/block"))).data.user,toggleUserAdmin:async e=>(await n.Z.put("/admin/users/".concat(e,"/admin"))).data.user,getAllTemplates:async()=>(await n.Z.get("/admin/templates")).data,async getTopTemplates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return(await n.Z.get("/admin/templates/top?limit=".concat(e))).data},getTemplateById:async e=>(await n.Z.get("/admin/templates/".concat(e))).data,updateTemplate:async(e,t)=>(await n.Z.put("/admin/templates/".concat(e),t)).data,deleteTemplate:async e=>(await n.Z.delete("/admin/templates/".concat(e))).data,getDashboardStats:async()=>(await n.Z.get("/admin/stats")).data,getAllFormResponses:async()=>(await n.Z.get("/admin/responses")).data,getAllAdminUsers:async()=>(await n.Z.get("/admin/users")).data,getAllTopics:async()=>(await n.Z.get("/admin/topics")).data,createTopic:async(e,t)=>(await n.Z.post("/admin/topics",{name:e,description:t})).data,updateTopic:async(e,t)=>(await n.Z.put("/admin/topics/".concat(e),t)).data,async getSystemActivity(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return(await n.Z.get("/admin/activity?limit=".concat(e))).data},getRecentTemplates:async()=>(await n.Z.get("/admin/templates/recent")).data,getRecentResponses:async()=>(await n.Z.get("/admin/responses/recent")).data}}},function(e){e.O(0,[521,448,617,564,45,80,598,667,971,117,744],function(){return e(e.s=5802)}),_N_E=e.O()}]);