(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[862],{55266:function(e,t,s){Promise.resolve().then(s.bind(s,14336))},14336:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k},dynamic:function(){return b},dynamicParams:function(){return w}});var r=s(57437),a=s(2265),n=s(53667),l=s(79820),o=s(12381),i=s(71518),c=s(32660),d=s(18930),m=s(31047),u=s(92369),x=s(89345),p=s(69140),f=s(99376),h=s(69174),j=s(64014),g=s(5894),v=s(30767),N=s(18752),y=s(27648);let b="force-dynamic",w=!0;function k(e){var t,s,b;let{params:w}=e,[k,R]=(0,a.useState)(null),[C,Z]=(0,a.useState)(!0),[A,z]=(0,a.useState)(!1),E=(0,f.useRouter)(),D=(0,g.a)(),T=null==D?void 0:D.user,B=null==D?void 0:D.logout;(0,a.useEffect)(()=>{(async()=>{try{Z(!0);let e=await i.B.getResponseById(w.id);R(e)}catch(e){console.error("Error fetching response:",e),(0,N.Am)({title:"Error",description:"Failed to load form response. Please try again.",variant:"destructive"})}finally{Z(!1)}})()},[w.id]);let O=async()=>{try{await i.B.deleteResponse(w.id),(0,N.Am)({title:"Success",description:"Form response deleted successfully"}),E.push("/admin/responses")}catch(e){console.error("Error deleting response:",e),(0,N.Am)({title:"Error",description:"Failed to delete form response. Please try again.",variant:"destructive"})}},S=()=>{if(!k||!k.template)return[];let e=[];for(let t=1;t<=4;t++){let s="customString".concat(t,"Question"),r="customString".concat(t,"Answer");s in k.template&&k.template[s]&&r in k&&void 0!==k[r]&&e.push({question:k.template[s],answer:k[r],type:"string"})}for(let t=1;t<=4;t++){let s="customText".concat(t,"Question"),r="customText".concat(t,"Answer");s in k.template&&k.template[s]&&r in k&&void 0!==k[r]&&e.push({question:k.template[s],answer:k[r],type:"text"})}for(let t=1;t<=4;t++){let s="customInt".concat(t,"Question"),r="customInt".concat(t,"Answer");s in k.template&&k.template[s]&&r in k&&void 0!==k[r]&&e.push({question:k.template[s],answer:k[r],type:"number"})}for(let t=1;t<=4;t++){let s="customCheckbox".concat(t,"Question"),r="customCheckbox".concat(t,"Answer");s in k.template&&k.template[s]&&r in k&&void 0!==k[r]&&e.push({question:k.template[s],answer:k[r]?"Yes":"No",type:"checkbox"})}return e};return(0,r.jsxs)(n.c,{user:{name:(null==T?void 0:T.name)||"Admin",email:(null==T?void 0:T.email)||"admin@example.com",isAdmin:!0},onLogout:()=>{B&&(B(),E.push("/auth/login"))},children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>E.back(),children:[(0,r.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Form Response Details"})]}),(0,r.jsxs)(o.z,{variant:"destructive",size:"sm",onClick:()=>z(!0),children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Delete Response"]})]}),C?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(p.O,{className:"h-32 w-full"}),(0,r.jsx)(p.O,{className:"h-64 w-full"})]}):k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.Zb,{children:[(0,r.jsx)(l.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.ll,{className:"text-xl",children:"Response Information"}),(0,r.jsx)(l.SZ,{children:"Details about this form submission"})]}),(0,r.jsxs)(h.C,{variant:"secondary",children:["ID: ",k.id.substring(0,8)]})]})}),(0,r.jsx)(l.aY,{children:(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"mr-3 rounded-md bg-primary/10 p-2 text-primary",children:(0,r.jsx)(m.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Submitted on"}),(0,r.jsx)("p",{className:"text-base",children:k.createdAt&&(0,j.WU)(new Date(k.createdAt),"PPpp")})]})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"mr-3 rounded-md bg-primary/10 p-2 text-primary",children:(0,r.jsx)(u.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Submitted by"}),(0,r.jsx)("p",{className:"text-base",children:(null===(t=k.user)||void 0===t?void 0:t.name)||"Unknown user"})]})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"mr-3 rounded-md bg-primary/10 p-2 text-primary",children:(0,r.jsx)(x.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),(0,r.jsx)("p",{className:"text-base",children:(null===(s=k.user)||void 0===s?void 0:s.email)||"No email available"})]})]}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"mr-3 rounded-md bg-primary/10 p-2 text-primary",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Form Template"}),(0,r.jsx)(y.default,{href:"/admin/templates/".concat(k.templateId),className:"text-base text-primary hover:underline",children:(null===(b=k.template)||void 0===b?void 0:b.title)||"Unknown template"})]})]})]})})})]}),(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsx)(l.ll,{className:"text-xl",children:"Form Responses"}),(0,r.jsx)(l.SZ,{children:"Answers submitted by the user"})]}),(0,r.jsx)(l.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[S().map((e,t)=>(0,r.jsxs)("div",{className:"border-b pb-4 last:border-b-0 last:pb-0",children:[(0,r.jsx)("p",{className:"font-medium",children:e.question}),"text"===e.type?(0,r.jsx)("div",{className:"mt-1 rounded-md bg-muted p-3",children:(0,r.jsx)("p",{className:"whitespace-pre-wrap",children:e.answer||"No response"})}):"checkbox"===e.type?(0,r.jsx)(h.C,{className:"mt-1",variant:"Yes"===e.answer?"default":"outline",children:e.answer}):(0,r.jsx)("p",{className:"mt-1 text-muted-foreground",children:e.answer||"No response"})]},t)),0===S().length&&(0,r.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No form responses found"})]})}),(0,r.jsxs)(l.eW,{className:"justify-between border-t pt-4",children:[(0,r.jsxs)(o.z,{variant:"outline",onClick:()=>E.back(),children:[(0,r.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Back to Responses"]}),(0,r.jsxs)(o.z,{variant:"destructive",onClick:()=>z(!0),children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Delete Response"]})]})]})]}):(0,r.jsx)(l.Zb,{children:(0,r.jsxs)(l.aY,{className:"flex flex-col items-center justify-center p-12 text-center",children:[(0,r.jsx)("div",{className:"rounded-full bg-muted p-3 mb-4",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-muted-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Response not found"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-1 mb-4",children:"The form response you're looking for doesn't exist or has been deleted."}),(0,r.jsx)(o.z,{onClick:()=>E.push("/admin/responses"),children:"Go to Responses"})]})})]}),(0,r.jsx)(v.aR,{open:A,onOpenChange:z,children:(0,r.jsxs)(v._T,{children:[(0,r.jsxs)(v.fY,{children:[(0,r.jsx)(v.f$,{children:"Are you absolutely sure?"}),(0,r.jsx)(v.yT,{children:"This action cannot be undone. This will permanently delete the form response from our servers."})]}),(0,r.jsxs)(v.xo,{children:[(0,r.jsx)(v.le,{children:"Cancel"}),(0,r.jsx)(v.OL,{onClick:O,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}},30767:function(e,t,s){"use strict";s.d(t,{OL:function(){return h},_T:function(){return m},aR:function(){return i},f$:function(){return p},fY:function(){return u},le:function(){return j},xo:function(){return x},yT:function(){return f}});var r=s(57437),a=s(2265),n=s(90277),l=s(93448),o=s(12381);let i=n.fC;n.xz;let c=e=>{let{...t}=e;return(0,r.jsx)(n.h_,{...t})};c.displayName=n.h_.displayName;let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t})});d.displayName=n.aV.displayName;let m=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(d,{}),(0,r.jsx)(n.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a})]})});m.displayName=n.VY.displayName;let u=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};u.displayName="AlertDialogHeader";let x=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};x.displayName="AlertDialogFooter";let p=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold",s),...a})});p.displayName=n.Dx.displayName;let f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...a})});f.displayName=n.dk.displayName;let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.aU,{ref:t,className:(0,l.cn)((0,o.d)(),s),...a})});h.displayName=n.aU.displayName;let j=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.$j,{ref:t,className:(0,l.cn)((0,o.d)({variant:"outline"}),"mt-2 sm:mt-0",s),...a})});j.displayName=n.$j.displayName},69174:function(e,t,s){"use strict";s.d(t,{C:function(){return o}});var r=s(57437);s(2265);var a=s(90535),n=s(93448);let l=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:s}),t),...a})}},69140:function(e,t,s){"use strict";s.d(t,{O:function(){return n}});var r=s(57437),a=s(93448);function n(e){let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",t),...s})}},71518:function(e,t,s){"use strict";s.d(t,{B:function(){return a}});var r=s(95493);let a={submitResponse:async(e,t)=>{try{return await r.Z.post("/forms",{templateId:e,answers:t})}catch(e){throw console.error("Error submitting form response:",e),e}},getResponsesByTemplate:async e=>{try{return await r.Z.get("/forms/template/".concat(e))}catch(e){throw console.error("Error fetching form responses:",e),e}},getResponseById:async e=>{try{return await r.Z.get("/forms/".concat(e))}catch(e){throw console.error("Error fetching form response:",e),e}},getAggregateData:async e=>{try{return await r.Z.get("/forms/template/".concat(e,"/aggregate"))}catch(e){throw console.error("Error fetching aggregate data:",e),e}},deleteResponse:async e=>{try{await r.Z.delete("/forms/".concat(e))}catch(e){throw console.error("Error deleting form response:",e),e}}}}},function(e){e.O(0,[597,448,617,564,45,330,659,727,633,971,117,744],function(){return e(e.s=55266)}),_N_E=e.O()}]);