(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[862],{2720:function(e,s,t){Promise.resolve().then(t.bind(t,9424))},2451:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},2735:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},8736:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},5466:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},8728:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5805:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9424:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return A}});var a=t(7437),n=t(2265),r=t(9376),l=t(9820),i=t(2381),c=t(7491),d=t(7648),o=t(3448),m=t(5466),u=t(5805),h=t(1715),x=t(8736),f=t(8728),p=t(8293),g=t(9547),j=t(227),v=t(2060);let y=e=>{let{href:s,icon:t,label:n,isActive:r,onClick:l}=e;return(0,a.jsx)(d.default,{href:s,onClick:l,children:(0,a.jsxs)("div",{className:(0,o.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm transition-all",r?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[t,n]})})};function N(e){var s;let{children:t,user:l,onLogout:c}=e,[o,N]=(0,n.useState)(!1),k=(0,r.usePathname)(),w=[{href:"/admin",icon:(0,a.jsx)(m.Z,{className:"h-4 w-4"}),label:"Dashboard"},{href:"/admin/users",icon:(0,a.jsx)(u.Z,{className:"h-4 w-4"}),label:"Users"},{href:"/admin/templates",icon:(0,a.jsx)(h.Z,{className:"h-4 w-4"}),label:"Templates"},{href:"/admin/responses",icon:(0,a.jsx)(x.Z,{className:"h-4 w-4"}),label:"Responses"},{href:"/admin/settings",icon:(0,a.jsx)(f.Z,{className:"h-4 w-4"}),label:"Settings"}],b=()=>N(!1);return(0,a.jsxs)("div",{className:"h-full min-h-screen flex flex-col",children:[(0,a.jsxs)("header",{className:"sticky top-0 z-30 h-16 border-b bg-background flex items-center px-4 md:px-6",children:[(0,a.jsxs)(i.z,{variant:"ghost",size:"icon",className:"mr-2 md:hidden",onClick:()=>N(!o),children:[(0,a.jsx)(p.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle menu"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)(d.default,{href:"/",className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"h-6 w-6"}),(0,a.jsx)("span",{className:"text-lg font-semibold",children:"ReadyForms"})]}),(0,a.jsx)("span",{className:"ml-2 rounded-md bg-primary/10 px-2 py-1 text-xs font-medium text-primary",children:"Admin"})]}),(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(null==l?void 0:l.isAdmin)&&(0,a.jsx)(j.c,{showText:!0}),(0,a.jsx)(g.T,{}),l&&(0,a.jsxs)(v.h_,{children:[(0,a.jsx)(v.$F,{asChild:!0,children:(0,a.jsx)(i.z,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-muted",children:null===(s=l.name)||void 0===s?void 0:s.charAt(0).toUpperCase()})})}),(0,a.jsxs)(v.AW,{align:"end",children:[(0,a.jsx)("div",{className:"flex items-center justify-start gap-2 p-2",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-1 leading-none",children:[(0,a.jsx)("p",{className:"font-medium",children:l.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:l.email})]})}),(0,a.jsx)(v.VD,{}),(0,a.jsx)(v.Xi,{asChild:!0,children:(0,a.jsx)(d.default,{href:"/profile",children:"Profile"})}),(0,a.jsx)(v.Xi,{asChild:!0,children:(0,a.jsx)(d.default,{href:"/dashboard",children:"Dashboard"})}),(0,a.jsx)(v.Xi,{asChild:!0,children:(0,a.jsx)(d.default,{href:"/settings",children:"Settings"})}),(0,a.jsx)(v.VD,{}),c&&(0,a.jsx)(v.Xi,{onClick:c,children:"Log out"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex-1 flex",children:[o&&(0,a.jsxs)("div",{className:"fixed inset-0 z-40 lg:hidden",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50",onClick:b}),(0,a.jsx)("div",{className:"fixed inset-y-0 left-0 w-64 bg-background p-4 shadow-lg",children:(0,a.jsx)("div",{className:"flex h-full flex-col",children:(0,a.jsx)("div",{className:"space-y-1 py-4",children:w.map(e=>(0,a.jsx)(y,{href:e.href,icon:e.icon,label:e.label,isActive:k===e.href,onClick:b},e.href))})})})]}),(0,a.jsx)("div",{className:"hidden md:flex md:w-64 md:flex-col md:inset-y-0 border-r",children:(0,a.jsx)("div",{className:"flex-1 flex flex-col min-h-0 pt-6 px-4",children:(0,a.jsx)("nav",{className:"flex-1 space-y-1",children:w.map(e=>(0,a.jsx)(y,{href:e.href,icon:e.icon,label:e.label,isActive:k===e.href},e.href))})})}),(0,a.jsx)("main",{className:"flex-1 overflow-auto p-4 md:p-6 bg-muted/20",children:t})]})]})}var k=t(4881),w=t(2451),b=t(2735),Z=t(8752),C=t(9140);function A(){var e,s;let t=(0,r.useParams)(),d=t?t.id:"",o=(0,r.useRouter)(),m=(0,k.a)(),u=null==m?void 0:m.user,[h,x]=(0,n.useState)(!0),[f,p]=(0,n.useState)(null),[g,j]=(0,n.useState)(null),[v,y]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(!u){o.push("/auth/login");return}if(!u.isAdmin){o.push("/dashboard");return}d&&(async()=>{try{x(!0);let e=await c.w.getResponseById(d);if(p(e),e.template){if(j(e.template),e.template.questionOrder)try{let s=e.template.questionOrder;y("string"==typeof s?JSON.parse(s):s)}catch(e){console.error("Failed to parse questionOrder:",e),y([])}}else console.warn("Template data not included in the response"),y([])}catch(e){console.error("Error fetching response:",e),(0,Z.Am)({title:"Error",description:"Failed to load response details",variant:"destructive"})}finally{x(!1)}})()},[d,o,u]);let A=e=>new Date(e).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),D=(e,s)=>{let t="".concat(e).concat(s,"Answer"),n=null==f?void 0:f[t];return null==n?(0,a.jsx)("span",{className:"text-muted-foreground",children:"No answer provided"}):"boolean"==typeof n?n?"Yes":"No":n.toString()};return(0,a.jsx)(N,{user:u?{name:u.name||"Admin",email:u.email||"",isAdmin:!0}:void 0,onLogout:()=>{(null==m?void 0:m.logout)&&(m.logout(),o.push("/auth/login"))},children:(0,a.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,a.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:()=>o.back(),className:"w-fit",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"Back to responses"]}),h?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(C.O,{className:"h-8 w-64"}),(0,a.jsx)(C.O,{className:"h-24 w-full"}),(0,a.jsx)(C.O,{className:"h-64 w-full"})]}):f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:(null==g?void 0:g.title)||"Response Details"}),(0,a.jsxs)("p",{className:"text-muted-foreground mt-1",children:["Submitted ",A(f.createdAt)]})]}),(0,a.jsxs)(i.z,{variant:"outline",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Export Response"]})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsx)(l.ll,{children:"Response Details"}),(0,a.jsxs)(l.SZ,{children:["Submitted by ",(null===(e=f.user)||void 0===e?void 0:e.name)||"Anonymous",(null===(s=f.user)||void 0===s?void 0:s.email)&&" (".concat(f.user.email,")")]})]}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-x-4 gap-y-2 text-sm",children:[(0,a.jsx)("div",{className:"font-medium",children:"Template:"}),(0,a.jsx)("div",{className:"col-span-2",children:(null==g?void 0:g.title)||"Unknown"}),(0,a.jsx)("div",{className:"font-medium",children:"Submission ID:"}),(0,a.jsx)("div",{className:"col-span-2 font-mono",children:f.id}),(0,a.jsx)("div",{className:"font-medium",children:"Submission Date:"}),(0,a.jsx)("div",{className:"col-span-2",children:A(f.createdAt)}),(null==g?void 0:g.isQuiz)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"font-medium",children:"Score:"}),(0,a.jsx)("div",{className:"col-span-2",children:void 0!==f.score&&void 0!==f.totalPossiblePoints?(0,a.jsxs)("span",{children:[f.score," / ",f.totalPossiblePoints,"(",(f.score/f.totalPossiblePoints*100).toFixed(1),"%)"]}):"Not scored"})]})]}),(0,a.jsx)("div",{className:"h-px bg-border my-6"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Responses"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[v.map(e=>{let s=e.match(/custom(String|Text|Int|Checkbox)(\d+)/);if(!s)return null;let[t,n,r]=s,l="custom".concat(n).concat(r,"Question"),i=null==g?void 0:g[l];return i?(0,a.jsxs)("div",{className:"border rounded-md p-4",children:[(0,a.jsx)("div",{className:"font-medium mb-2",children:i}),(0,a.jsx)("div",{className:"text-foreground",children:D(n,parseInt(r))})]},e):null}),0===v.length&&(0,a.jsx)(a.Fragment,{children:["String","Text","Int","Checkbox"].map(e=>[void 0,void 0,void 0,void 0].map((s,t)=>{let n=t+1,r="custom".concat(e).concat(n,"Question"),l=null==g?void 0:g[r],i="custom".concat(e).concat(n,"State");return(null==g?void 0:g[i])&&l?(0,a.jsxs)("div",{className:"border rounded-md p-4",children:[(0,a.jsx)("div",{className:"font-medium mb-2",children:l}),(0,a.jsx)("div",{className:"text-foreground",children:D(e,n)})]},"".concat(e).concat(n)):null}))})]})]})]})})]})]}):(0,a.jsxs)("div",{className:"p-6 text-center",children:[(0,a.jsx)("p",{className:"text-lg text-muted-foreground",children:"Response not found or you don't have permission to view it."}),(0,a.jsx)(i.z,{variant:"outline",className:"mt-4",onClick:()=>o.push("/admin/responses"),children:"Back to all responses"})]})]})})}},227:function(e,s,t){"use strict";t.d(s,{c:function(){return p},Z:function(){return p}});var a=t(7437),n=t(2265),r=t(1723),l=t(5302),i=t(2252),c=t(9174),d=t(1312),o=t(3448);let m=d.zt,u=d.fC,h=d.xz,x=n.forwardRef((e,s)=>{let{className:t,sideOffset:n=4,...r}=e;return(0,a.jsx)(d.VY,{ref:s,sideOffset:n,className:(0,o.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})});x.displayName=d.VY.displayName;var f=t(898);function p(e){let{showText:s=!1}=e,[t,d]=(0,n.useState)("checking"),[o,p]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=async()=>{d("checking");try{let e=await (0,f.Os)();d("ok"===e.status?"ok":"error")}catch(e){d("error")}p(new Date)};e();let s=setInterval(e,6e4);return()=>clearInterval(s)},[]),(0,a.jsx)(m,{children:(0,a.jsxs)(u,{children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsxs)("div",{className:"flex items-center",children:["checking"===t&&(0,a.jsxs)(c.C,{variant:"outline",className:"py-1.5",children:[(0,a.jsx)(r.Z,{className:"h-4 w-4 animate-pulse"}),s&&(0,a.jsx)("span",{className:"ml-2",children:"Checking API"})]}),"ok"===t&&(0,a.jsxs)(c.C,{variant:"outline",className:"py-1.5 bg-green-500 text-white hover:bg-green-600",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),s&&(0,a.jsx)("span",{className:"ml-2",children:"API Online"})]}),"error"===t&&(0,a.jsxs)(c.C,{variant:"outline",className:"py-1.5 bg-red-500 text-white hover:bg-red-600",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),s&&(0,a.jsx)("span",{className:"ml-2",children:"API Offline"})]})]})}),(0,a.jsx)(x,{children:(0,a.jsxs)("div",{children:["API Status: ","ok"===t?"Online":"error"===t?"Offline":"Checking...",o&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Last checked: ",o.toLocaleTimeString()]})]})})]})})}},9547:function(e,s,t){"use strict";t.d(s,{T:function(){return d}});var a=t(7437);t(2265);var n=t(5929),r=t(7226),l=t(8298),i=t(2381),c=t(2060);function d(){let{setTheme:e}=(0,l.F)();return(0,a.jsxs)(c.h_,{children:[(0,a.jsx)(c.$F,{asChild:!0,children:(0,a.jsxs)(i.z,{variant:"outline",size:"icon",children:[(0,a.jsx)(n.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,a.jsx)(r.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,a.jsxs)(c.AW,{align:"end",children:[(0,a.jsx)(c.Xi,{onClick:()=>e("light"),children:"Light"}),(0,a.jsx)(c.Xi,{onClick:()=>e("dark"),children:"Dark"}),(0,a.jsx)(c.Xi,{onClick:()=>e("system"),children:"System"})]})]})}},9820:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return o},eW:function(){return m},ll:function(){return c}});var a=t(7437),n=t(2265),r=t(3448);let l=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});l.displayName="Card";let i=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t),...n})});i.displayName="CardHeader";let c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});c.displayName="CardTitle";let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",t),...n})});d.displayName="CardDescription";let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",t),...n})});o.displayName="CardContent";let m=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",t),...n})});m.displayName="CardFooter"},9140:function(e,s,t){"use strict";t.d(s,{O:function(){return r}});var a=t(7437),n=t(3448);function r(e){let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-muted",s),...t})}},898:function(e,s,t){"use strict";t.d(s,{Os:function(){return n}});var a=t(9642);let n=async()=>{try{let e=await a.Z.get("/health/ping");return{status:"ok",message:"API server is responding",data:e.data,timestamp:new Date}}catch(e){return{status:"error",message:"API server is not responding",error:e.message,timestamp:new Date}}};s.ZP={checkHealth:async()=>n(),async checkDatabase(){try{let e=await a.Z.get("/health/database");return{status:"ok",message:"Database is connected",data:e.data,timestamp:new Date}}catch(e){return{status:"error",message:"Database health check failed",error:e.message,timestamp:new Date}}},async checkAuth(){try{let e=await a.Z.get("/auth/check");return{status:"ok",message:"Auth system is working",data:e.data,timestamp:new Date}}catch(e){return{status:"error",message:"Auth system check failed",error:e.message,timestamp:new Date}}},async checkAll(){let e={api:await this.checkHealth(),database:await this.checkDatabase(),auth:await this.checkAuth(),timestamp:new Date};return{status:Object.values(e).some(e=>"error"===e.status)?"error":"ok",results:e,timestamp:new Date}}}},7491:function(e,s,t){"use strict";t.d(s,{w:function(){return n}});var a=t(9642);let n={getResponsesByTemplateId:async e=>(await a.Z.get("/responses/template/".concat(e))).data,getResponseById:async e=>(await a.Z.get("/responses/".concat(e))).data,getUserResponses:async()=>(await a.Z.get("/responses/user")).data,submitResponse:async e=>(await a.Z.post("/responses",e)).data,getAggregateData:async e=>(await a.Z.get("/responses/aggregate/".concat(e))).data,async deleteResponse(e){await a.Z.delete("/responses/".concat(e))}}}},function(e){e.O(0,[284,464,972,513,832,331,128,713,971,117,744],function(){return e(e.s=2720)}),_N_E=e.O()}]);