"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[961],{1945:function(e,a,s){s.d(a,{c:function(){return V}});var t=s(7437),n=s(2265),r=s(7648),l=s(9376),i=s(5466),d=s(1715),o=s(8736),c=s(3578),m=s(8293),f=s(2369),u=s(8728),h=s(7692),x=s(2489),g=s(3448),p=s(2381),j=s(6246),v=s(2060),N=s(9547),b=s(9174),w=s(5493);let y={async testConnection(){try{let e=w.Z.defaults.baseURL||"No base URL configured",a=Date.now();await w.Z.get("/health");let s=Date.now();return{success:!0,message:"Connection successful (".concat(s-a,"ms)"),baseUrl:e,timestamp:new Date}}catch(s){var e,a;return{success:!1,message:s.message||"Connection failed",error:{status:null===(e=s.response)||void 0===e?void 0:e.status,data:null===(a=s.response)||void 0===a?void 0:a.data,message:s.message},baseUrl:w.Z.defaults.baseURL||"No base URL configured",timestamp:new Date}}},async testAuth(){let e=localStorage.getItem("token");if(!e)return{authenticated:!1,message:"No authentication token found",token:null,timestamp:new Date};try{let t=this.decodeToken(e);try{let a=await w.Z.get("/auth/me");return{authenticated:!0,message:"Authentication successful",userData:a.data,token:e,tokenInfo:t,timestamp:new Date}}catch(n){var a,s;return{authenticated:!1,message:"Authentication failed",token:e,tokenInfo:t,error:{status:null===(a=n.response)||void 0===a?void 0:a.status,data:null===(s=n.response)||void 0===s?void 0:s.data,message:n.message},timestamp:new Date}}}catch(a){return{authenticated:!1,message:"Token decode failed",token:e,error:a,timestamp:new Date}}},decodeToken(e){try{let a=e.split(".")[1];if(!a)return{isValid:!1};let s=a.replace(/-/g,"+").replace(/_/g,"/"),t=JSON.parse(atob(s)),n={isValid:!0,payload:t};if(t.exp){let e=new Date(1e3*t.exp);n.exp=e,n.isExpired=e<new Date}return t.iat&&(n.iat=new Date(1e3*t.iat)),n}catch(e){return{isValid:!1,error:e}}}};var C=s(2471),k=s(1312);let D=k.zt,A=k.fC,Z=k.xz,R=n.forwardRef((e,a)=>{let{className:s,sideOffset:n=4,...r}=e;return(0,t.jsx)(k.VY,{ref:a,sideOffset:n,className:(0,g.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})});function z(){let[e,a]=(0,n.useState)("loading"),[s,r]=(0,n.useState)("loading");(0,n.useEffect)(()=>{let e=async()=>{try{let e=await y.testConnection();if(a(e.success?"online":"offline"),C.O.isLoggedIn())try{let e=await y.testAuth();r(e.authenticated?"valid":"invalid")}catch(e){r("invalid")}else r("none")}catch(e){a("offline"),r("none")}};e();let s=setInterval(e,6e4);return()=>clearInterval(s)},[]);let l="loading"===e||"loading"===s?{label:"Checking API...",variant:"outline"}:"offline"===e?{label:"API Offline",variant:"destructive"}:"invalid"===s?{label:"Auth Invalid",variant:"secondary"}:{label:"API Online",variant:"default"};return(0,t.jsx)(D,{children:(0,t.jsxs)(A,{children:[(0,t.jsx)(Z,{asChild:!0,children:(0,t.jsx)(b.C,{variant:l.variant,className:"cursor-help mr-2",children:l.label})}),(0,t.jsx)(R,{children:(0,t.jsxs)("p",{children:["API: ","loading"===e?"Checking...":"online"===e?"Connected":"Disconnected",(0,t.jsx)("br",{}),"Auth: ","loading"===s?"Checking...":"valid"===s?"Valid":"invalid"===s?"Invalid":"Not Logged In"]})})]})})}R.displayName=k.VY.displayName;let I=e=>{let{href:a,icon:s,label:n,isActive:l,onClick:i}=e;return(0,t.jsx)(r.default,{href:a,onClick:i,children:(0,t.jsxs)("div",{className:(0,g.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm transition-all",l?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[s,n]})})};function V(e){let{children:a,user:s,onLogout:g}=e,[b,w]=(0,n.useState)(!1),y=(0,l.usePathname)(),C=[{href:"/dashboard",icon:(0,t.jsx)(i.Z,{className:"h-4 w-4"}),label:"Dashboard"},{href:"/dashboard/templates",icon:(0,t.jsx)(d.Z,{className:"h-4 w-4"}),label:"My Templates"},{href:"/dashboard/responses",icon:(0,t.jsx)(o.Z,{className:"h-4 w-4"}),label:"Responses"},...(null==s?void 0:s.isAdmin)?[{href:"/admin",icon:(0,t.jsx)(c.Z,{className:"h-4 w-4"}),label:"Admin"}]:[]],k=()=>w(!1);return(0,t.jsxs)("div",{className:"h-full min-h-screen flex flex-col",children:[(0,t.jsxs)("header",{className:"sticky top-0 z-30 h-16 border-b bg-background flex items-center px-4 md:px-6",children:[(0,t.jsxs)(p.z,{variant:"ghost",size:"icon",className:"mr-2 md:hidden",onClick:()=>w(!b),children:[(0,t.jsx)(m.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Toggle menu"})]}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)(r.default,{href:"/",className:"flex items-center gap-2",children:[(0,t.jsx)(d.Z,{className:"h-6 w-6"}),(0,t.jsx)("span",{className:"text-lg font-semibold",children:"ReadyForms"})]})}),(0,t.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[s.isAdmin&&(0,t.jsx)(z,{}),(0,t.jsx)(N.T,{}),(0,t.jsxs)(v.h_,{children:[(0,t.jsx)(v.$F,{asChild:!0,children:(0,t.jsx)(p.z,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:(0,t.jsxs)(j.qE,{className:"h-8 w-8",children:[(0,t.jsx)(j.F$,{src:"",alt:s.name}),(0,t.jsx)(j.Q5,{children:s.name.split(" ").map(e=>e[0]).join("").toUpperCase()})]})})}),(0,t.jsxs)(v.AW,{className:"w-56",align:"end",forceMount:!0,children:[(0,t.jsx)(v.Ju,{className:"font-normal",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium leading-none",children:s.name}),(0,t.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:s.email})]})}),(0,t.jsx)(v.VD,{}),(0,t.jsx)(v.Xi,{asChild:!0,children:(0,t.jsxs)(r.default,{href:"/profile",children:[(0,t.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Profile"})]})}),(0,t.jsx)(v.Xi,{asChild:!0,children:(0,t.jsxs)(r.default,{href:"/settings",children:[(0,t.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Settings"})]})}),(0,t.jsx)(v.VD,{}),(0,t.jsxs)(v.Xi,{onClick:g,children:[(0,t.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Log out"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex",children:[b&&(0,t.jsxs)("div",{className:"fixed inset-0 z-40 lg:hidden",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50",onClick:k}),(0,t.jsxs)("div",{className:"fixed inset-y-0 left-0 w-64 bg-background p-4 shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Navigation"}),(0,t.jsxs)(p.z,{variant:"ghost",size:"icon",onClick:k,className:"lg:hidden",children:[(0,t.jsx)(x.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Close menu"})]})]}),(0,t.jsx)("nav",{className:"grid gap-1",children:C.map(e=>(0,t.jsx)(I,{href:e.href,icon:e.icon,label:e.label,isActive:y===e.href,onClick:k},e.href))})]})]}),(0,t.jsx)("div",{className:"hidden md:flex md:w-64 md:flex-col md:inset-y-0 border-r",children:(0,t.jsx)("div",{className:"flex-1 flex flex-col min-h-0 pt-6 px-4",children:(0,t.jsx)("nav",{className:"flex-1 space-y-1",children:C.map(e=>(0,t.jsx)(I,{href:e.href,icon:e.icon,label:e.label,isActive:y===e.href},e.href))})})}),(0,t.jsx)("main",{className:"flex-1 overflow-auto p-4 md:p-6 bg-muted/20",children:a})]})]})}},9174:function(e,a,s){s.d(a,{C:function(){return i}});var t=s(7437);s(2265);var n=s(535),r=s(3448);let l=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:a,variant:s,...n}=e;return(0,t.jsx)("div",{className:(0,r.cn)(l({variant:s}),a),...n})}},9820:function(e,a,s){s.d(a,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return l},aY:function(){return c},eW:function(){return m},ll:function(){return d}});var t=s(7437),n=s(2265),r=s(3448);let l=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});l.displayName="Card";let i=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...n})});i.displayName="CardHeader";let d=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("h3",{ref:a,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});d.displayName="CardTitle";let o=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("p",{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",s),...n})});o.displayName="CardDescription";let c=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("p-6 pt-0",s),...n})});c.displayName="CardContent";let m=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",s),...n})});m.displayName="CardFooter"}}]);